import{r as s,j as e,f as $,I as R,a as I,b as U,c as J,H as K,d as X,F as Z}from"./Footer-b67b93bd.js";import{F as ee}from"./Filters-bb7c5f68.js";import{M as L,Q as u,f as z,T as B,S as q,g as ae,d as te,s as re,u as ne,a as se,b as w,L as le}from"./Spinner-360b4a09.js";const l={id:"MODIFY_ID",name:"MODIFY_NAME",email:"MODIFY_EMAIL",rol_id:"MODIFY_ROL",dni:"MODIFY_DNI",phone:"MODIFY_PHONE",direction:"MODIFY_DIRECTION",password:"MODIFY_PASSWORD",password_confirmation:"MODIFY_PASSWORD_CONFIRMATION"};function oe(a,n){switch(n.type){case l.id:return{...a,id:n.payload};case l.name:return{...a,name:n.payload};case l.email:return{...a,email:n.payload};case l.rol_id:return{...a,rol_id:n.payload};case l.dni:return{...a,dni:n.payload};case l.phone:return{...a,phone:n.payload};case l.direction:return{...a,direction:n.payload};case l.password:return{...a,password:n.payload};case l.password_confirmation:return{...a,password_confirmation:n.payload};default:return a}}function ie({user:a,option:n,open:b,setOpen:c,setMustLoad:j,setHelper:C}){const[y,N]=s.useState(!1),[f,x]=s.useState(!1),p={method:n==="Crear"?"POST":"PUT",url:n!=="Actualizar"?"/users/store":"/users/update",sucessMessage:n==="Crear"?"Usuario agregado":"Usuario actualizado",loadingMessage:n!=="Actualizar"?"Agregando usuario":"Actualizando usuario"},[i,d]=s.useReducer(oe,a),[E,g]=s.useState(!1),_=t=>{t.preventDefault(),g(!0);const v=u(e.jsx(q,{message:p.loadingMessage}),{autoClose:1e4,hideProgressBar:!0});z(p.method,p.url,i).then(o=>{if(o.errors)return u.update(v,{render:e.jsx(e.Fragment,{children:e.jsx(B,{data:o.errors})}),type:u.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});u.update(v,{render:p.sucessMessage,type:u.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),j(!1),C(F=>F+1),c(!1)}).catch(o=>{console.log(o),u.update(v,{render:"Hay problemas de conexión",type:u.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>g(!1))};return s.useEffect(()=>{for(const t in l){const v=l[t],o=a.hasOwnProperty(t)?a[t]:"";d({type:v,payload:o})}},[a]),e.jsxs(e.Fragment,{children:[e.jsxs(L,{option:n,open:b,setOpen:c,isLoading:E,handleSubmit:_,icon:$,text:"Usuario",children:[e.jsxs("div",{className:"relative border rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-neutral-200 placeholder:text-neutral-200 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Email address",value:i.name,onChange:t=>{d({type:l.name,payload:t.target.value})},required:!0,autoFocus:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Nombre"})]}),e.jsxs("div",{className:"relative border rounded w-full order-2",children:[e.jsxs("select",{className:"peer block min-h-[auto] w-full rounded border-0 bg-gray-700 px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-neutral-200 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:i.rol_id,onChange:t=>{d({type:l.rol_id,payload:t.target.value})},required:!0,children:[e.jsx("option",{value:"1",children:"Administrador"}),e.jsx("option",{value:"2",children:"Empleado"})]}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Rol del usuario"})]}),e.jsxs("div",{className:"relative border rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-neutral-200 placeholder:text-neutral-200 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Email address",value:i.email,onChange:t=>{d({type:l.email,payload:t.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Correo electrónico"})]}),e.jsxs("div",{className:"relative border rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-neutral-200 placeholder:text-neutral-200 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Email address",value:i.dni,onChange:t=>{d({type:l.dni,payload:t.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"DNI"})]}),e.jsxs("div",{className:"relative border rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-neutral-200 placeholder:text-neutral-200 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Email address",value:i.phone,onChange:t=>{d({type:l.phone,payload:t.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Teléfono"})]}),e.jsxs("div",{className:"relative border rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-neutral-200 placeholder:text-neutral-200 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Email address",value:i.direction,onChange:t=>{d({type:l.direction,payload:t.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Dirección"})]}),n!="Actualizar"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative border rounded w-full order-2",children:[e.jsx("input",{type:y?"text":"password",autoComplete:"on",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-neutral-200 placeholder:text-neutral-200 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Email address",value:i.password,onChange:t=>{d({type:l.password,payload:t.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Contraseña"}),e.jsx("div",{className:"absolute top-1 right-2 hover:scale-125 cursor-pointer transition-all",onClick:()=>N(t=>!t),children:e.jsx(R,{icon:y?I:U,size:"25px",css:"text-white"})})]}),e.jsxs("div",{className:"relative border rounded w-full order-2",children:[e.jsx("input",{type:f?"text":"password",autoComplete:"on",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-neutral-200 placeholder:text-neutral-200 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",placeholder:"Email address",value:i.password_confirmation,onChange:t=>{d({type:l.password_confirmation,payload:t.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Repetir contraseña"}),e.jsx("div",{className:"absolute top-1 right-2 hover:scale-125 cursor-pointer transition-all",onClick:()=>x(t=>!t),children:e.jsx(R,{icon:f?I:U,size:"25px",css:"text-white"})})]})]})]}),e.jsx(L.ToastifyModal,{})]})}function de({userI:a,setUser:n,setOption:b,setOpenModal:c,setHelper:j,setMustLoad:C,setMustAnimate:y,setIsDeleted:N}){const f=()=>{re("¿Quieres eliminar este usuario?",()=>{N(!0),y(!1);const x=u(e.jsx(q,{message:`Eliminando a ${a.name}`}),{autoClose:3e3,hideProgressBar:!0});z("DELETE","/users/destroy",{id:a.id}).then(p=>{if(C(!1),p.errors)return N(!1),u.update(x,{render:e.jsx(e.Fragment,{children:e.jsx(B,{data:p.errors})}),type:u.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});u.update(x,{render:`Usuario ${a.name} ha sido eliminado.`,type:u.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),j(i=>i+1)}).catch(p=>{u.update(x,{render:"Hay problemas de conexión",type:u.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})})};return e.jsxs("div",{className:"px-8 pt-5 flex flex-col justify-between flex-1",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold",children:["Nombre: ",a.name]}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:["Rol: ",a.rol.name]}),e.jsxs("p",{className:"mt-2 text-gray-700",children:["Correo: ",a.email]}),e.jsxs("p",{className:"text-gray-700",children:["DNI: ",a.dni]}),e.jsxs("p",{className:"text-gray-700",children:["Teléfono: ",a.phone]}),e.jsxs("p",{className:"text-gray-700",children:["Dirección: ",a.direction]}),e.jsxs("p",{className:"text-gray-700",children:["Fecha: ",ae(a.created_at)]}),e.jsx("p",{className:"text-gray-900",children:te(a.created_at)})]}),e.jsxs("div",{className:"my-3 flex gap-2",children:[e.jsx("button",{className:"bg-vetsky rounded-md py-1 px-4 font-semibold hover:bg-gray-400",onClick:()=>{b("Actualizar"),c(!0),n(a)},children:"Editar"}),e.jsx("button",{className:"bg-vetbrown rounded-md py-1 px-4 text-white font-semibold hover:bg-gray-500",onClick:f,children:"Eliminar"})]})]})}function ce(){var k,A,Y;const a={id:"",name:"",email:"",rol_id:2,dni:"",phone:"",direction:"",password:"",password_confirmation:""},n=[{name:"Nombre",value:"name"},{name:"Correo",value:"email"},{name:"DNI",value:"dni"},{name:"Teléfono",value:"phone"}],[b,c]=s.useState(1),[j,C]=s.useState(12),[y,N]=s.useState("name"),[f,x]=s.useState(""),[p,i]=s.useState(""),[d,E]=s.useState(""),[g,_]=s.useState(""),{debounceValue:t}=ne(f,500),[v,o]=s.useState(0),F=`/users/list?page=${b}&limit=${j}&filter=${y}&inputFilter=${t}&rol=${p}&startDate=${d}&finishDate=${g}`,{data:m,loading:T}=se(F,[b,j,v]),[H,M]=s.useState("Crear"),[W,P]=s.useState(!1),[G,O]=s.useState(a),[Q,S]=s.useState(!0),[V,D]=s.useState(!0);return s.useEffect(()=>{T||(S(!0),D(!0),c(1),o(r=>r+1))},[t]),e.jsxs(e.Fragment,{children:[e.jsx(K,{icon:$,message:"Gestión de usuarios",name:"usuario",setOpen:P,setOption:M,setData:O,initialState:a}),e.jsx(ee,{children:n.map((r,h)=>e.jsx("button",{className:`${y===r.value?"bg-vetgreen-200 text-white":"bg-vetgreen-100 hover:bg-vetgreen-200 hover:text-white"} cursor-pointer py-2 md:mx-2 mx-1 rounded-full flex-grow`,onClick:()=>{N(r.value),x("")},children:r.name},h))}),e.jsxs(w,{children:[e.jsxs(w.Search,{inputFilter:f,setInputFilter:x,handleReset:()=>{i(""),E(""),_(""),c(1),o(r=>r+1)},children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm my-2",children:"Rol de usuario"}),e.jsxs("select",{className:"p-2 rounded-xl bg-gray-300 w-full",value:p,onChange:r=>{i(r.target.value),c(1),o(h=>h+1)},children:[e.jsx("option",{value:""}),e.jsx("option",{value:"1",children:"Administrador"}),e.jsx("option",{value:"2",children:"Empleado"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm my-2",children:"Fecha de inicio"}),e.jsx("input",{type:"date",className:"p-2 rounded-xl bg-gray-300 w-full",value:d,onChange:r=>{E(r.target.value),c(1),o(h=>h+1)}})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm my-2",children:"Fecha de finalización"}),e.jsx("input",{type:"date",className:"p-2 rounded-xl bg-gray-300 w-full",value:g,onChange:r=>{_(r.target.value),c(1),o(h=>h+1)}})]})]}),e.jsx(w.FilterBar,{hide:!t&&!p&&!d&&!g,data:[{tag:(k=n.find(r=>r.value===y))==null?void 0:k.name,input:t,handleClick:()=>x("")},{tag:"rol",input:p.length>0?p==1?"Administrador":"Empleado":null,handleClick:()=>{i(""),c(1),o(r=>r+1)}},{tag:"Fecha de inicio",input:d.length>0?d:null,handleClick:()=>{E(""),c(1),o(r=>r+1)}},{tag:"Fecha de finalización",input:g.length>0?g:null,handleClick:()=>{_(""),c(1),o(r=>r+1)}}]}),e.jsx(w.CardContainer,{children:T&Q?e.jsx(le,{message:"Cargando usuarios"}):((A=m.data)==null?void 0:A.length)===0?e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(R,{icon:X,css:"mr-3"}),"No hay datos disponibles."]})}):e.jsx(e.Fragment,{children:(Y=m==null?void 0:m.data)==null?void 0:Y.map((r,h)=>e.jsx(w.CardContainer.Card,{mustAnimate:V,setMustAnimate:D,children:e.jsx(de,{userI:r,setUser:O,setOption:M,setOpenModal:P,setHelper:o,setMustLoad:S,setMustAnimate:D})},`${r.id}-${h}`))})}),e.jsx(w.Pagination,{pageQuantity:m.current_page*m.per_page,quantity:m.total,setMustLoad:S,setLimit:C,setPage:c,nextPage:m.next_page_url,prevPage:m.prev_page_url,page:m.current_page,lastPage:m.last_page,setMustAnimate:D})]}),e.jsx(ie,{user:G,option:H,open:W,setOpen:P,setMustLoad:S,setHelper:o}),e.jsx(Z,{})]})}const pe=J.createRoot(document.getElementById("user"));pe.render(e.jsx(ce,{}));
