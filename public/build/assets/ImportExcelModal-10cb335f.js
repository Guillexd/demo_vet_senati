import{r as p,j as e,I as d,q as b,s as y,t as j,u as w}from"./Footer-1433491c.js";import{Q as t,f as v,T as E,S as N}from"./Spinner-e40162ab.js";function k({isActive:o,id:n,name:f,model:g,setHelper:h,setMustLoad:m,css:a=null}){const[l,u]=p.useState(!1),i=()=>{u(!0)},x=()=>{u(!1)},r=()=>{const s=t(e.jsx(N,{message:"Cambiando estado"}),{autoClose:3e3,hideProgressBar:!0});v("POST","/generic/change-status",{id:n,model:g,isActive:o?0:1}).then(c=>{if(m(!1),c.errors)return t.update(s,{render:e.jsx(e.Fragment,{children:e.jsx(E,{data:c.errors})}),type:t.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});t.update(s,{render:`Estado de ${f} ${o?"inactivo":"activo"}.`,type:o?t.TYPE.ERROR:t.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),h(C=>C+1)}).catch(c=>{t.update(s,{render:"Hay problemas de conexión",type:t.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})};return e.jsx(e.Fragment,{children:o?e.jsx("button",{className:`absolute ${a||"top-1 right-2"} rounded-full bg-green-500 hover:bg-white w-10 h-10 flex justify-center items-center font-bold font-mono text-xl text-white hover:text-red-500`,onClick:r,onMouseEnter:i,onMouseLeave:x,children:e.jsx(d,{icon:l?b:y,size:"36px"})}):e.jsx("button",{className:`absolute ${a||"top-1 right-2"} rounded-full bg-red-500 hover:bg-white w-10 h-10 flex justify-center items-center font-bold font-mono text-xl text-white hover:text-green-500`,onClick:r,onMouseEnter:i,onMouseLeave:x,children:e.jsx(d,{icon:l?y:b,size:"36px"})})})}function I({open:o,setOpen:n,url:f,format:g,setPage:h,setHelper:m}){const[a,l]=p.useState(null),[u,i]=p.useState(!1),x=()=>{if(a){i(!0);const r=t(e.jsx(N,{message:"Subiendo archivo"}),{autoClose:3e4,hideProgressBar:!0});v("POST",f,{excel:a},!0).then(s=>{if(!s.successfull)return t.update(r,{render:e.jsx(e.Fragment,{children:e.jsx(E,{data:{message:["Archivo corrupto o incorrecto."]}})}),type:t.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});h(1),m(c=>c+1),n(!1),l(null)}).catch(s=>{console.log(s),t.update(r,{render:"Hay problemas de conexión",type:t.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>i(!1))}else t.info("Debes enviar un archivo excel",{autoClose:1500})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${o?"scale-100":"scale-0"} fixed inset-0 bg-black opacity-60 z-30 transition-all duration-300 ease-out`}),e.jsx("div",{className:`fixed top-0 left-0 w-full h-full flex items-center justify-center transition-all duration-500 ease-out transform ${o?"":"translate-y-[-200%]"}`,style:{zIndex:"40"},children:e.jsx("div",{className:"w-full max-w-2xl max-h-full mx-3 overflow-y-auto",children:e.jsxs("section",{className:"relative rounded-lg shadow bg-white z-40",children:[e.jsxs("div",{className:"flex items-start p-4 border-b rounded-t border-gray-600",children:[e.jsx(d,{icon:j,css:"text-gray-700 text-3xl mx-3",size:"30px"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700",children:"Importar archivo Excel"}),e.jsx("button",{type:"button",className:"bg-gray-200 right-0 top-0 absolute p-3 rounded-xl m-2 opacity-80 hover:opacity-45",onClick:()=>n(!1),children:e.jsx(d,{css:"text-green-800",icon:w,size:"22px"})})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("input",{type:"file",className:"hidden",id:"excel_file",accept:".xlsx, .xls, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:r=>{const s=r.target.files&&r.target.files[0];l(s)}}),e.jsx("label",{htmlFor:"excel_file",className:"cursor-pointer block w-full py-2 text-center text-gray-600 bg-transparent rounded transition duration-200 ease-in-out hover:bg-gray-300",children:"--- Seleccionar archivo ---"})]}),a&&e.jsxs("section",{className:"order-1 bg-green-400 w-full p-3 rounded-lg flex justify-center items-center text-lg font-medium",children:[e.jsx(d,{icon:j,css:"mr-2",size:"25px"})," ",a.name]})]}),e.jsxs("div",{className:"flex justify-end p-6 space-x-2 border-t rounded-b border-gray-600",children:[e.jsx("button",{id:"btn_to_submit",type:"button",className:"text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:bg-red-600 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",disabled:u,onClick:x,children:"Importar"}),e.jsx("a",{href:`/formats/${g}`,className:"focus:ring-4 focus:outline-none rounded-lg border text-sm font-medium px-5 py-2.5 focus:z-10 bg-sky-500 text-white border-sky-500 hover:bg-sky-600 focus:ring-sky-600 cursor-pointer text-center",children:"Descargar formato"}),e.jsx("button",{type:"button",className:"focus:ring-4 focus:outline-none rounded-lg border text-sm font-medium px-5 py-2.5 focus:z-10 bg-gray-500 text-white border-gray-500 hover:bg-gray-600 focus:ring-gray-600",onClick:()=>n(!1),children:"Cerrar"})]})]})})})]})}export{k as B,I};
