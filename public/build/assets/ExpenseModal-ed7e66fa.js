import{r as d,j as e,z as j}from"./Footer-b3d1db75.js";import{M as f,Q as s,f as z,T as C,S as P}from"./Spinner-bdd0ae22.js";const l={id:"MODIFY_ID",reason:"MODIFY_REASON"};function b(r,a){switch(a.type){case l.id:return{...r,id:a.payload};case l.reason:return{...r,reason:a.payload};default:return r}}function A({expense:r,option:a,open:y,setOpen:c,setMustLoad:m,setHelper:h,actions:x=!0,mustBeToast:E=!0}){const i={method:a==="Crear"?"POST":"PUT",url:a!=="Actualizar"?"/expenses/store":"/expenses/update",sucessMessage:a==="Crear"?"Razón agregada":"Razón actualizada",loadingMessage:a!=="Actualizar"?"Agregando razón":"Actualizando razón"},[u,p]=d.useReducer(b,r),[v,g]=d.useState(!1),R=t=>{t.preventDefault(),g(!0);const n=s(e.jsx(P,{message:i.loadingMessage}),{autoClose:1e4,hideProgressBar:!0});z(i.method,i.url,u).then(o=>{if(o.errors)return s.update(n,{render:e.jsx(e.Fragment,{children:e.jsx(C,{data:o.errors})}),type:s.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});s.update(n,{render:i.sucessMessage,type:s.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),x&&(m(!1),h(T=>T+1)),c(!1)}).catch(o=>{console.log(o),s.update(n,{render:"Hay problemas de conexión",type:s.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>g(!1))};return d.useEffect(()=>{for(const t in l){const n=l[t],o=r.hasOwnProperty(t)?r[t]:"";p({type:n,payload:o})}},[r]),e.jsxs(e.Fragment,{children:[e.jsx(f,{option:a,open:y,setOpen:c,isLoading:v,handleSubmit:R,icon:j,text:"Razón",children:e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("textarea",{className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",rows:"4",value:u.reason,onChange:t=>{p({type:l.reason,payload:t.target.value})}}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Razón de egreso"})]})}),E&&e.jsx(f.ToastifyModal,{})]})}export{A as E};
