import{r as c,j as t,g as D,I,a as M}from"./Footer-c5ea0129.js";import{i as O,M as g,Q as s,f as T,T as P,S}from"./Spinner-44841055.js";const a={id:"MODIFY_ID",name:"MODIFY_NAME",identity_document_id:"MODIFY_IDENTITY_DOCUMENT_ID",document_number:"MODIFY_DOCUMENT_NUMBER",first_phone:"MODIFY_FIRST_PHONE",second_phone:"MODIFY_SECOND_PHONE",direction:"MODIFY_DIRECTION"};function R(o,n){switch(n.type){case a.id:return{...o,id:n.payload||""};case a.name:return{...o,name:n.payload||""};case a.identity_document_id:return{...o,identity_document_id:n.payload||""};case a.document_number:return{...o,document_number:n.payload||""};case a.first_phone:return{...o,first_phone:n.payload||""};case a.second_phone:return{...o,second_phone:n.payload||""};case a.direction:return{...o,direction:n.payload||""};default:return o}}function k({customer:o,option:n,open:h,setOpen:m,setMustLoad:f,setHelper:x,actions:v=!0,mustBeToast:b=!0}){const p={method:n==="Crear"?"POST":"PUT",url:n!=="Actualizar"?"/customers/store":"/customers/update",sucessMessage:n==="Crear"?"Cliente agregado":"Cliente actualizado",loadingMessage:n!=="Actualizar"?"Agregando cliente":"Actualizando cliente"},[r,l]=c.useReducer(R,o),[_,y]=c.useState(!1),[N,C]=c.useState([]),j=e=>{e.preventDefault(),y(!0);const i=s(t.jsx(S,{message:p.loadingMessage}),{autoClose:1e4,hideProgressBar:!0});T(p.method,p.url,r).then(d=>{if(d.errors)return s.update(i,{render:t.jsx(t.Fragment,{children:t.jsx(P,{data:d.errors})}),type:s.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});s.update(i,{render:p.sucessMessage,type:s.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),v&&(f(!1),x(E=>E+1)),m(!1)}).catch(d=>{console.log(d),s.update(i,{render:"Hay problemas de conexión",type:s.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>y(!1))},u=e=>e?e.split(" ").map(i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"").join(" "):"";c.useEffect(()=>{(async()=>{const e=await O("/identity-documents/list");C(e)})()},[]),c.useEffect(()=>{for(const e in a){const i=a[e],d=o.hasOwnProperty(e)?o[e]:"";l({type:i,payload:d})}},[o]);const w=async()=>{if(r.document_number.length<8||r.document_number.length>11)return;let e;r.identity_document_id==1?e=await axios.get(`/inquiry/dni?dni=${r.document_number}`):r.identity_document_id==2&&(e=await axios.get(`/inquiry/ruc?ruc=${r.document_number}`)),e.data.original.hasOwnProperty("razonSocial")?l({type:a.name,payload:e.data.original.razonSocial}):e.data.original.hasOwnProperty("nombres")?l({type:a.name,payload:u(e.data.original.nombres)+" "+u(e.data.original.apellidoPaterno)+" "+u(e.data.original.apellidoMaterno)}):s.error("DNI o RUC inválido o no encontrando",{autoClose:1500})};return t.jsxs(t.Fragment,{children:[t.jsxs(g,{option:n,open:h,setOpen:m,isLoading:_,handleSubmit:j,icon:D,text:"Cliente",children:[t.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[t.jsxs("select",{className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:r.identity_document_id,onChange:e=>{l({type:a.identity_document_id,payload:e.target.value})},required:!0,children:[t.jsx("option",{value:""}),N.map((e,i)=>t.jsx("option",{value:e.id,children:e.abbreviation},i))]}),t.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Tipo de documento (opcional)"})]}),t.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[t.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent pl-3 pr-10 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600 placeholder:text-gray-600 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:r.document_number,onChange:e=>{l({type:a.document_number,payload:e.target.value})}}),t.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Documento de identidad (opcional)"}),r.identity_document_id==1||r.identity_document_id==2?t.jsx("div",{className:"absolute top-1 right-2 h-full cursor-pointer",onClick:w,children:t.jsx(I,{icon:M,css:"transition-all text-black hover:scale-125",size:"25px"})}):null]}),t.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[t.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600 placeholder:text-gray-600 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:r.name,onClick:()=>{var e;return(e=navigator==null?void 0:navigator.clipboard)==null?void 0:e.writeText(r.name)},onChange:e=>{l({type:a.name,payload:e.target.value})}}),t.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Nombre (opcional)"})]}),t.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[t.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600 placeholder:text-gray-600 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:r.first_phone,onChange:e=>{l({type:a.first_phone,payload:e.target.value})}}),t.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Primer teléfono (opcional)"})]}),t.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[t.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600 placeholder:text-gray-600 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:r.second_phone,onChange:e=>{l({type:a.second_phone,payload:e.target.value})}}),t.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Segundo teléfono (opcional)"})]}),t.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1 sm:col-span-2",children:[t.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600 placeholder:text-gray-600 [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:r.direction,onChange:e=>{l({type:a.direction,payload:e.target.value})}}),t.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600 peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Dirección (opcional)"})]})]}),b&&t.jsx(g.ToastifyModal,{})]})}const z={id:"",name:"",identity_document_id:"",document_number:"",first_phone:"",second_phone:"",direction:""};export{k as C,z as i};
