import{j as e,I as C,w as kt,x as $t,y as Ft,r as n,z as ue,u as Ce,A as Tt,o as Bt,h as xe,B as te,C as Pt,e as pe,E as ze,G as _e,J as He,a as Mt,t as qe,d as Rt,H as At,D as It,F as zt}from"./Footer-1433491c.js";import{c as se,s as me,Q as b,S as Y,f as ee,T as ie,M as De,u as re,a as L,i as Ht,L as oe,d as Ee,h as Dt,l as le,b as Z}from"./Spinner-b109c97d.js";import{R as he}from"./ReactSelect-050f0c0e.js";import{C as Vt,i as qt}from"./initialStateCustomer-9bca4a80.js";import{E as Ot,i as Lt}from"./initialStateExpense-60aafb84.js";import{I as Yt}from"./ImageModal-d806c578.js";function Ut({cash_registerI:t,setCashRegister:s,setOption:u,setOpenModal:r,setHelper:m,setMustLoad:d,setMustAnimate:a,rol:p,handleClick:x,setIsDeleted:c}){const h=()=>{me("¿Quieres eliminar esta caja?",()=>{c(!0),a(!1);const j=b(e.jsx(Y,{message:`Eliminando la caja ${t.id}`}),{autoClose:3e3,hideProgressBar:!0});ee("DELETE","/cash_registers/destroy",{id:t.id}).then(i=>{if(d(!1),i.errors)return c(!1),b.update(j,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:i.errors})}),type:b.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(i.message)return c(!1),b.update(j,{render:e.jsx(e.Fragment,{children:i.message}),type:b.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});b.update(j,{render:`Caja ${t.id} ha sido eliminado.`,type:b.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),m(o=>o+1)}).catch(i=>{c(!1),b.update(j,{render:"Hay problemas de conexión",type:b.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})},"Se eliminarán los datos asociados a esta caja como los ingresos y egresos registrados del mismo.")};return e.jsxs("div",{className:"px-8 pt-5 flex flex-col justify-between flex-1 cursor-pointer",onClick:x,children:[e.jsx("div",{className:"absolute top-1 left-2 rounded-full bg-indigo-500 w-8 h-8 flex justify-center items-center font-bold font-mono text-xl text-white",children:t.id}),e.jsx("div",{className:"absolute top-8 right-2 animate-bounce rounded-full bg-indigo-500 w-10 h-10 flex justify-center items-center font-bold font-mono text-xl text-white",children:e.jsx(C,{icon:kt,size:"30px"})}),e.jsx("img",{src:"/image/caja.png",alt:"caja"}),e.jsxs("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold",children:["Caja ",se(t.created_at)]}),e.jsxs("div",{className:"uppercase tracking-wide text-sm text-indigo-700 font-bold",children:["Monto inicial: S/. ",t.initial_amount]}),t.total&&e.jsxs("div",{className:"uppercase tracking-wide text-sm font-bold",children:["Total: S/. ",t.total]}),e.jsx("div",{className:`${t.state===0?"bg-red-400 text-amber-200 ":"bg-green-400 text-black "} uppercase tracking-wide text-sm font-semibold rounded-lg w-fullpx-4 py-1 flex justify-center mb-3`,children:t.state!==0?e.jsxs(e.Fragment,{children:[e.jsx(C,{css:"me-2",icon:$t}),"Abierto"]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{css:"me-2",icon:Ft}),"Cerrado"]})}),p==1&&e.jsxs("div",{className:"mb-3 flex gap-2 mx-auto",onClick:j=>j.stopPropagation(),children:[t.state===0?e.jsx("button",{type:"button",className:"bg-green-300 rounded-md py-1 px-4 font-semibold hover:bg-green-400",onClick:()=>{u("Actualizar"),r(!1),s(t),setTimeout(()=>{document.getElementById("btn_to_submit").click()},200)},children:"Abrir caja"}):e.jsx("button",{className:"bg-vetsky rounded-md py-1 px-4 font-semibold hover:bg-gray-400",onClick:()=>{u("Actualizar"),r(!0),s(t)},children:"Editar"}),e.jsx("button",{className:"bg-vetbrown rounded-md py-1 px-4 text-white font-semibold hover:bg-gray-500",onClick:h,children:"Eliminar"})]})]})}const ne={id:"MODIFY_ID",initial_amount:"MODIFY_INITIAL_AMOUNT"};function Gt(t,s){switch(s.type){case ne.id:return{...t,id:s.payload};case ne.initial_amount:return{...t,initial_amount:s.payload};default:return t}}function Wt({cashRegister:t,option:s,open:u,setOpen:r,setMustLoad:m,setHelper:d}){const a={method:s==="Crear"?"POST":"PUT",url:s!=="Actualizar"?"/cash_registers/store":"/cash_registers/update",sucessMessage:s==="Crear"?"Caja agregada":"Caja actualizada",loadingMessage:s!=="Actualizar"?"Agregando caja":"Actualizando caja"},[p,x]=n.useReducer(Gt,t),[c,h]=n.useState(!1),j=i=>{i.preventDefault(),h(!0);const o=b(e.jsx(Y,{message:a.loadingMessage}),{autoClose:1e4,hideProgressBar:!0});ee(a.method,a.url,p).then(g=>{if(g.errors)return b.update(o,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:g.errors})}),type:b.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(g.message)return b.update(o,{render:e.jsx(e.Fragment,{children:g.message}),type:b.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});b.update(o,{render:a.sucessMessage,type:b.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),m(!1),d(N=>N+1),r(!1)}).catch(g=>{console.log(g),b.update(o,{render:"Hay problemas de conexión",type:b.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>h(!1))};return n.useEffect(()=>{for(const i in ne){const o=ne[i],g=t.hasOwnProperty(i)?t[i]:"";x({type:o,payload:g})}},[t]),e.jsxs(e.Fragment,{children:[e.jsx(De,{option:s,open:u,setOpen:r,isLoading:c,handleSubmit:j,icon:ue,text:"Caja",children:e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("input",{type:"number",step:"any",min:0,className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:p.initial_amount,onChange:i=>{x({type:ne.initial_amount,payload:i.target.value})},required:!0,autoFocus:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Monto inicial"})]})}),e.jsx(De.ToastifyModal,{})]})}let de;const Qt=new Uint8Array(16);function Jt(){if(!de&&(de=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!de))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return de(Qt)}const B=[];for(let t=0;t<256;++t)B.push((t+256).toString(16).slice(1));function Xt(t,s=0){return B[t[s+0]]+B[t[s+1]]+B[t[s+2]]+B[t[s+3]]+"-"+B[t[s+4]]+B[t[s+5]]+"-"+B[t[s+6]]+B[t[s+7]]+"-"+B[t[s+8]]+B[t[s+9]]+"-"+B[t[s+10]]+B[t[s+11]]+B[t[s+12]]+B[t[s+13]]+B[t[s+14]]+B[t[s+15]]}let Ve,ve,Ne=0,we=0;function Se(t,s,u){let r=s&&u||0;const m=s||new Array(16);t=t||{};let d=t.node||Ve,a=t.clockseq!==void 0?t.clockseq:ve;if(d==null||a==null){const i=t.random||(t.rng||Jt)();d==null&&(d=Ve=[i[0]|1,i[1],i[2],i[3],i[4],i[5]]),a==null&&(a=ve=(i[6]<<8|i[7])&16383)}let p=t.msecs!==void 0?t.msecs:Date.now(),x=t.nsecs!==void 0?t.nsecs:we+1;const c=p-Ne+(x-we)/1e4;if(c<0&&t.clockseq===void 0&&(a=a+1&16383),(c<0||p>Ne)&&t.nsecs===void 0&&(x=0),x>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ne=p,we=x,ve=a,p+=122192928e5;const h=((p&268435455)*1e4+x)%4294967296;m[r++]=h>>>24&255,m[r++]=h>>>16&255,m[r++]=h>>>8&255,m[r++]=h&255;const j=p/4294967296*1e4&268435455;m[r++]=j>>>8&255,m[r++]=j&255,m[r++]=j>>>24&15|16,m[r++]=j>>>16&255,m[r++]=a>>>8|128,m[r++]=a&255;for(let i=0;i<6;++i)m[r+i]=d[i];return s||Xt(m)}function Kt({children:t,option:s,open:u,setOpen:r,handleClick:m,icon:d,text:a,loading:p,width:x}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${u?"scale-100":"scale-0"} fixed inset-0 bg-black opacity-60 z-10 transition-all duration-300 ease-out`}),e.jsx("div",{className:`fixed top-0 left-0 w-full h-full flex items-center justify-center transition-all duration-500 ease-out transform ${u?"":"translate-y-[-200%]"}`,style:{zIndex:"40"},children:e.jsx("div",{className:`w-full ${x||"max-w-2xl"} max-h-full mx-3 overflow-y-auto`,children:e.jsxs("div",{className:"relative rounded-lg shadow bg-white z-40",children:[e.jsxs("div",{className:"flex items-start p-4 border-b rounded-t border-gray-600",children:[e.jsx(C,{icon:d,css:"text-gray-700  mx-3",size:"30px"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 ",children:a}),e.jsx("button",{type:"button",className:"bg-gray-300 right-0 top-0 absolute p-3 rounded-xl m-2 opacity-80 hover:opacity-45",onClick:()=>r(!1),children:e.jsx(C,{css:"text-green-800",icon:Ce,size:"22px"})})]}),e.jsx("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 gap-6",children:t}),e.jsxs("div",{className:"flex justify-end p-6 space-x-2 border-t rounded-b border-gray-600",children:[e.jsx("button",{type:"button",className:"text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:bg-red-600 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",onClick:m,disabled:p,children:s}),e.jsx("button",{type:"button",className:"focus:ring-4 focus:outline-none rounded-lg border text-sm font-medium px-5 py-2.5 focus:z-10 bg-gray-500 text-white border-gray-500 hover:bg-gray-600 focus:ring-gray-600",onClick:()=>r(!1),children:"Cerrar"})]})]})})})]})}const E={prod:"product",serv:"service",expen:"expense",vous:"vouchers",vou:"voucher"},ce={inc:"income",exp:"expense"};function O({cashRegister:t,handleClose:s,setHelper:u,setMustLoad:r,transitionName:m,setTransitionName:d,setImage:a,hide:p,setHide:x}){const[c,h]=n.useState(E.vous),[j,i]=n.useState([]),[o,g]=n.useState([]),[N,f]=n.useState(1),[w,l]=n.useState(6),[y,v]=n.useState(""),[_,$]=n.useState(!0),[R,S]=n.useState(!1),[k,F]=n.useState(0),[U,z]=n.useState(null);n.useEffect(()=>{c===E.prod?(z(null),i(["Transacción","Imagen","Producto","Precio","cantidad","subtotal","Cliente","descripción","fecha","voucher","eliminar"])):c===E.serv?(z(null),i(["Transacción","Servicio","Precio","cantidad","subtotal","Cliente","descripción","fecha","voucher","eliminar"])):c===E.expen?(z(null),i(["Transacción","subtotal","Razón","fecha","eliminar"])):c===E.vous?i(["Código","Cliente","fecha","eliminar"]):c===E.vou&&i(["Producto / Servicio","Precio","cantidad","subtotal","descripción","fecha","eliminar"])},[c]);const H=()=>{me("¿Quieres cerrar esta caja?",()=>{const V=b(e.jsx(Y,{message:"Cerrando caja"}),{autoClose:3e3,hideProgressBar:!0});ee("PUT","/cash_registers/update_state",{id:t.id}).then(q=>{b.update(V,{render:"La caja ha sido cerrada.",type:b.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),s(),r(!1),u(D=>D+1)}).catch(q=>{console.log(q),b.update(V,{render:"Hay problemas de conexión",type:b.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})},"¡Solo un administrador podrá volver a abrirla!","¡ciérralo!")},G=V=>{me("¿Quieres eliminar este movimiento?",()=>{const q=b(e.jsx(Y,{message:"Eliminando movimiento"}),{autoClose:3e3,hideProgressBar:!0});ee("DELETE","/cash_registers/destroy_movement",{id:V,cash_register_id:t.id}).then(D=>{if($(!1),D.errors)return b.update(q,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:D.errors})}),type:b.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(D.message)return b.update(q,{render:e.jsx(e.Fragment,{children:D.message}),type:b.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});b.update(q,{render:"El movimiento ha sido eliminado.",type:b.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),F(Q=>Q+1)}).catch(D=>{b.update(q,{render:"Hay problemas de conexión",type:b.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})})},W={id:t.id,setData:g,page:N,limit:w,helper:k,searchByFilter:y,mustLoad:_,handleDelete:G};return e.jsx("section",{id:"section_cash_register",className:`${t.id!==null?"translate-y-0":"translate-y-[200%]"} transition-all duration-500 ease-in fixed bg-slate-50 z-30 bottom-0 left-0 px-3 md:px-5 ${R?"overflow-hidden":"overflow-y-auto"} rounded-t-2xl w-screen h-[99vh] mt-2 pb-10`,children:t.id!==null?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-gray-400 sticky top-3 float-right p-3 rounded-xl m-2 opacity-80 hover:opacity-45 z-40 animate-bounce",onClick:s,children:e.jsx(C,{css:"text-green-900",icon:Ce,size:"22px"})}),e.jsx("br",{})," ",e.jsx("br",{}),e.jsx(O.Header,{message:`Caja ${t.name}`,messageButton:"Agregar movimiento",disabled:t.state===0,handleClick:()=>S(!0)}),e.jsx("div",{className:"mb-4",children:e.jsx(Oe,{names:[{name:"Productos",value:E.prod},{name:"Servicios",value:E.serv},{name:"Egresos",value:E.expen},{name:"Vouchers",value:E.vous},{name:"Voucher",value:E.vou}],optionSearch:c,setOptionSearch:h,anotherAction:!0,action:V=>{v(""),$(!0),f(1)}})}),e.jsx(O.Search,{render:c!==E.vou,setSearchByFilter:v,setMustLoad:$,setPage:f,placeholder:E.prod==c?"Buscar por nombre del producto":E.serv==c?"Buscar por nombre del servicio":E.expen==c?"Buscar por razón de egreso":"Buscar por código de voucher / Nombre o número de documento del cliente",hide:!y,data:[{tag:E.vous==c?"código / nombre o documento del cliente":E.vou==c?"código":E.expen==c?"razón":"nombre",input:y,handleClick:()=>v("")}]}),e.jsxs(P,{children:[e.jsx(P.HeaderTable,{names:j}),c===E.prod?e.jsx(P.BodyProductTable,{...W,setOptionSearch:h,setSearchByFilter:v,transitionName:m,setTransitionName:d,setImage:a,hide:p}):c===E.serv?e.jsx(P.BodyServiceTable,{...W,setOptionSearch:h,setSearchByFilter:v}):c===E.expen?e.jsx(P.BodyExpenseTable,{...W}):c===E.vous?e.jsx(is,{cashId:t.id,page:N,limit:w,searchByFilter:y,helper:k,setData:g,mustLoad:_,setOptionSearch:h,setSearchByFilter:v,setCashHelper:z,setHelper:F,setMustLoad:$}):c===E.vou?e.jsx(P.BodyVoucherTable,{id:U||t.id,searchByFilter:y,mustLoad:_,helper:k,handleDelete:G}):null]}),e.jsx(O.ExcelButton,{id:t.id}),c===E.vou?null:e.jsx(O.Pagination,{pageQuantity:o.current_page*o.per_page,quantity:o.total,setLimit:l,setPage:f,nextPage:o.next_page_url,prevPage:o.prev_page_url,page:o.current_page,lastPage:o.last_page}),t.state!==0&&e.jsxs(e.Fragment,{children:[e.jsx(O.SectionCashRegisterModal,{cashRegisterId:t.id,open:R,setOpen:S,setHelper:F,transitionName:m,setTransitionName:d,setImage:a,setHide:x}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:"bg-red-600 w-full lg:w-1/2 px-3 py-4 leading-[1.6] mt-5 rounded-xl hover:rotate-[1deg] transition ease-out text-white text-xl",onClick:H,children:"Cerrar caja"})})]})]}):null})}function Zt({message:t,messageButton:s,disabled:u,handleClick:r}){return e.jsxs("header",{className:"w-full flex flex-wrap justify-center md:justify-between md:px-7 text-gray-700",children:[e.jsxs("p",{className:"font-bold text-4xl text-center",children:[e.jsx(C,{icon:ue,css:"mr-3",size:"37px"}),t]}),e.jsx("button",{className:`bg-sky-700 hover:bg-sky-900 text-white font-bold py-2 px-4 rounded mr-4 mb-4 mt-4 sm:mt-0 shadow-xl ${u&&"opacity-0"}`,disabled:u,onClick:()=>{r(),document.getElementById("section_cash_register").scrollTo({top:0,behavior:"smooth"})},children:s})]})}function Oe({names:t,optionSearch:s,setOptionSearch:u,anotherAction:r=!1,action:m}){return e.jsx("div",{className:"w-full flex flex-wrap gap-1",children:t.map((d,a)=>e.jsx("button",{type:"button",className:`${s===d.value?"bg-sky-400":"bg-sky-900 hover:bg-sky-400"} py-2 rounded-lg flex-grow text-white font-semibold min-w-24`,onClick:()=>{u(d.value),r&&m(d)},children:d.name},a))})}function es({render:t,setSearchByFilter:s,setMustLoad:u,setPage:r,placeholder:m,hide:d,data:a}){const[p,x]=n.useState(""),{debounceValue:c}=re(p);return n.useEffect(()=>{u(!0),s(c),r(1)},[c]),e.jsxs(e.Fragment,{children:[t&&e.jsxs("div",{className:"relative min-w-[calc(80%)] bg-white rounded-full shadow-lg border",children:[e.jsx("input",{type:"text",placeholder:m,className:"w-full bg-transparent focus:outline-none ml-2 py-2 ps-3 pe-12 md:pe-16 font-semibold",value:p,onChange:h=>{x(h.target.value)}}),e.jsx(C,{css:"absolute inset-y-2.5 right-4 text-green-600",icon:Mt,size:"20px"})]}),e.jsxs("section",{className:`${d&&"hidden"} px-2 py-1 overflow-hidden flex flex-wrap cursor-pointer`,children:[e.jsx("span",{className:"font-medium me-4 text-black",children:"Filtro: "}),a.map((h,j)=>h.input?e.jsxs("div",{className:"bg-sky-400 rounded-lg py-1 px-2 me-2 hover:bg-vetgreen-100 cursor-pointer text-sm",onClick:()=>{h.handleClick(),x("")},children:[e.jsx(C,{css:"px-1 me-1",icon:Ce,size:"13px"}),e.jsxs("span",{children:[e.jsxs("strong",{children:[h.tag,": "]}),h.input]})]},j):null)]})]})}function ts({id:t}){const[s,u]=n.useState(2);return n.useEffect(()=>{const m=document.getElementById("cash_register").getAttribute("role");u(m)},[]),e.jsx(e.Fragment,{children:s==1?e.jsx("a",{href:`/cash_registers/get_excel_by_cash_register?id=${t}`,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-flex items-center mt-5 w-full sm:w-auto",children:e.jsxs("span",{className:"mx-auto",children:[e.jsx(C,{icon:qe,css:"mr-2",size:"25px"}),"Descargar Excel"]})}):null})}function P({children:t,css:s}){return e.jsx("main",{className:"mx-auto mt-2",children:e.jsx("div",{className:"flex flex-col overflow-hidden",children:e.jsx("div",{className:"py-2 -my-2 sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8",children:e.jsx("div",{className:`overflow-x-auto h-auto ${s||"rounded-lg"} border border-gray-400`,children:e.jsx("table",{className:`min-w-full rounded-lg ${s||"rounded-lg"}`,children:t})})})})})}function ss({names:t,css:s}){return e.jsx("thead",{className:`sticky top-0 ${s||""}`,children:e.jsx("tr",{children:t.map((u,r)=>e.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium leading-4 tracking-wider text-gray-500 uppercase border-b border-gray-200 bg-gray-50",children:u},r))})})}function as({id:t,setData:s,page:u,limit:r,helper:m,searchByFilter:d,mustLoad:a,handleDelete:p,setOptionSearch:x,setSearchByFilter:c,transitionName:h,setTransitionName:j,setImage:i,hide:o}){const g=`/cash_registers/get_products/${t}?page=${u}&limit=${r}&filter=name&inputFilter=${d}`,{data:N,loading:f}=L(g,[u,r,m,d]);return n.useEffect(()=>{f||s(N)},[N,f]),e.jsx(Le,{loading:f,mustLoad:a,message:"Cargando ingresos de productos",data:N,handleDelete:p,setOptionSearch:x,setSearchByFilter:c,transitionName:h,setTransitionName:j,setImage:i,hide:o})}function rs({id:t,setData:s,page:u,limit:r,helper:m,searchByFilter:d,mustLoad:a,handleDelete:p,setOptionSearch:x,setSearchByFilter:c}){const h=`/cash_registers/get_services/${t}?page=${u}&limit=${r}&filter=name&inputFilter=${d}`,{data:j,loading:i}=L(h,[u,r,m,d]);return n.useEffect(()=>{i||s(j)},[j,i]),e.jsx(Le,{loading:i,mustLoad:a,message:"Cargando ingresos de servicios",data:j,handleDelete:p,setOptionSearch:x,setSearchByFilter:c})}function Le({loading:t,mustLoad:s,message:u,data:r,handleDelete:m,setOptionSearch:d,setSearchByFilter:a,transitionName:p,setTransitionName:x,setImage:c,hide:h}){var j,i;return e.jsx("tbody",{className:"bg-white text-center",children:t&s?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(oe,{message:u})})}):((j=r.data)==null?void 0:j.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(C,{icon:pe,css:"mr-3"}),"No hay datos disponibles."]})})})}):(i=r.data)==null?void 0:i.map((o,g)=>{var N,f,w,l,y,v,_,$,R,S,k,F,U,z;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"mx-auto text-center",children:[e.jsx(C,{icon:ze,css:"text-green-600",size:"22px"}),e.jsx(C,{icon:ze,css:"text-green-600",size:"22px"}),e.jsx("div",{className:"text-sm leading-5 text-gray-500 font-semibold",children:"Ingreso"})]})})}),o.product_image_url&&e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 h-24",children:e.jsx("div",{className:"text-gray-900 w-20 mx-auto",children:e.jsx("img",{src:o.product_image_url,alt:o.name,className:`rounded-sm h-16 mx-auto cursor-pointer ${h>0?"opacity-0":""}`,onClick:()=>{document.startViewTransition?document.startViewTransition(()=>{xe.flushSync(()=>{x(`${o.name}-${o.id}`),c({url:o.product_image_url,label:o.name})})}):xe.flushSync(()=>{x(`${o.name}-${o.id}`),c({url:o.product_image_url,label:o.name})})},style:{viewTransitionName:!p&&`${o.name}-${o.id}`}})})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 max-w-40 overflow-hidden mx-auto",children:o.name})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",o.price]})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:Number.isInteger(parseFloat((N=o.pivot)==null?void 0:N.quantity))?parseFloat((f=o.pivot)==null?void 0:f.quantity).toFixed(0):(w=o.pivot)==null?void 0:w.quantity})}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",(l=o.pivot)==null?void 0:l.subtotal]})}),e.jsxs("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:[e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-40 overflow-hidden mx-auto",children:((y=o.customer)==null?void 0:y.name)??"--"}),e.jsxs("div",{className:"text-sm leading-5 text-gray-700 w-40 overflow-hidden mx-auto",children:[((_=(v=o.customer)==null?void 0:v.identity_document)==null?void 0:_.abbreviation)&&`${(R=($=o.customer)==null?void 0:$.identity_document)==null?void 0:R.abbreviation}:`," ",(S=o.customer)==null?void 0:S.document_number]})]}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative max-w-[200px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 max-w-48 overflow-hidden mx-auto",children:((k=o.pivot)==null?void 0:k.description)||"--"})}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700",children:se((F=o.pivot)==null?void 0:F.created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:Ee((U=o.pivot)==null?void 0:U.created_at)})]})}),e.jsx("td",{className:"py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("button",{className:"bg-red-500 hover:bg-red-700 text-sm leading-5 w-full text-white flex flex-col items-center p-1 rounded",onClick:()=>{var H;d(E.vou),a((H=o.pivot)==null?void 0:H.voucher_id)},children:[e.jsx(C,{icon:_e,css:"mx-auto",size:"24px"}),e.jsx("p",{css:"text-center",children:(z=o.pivot)==null?void 0:z.voucher_id})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var H;return m((H=o.pivot)==null?void 0:H.id)},children:e.jsx(C,{icon:te,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},g)})})}function ns({id:t,setData:s,page:u,limit:r,helper:m,searchByFilter:d,mustLoad:a,handleDelete:p}){var j,i;const x=`/cash_registers/get_expenses/${t}?page=${u}&limit=${r}&filter=name&inputFilter=${d}`,{data:c,loading:h}=L(x,[u,r,m,d]);return n.useEffect(()=>{h||s(c)},[c,h]),e.jsx("tbody",{className:"bg-white",children:h&a?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(oe,{message:"Cargando egresos"})})}):((j=c.data)==null?void 0:j.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(C,{icon:pe,css:"mr-3"}),"No hay datos disponibles."]})})})}):(i=c.data)==null?void 0:i.map((o,g)=>{var N,f,w;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"mx-auto text-center",children:[e.jsx(C,{icon:He,css:"text-red-600",size:"22px"}),e.jsx(C,{icon:He,css:"text-red-600",size:"22px"}),e.jsx("div",{className:"text-sm leading-5 text-gray-500 font-semibold",children:"Egreso"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center w-40",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",(N=o.pivot)==null?void 0:N.subtotal]})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative min-w-[400px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:o.reason})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700",children:se((f=o.pivot)==null?void 0:f.created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:Ee((w=o.pivot)==null?void 0:w.created_at)})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var l;return p((l=o.pivot)==null?void 0:l.id)},children:e.jsx(C,{icon:te,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},g)})})}function is({cashId:t,page:s,limit:u,searchByFilter:r,helper:m,setData:d,mustLoad:a,setOptionSearch:p,setSearchByFilter:x,setCashHelper:c,setHelper:h,setMustLoad:j}){var f,w;const i=`/cash_registers/get_all_vouchers?page=${s}&limit=${u}&inputFilter=${r}`,{data:o,loading:g}=L(i,[s,u,m,r]);n.useEffect(()=>{g||d(o)},[o,g]);const N=(l,y)=>{me(`¿Seguro(a) que quieres eliminar el voucher ${l}?`,()=>{const v=b(e.jsx(Y,{message:"Eliminando voucher"}),{autoClose:3e3,hideProgressBar:!0});ee("DELETE","/cash_registers/destroy_voucher",{voucher_id:l,cash_register_id:y}).then(_=>{if(j(!1),_.errors)return b.update(v,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:_.errors})}),type:b.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(_.message)return b.update(v,{render:e.jsx(e.Fragment,{children:_.message}),type:b.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});b.update(v,{render:`El voucher ${l} ha sido eliminado.`,type:b.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),h($=>$+1)}).catch(_=>{b.update(v,{render:"Hay problemas de conexión",type:b.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})})};return e.jsx("tbody",{className:"bg-white",children:g&a?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(oe,{message:"Cargando vouchers"})})}):((f=o.data)==null?void 0:f.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(C,{icon:pe,css:"mr-3"}),"No hay datos disponibles."]})})})}):(w=o.data)==null?void 0:w.map((l,y)=>e.jsxs("tr",{className:`${t===l.cash_id&&"bg-gray-300"} hover:bg-sky-200`,children:[e.jsx("td",{className:"py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative w-96",children:e.jsxs("button",{className:"bg-red-500 hover:bg-red-700 text-sm leading-5 w-40 md:w-3/4 mx-auto text-white flex flex-col items-center p-1 rounded",onClick:()=>{c(l.cash_id),p(E.vou),x(l.voucher_id)},children:[e.jsx(C,{icon:_e,css:"mx-auto",size:"24px"}),e.jsx("p",{css:"text-center",children:l.voucher_id})]})}),e.jsxs("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:[e.jsx("div",{className:"text-sm leading-5 text-gray-900 min-w-28 overflow-hidden mx-auto",children:l.customer??"--"}),e.jsxs("div",{className:"text-sm leading-5 text-gray-700 min-w-28 overflow-hidden mx-auto",children:[l.abbreviation&&`${l.abbreviation}:`," ",l.doc_customer]})]}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700 md:hidden",children:se(l.max_created_at)}),e.jsx("p",{className:"text-gray-700 text-base hidden md:block",children:Dt(l.max_created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:Ee(l.max_created_at)})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative w-36",children:e.jsx("div",{className:"text-center",onClick:()=>N(l.voucher_id,l.cash_id),children:e.jsx(C,{icon:te,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},y))})}function os({id:t,searchByFilter:s,mustLoad:u,helper:r,handleDelete:m}){var j,i,o;const d=`/cash_registers/get_voucher/${t}?inputFilter=${s}`,{data:a,loading:p}=L(d,[s,r]),[x,c]=n.useState("");n.useEffect(()=>{var g,N;c((N=(g=a.voucher)==null?void 0:g.reduce((f,w)=>{var l;return f+parseFloat((l=w.pivot)==null?void 0:l.subtotal)},0))==null?void 0:N.toFixed(2))},[a]);const h=()=>{const g=`/cash_registers/get_voucher_pdf/${t}?uuid=${s}`;window.open(g,"_blank")};return e.jsx("tbody",{className:"bg-white",children:p&u?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{children:e.jsx(oe,{message:"Cargando voucher"})})})}):e.jsxs(e.Fragment,{children:[(j=a.voucher)==null?void 0:j.map((g,N)=>{var f,w,l,y,v,_;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:g.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",g.price]})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center ",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:Number.isInteger(parseFloat((f=g.pivot)==null?void 0:f.quantity))?parseFloat((w=g.pivot)==null?void 0:w.quantity).toFixed(0):(l=g.pivot)==null?void 0:l.quantity})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",(y=g.pivot)==null?void 0:y.subtotal]})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 min-w-24",children:((v=g.pivot)==null?void 0:v.description)??"-"})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"min-w-28 text-center",children:e.jsx("p",{className:"text-gray-700",children:se((_=g.pivot)==null?void 0:_.created_at)})})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var $;return m(($=g.pivot)==null?void 0:$.id)},children:e.jsx(C,{icon:te,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},N)}),e.jsx("tr",{className:"hover:bg-sky-200",children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",colSpan:100,children:e.jsxs("div",{className:"text-lg font-bold leading-5 text-gray-900 text-center",children:["Cliente: ",((i=a.customer)==null?void 0:i.name)??"-",((o=a.customer)==null?void 0:o.identity_document)&&` - ${a.customer.identity_document.abbreviation}: ${a.customer.document_number}`]})})}),e.jsx("tr",{className:"hover:bg-sky-200",children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",colSpan:100,children:e.jsxs("div",{className:"text-lg font-bold leading-5 text-gray-600 text-center",children:["Total: S/. ",x]})})}),x>0&&e.jsx("tr",{className:"hover:bg-red-300",onClick:h,children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 cursor-pointer",colSpan:100,children:e.jsxs("div",{className:"text-center text-red-800 font-bold text-xl animate-bounce",children:["Presiona aquí para verlo en ",e.jsx(C,{icon:_e,css:"text-red-800 hover:scale-125 transition ease-out cursor-pointer",size:"35px"})]})})})]})})}function ls({pageQuantity:t,quantity:s,setLimit:u,setPage:r,nextPage:m,prevPage:d,page:a,lastPage:p}){return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"flex justify-between items-center mt-4 px-1 sm:px-5",children:[e.jsxs("div",{className:"hidden xl:block text-black rounded-lg",children:["Mostrando ",t>s?s:t," de ",s," resultados"]}),e.jsx("button",{className:"xl:hidden bg-white border px-4 py-2 text-gray-600 hover:text-indigo-500 hover:bg-gray-200 cursor-pointer rounded-lg",disabled:!d,onClick:()=>{d&&r(parseInt(le(d)))},children:"Anterior"}),e.jsxs("div",{className:"hidden xl:block text-vetbrown rounded-full bg-white border border-vetbrown p-2 mb-1",children:[e.jsx("span",{className:"",children:" Por página: "}),e.jsxs("select",{className:"px-2 py-1 bg-transparent rounded-lg cursor-pointer",defaultValue:"6",onChange:x=>{u(x.target.value),r(1)},children:[e.jsx("option",{value:"6",className:"bg-white",children:"6"}),e.jsx("option",{value:"12",className:"bg-white",children:"12"}),e.jsx("option",{value:"20",className:"bg-white",children:"20"})]})]}),e.jsx("div",{className:"xl:hidden text-gray-600 rounded-xl bg-white border border-gray-200 p-2",children:e.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded-lg cursor-pointer",defaultValue:"6",onChange:x=>{u(x.target.value),r(1)},children:[e.jsx("option",{value:"6",className:" bg-white",children:"6"}),e.jsx("option",{value:"12",className:" bg-white",children:"12"}),e.jsx("option",{value:"20",className:" bg-white",children:"20"})]})}),e.jsxs("nav",{className:"hidden xl:flex rounded-lg divide-vetbrown ease-out duration-300",children:[e.jsx("button",{className:`px-4 py-2 text-vetbrown bg-white border border-vetbrown rounded-l-full ${d&&"hover:text-indigo-500 hover:scale-[105%]"}`,disabled:!d,onClick:()=>{d&&r(parseInt(le(d)))},children:"Anterior"}),a!==1&&e.jsx("button",{className:"px-4 py-2 text-indigo-800 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{r(1)},children:1}),1-a<-2&&a!=1&&e.jsx("span",{className:"px-4 py-2 bg-white text-gray-500",children:"..."}),1-a<-1&&a!=1&&e.jsx("button",{className:"px-4 py-2 text-gray-600 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{r(x=>x-1)},children:parseInt(a)-1}),e.jsx("button",{className:"px-4 py-2 text-indigo-500 bg-vetwhite border border-vetbrown font-medium",children:a}),p-a>0&&e.jsx("button",{className:"px-4 py-2 text-gray-600 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{r(x=>x+1)},children:parseInt(a)+1}),p-a>2&&e.jsx("span",{className:"px-4 py-2 bg-white  text-gray-600",children:"..."}),p-a>2&&e.jsx("button",{className:"px-4 py-2 bg-white text-gray-600 hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{r(parseInt(p))},children:p}),e.jsx("button",{className:`px-4 py-2 text-vetbrown rounded-r-full bg-white border border-vetbrown ${m&&"hover:text-indigo-500 hover:scale-[105%]"}`,disabled:!m,onClick:()=>{m&&r(parseInt(le(m)))},children:"Siguiente"})]}),e.jsx("button",{className:"xl:hidden bg-white border px-4 py-2 text-gray-600 hover:text-indigo-500 hover:bg-gray-200 cursor-pointer rounded-lg",disabled:!m,onClick:()=>{m&&r(parseInt(le(m)))},children:"Siguiente"})]}),e.jsxs("div",{className:"block xl:hidden text-black rounded-lg text-center mt-5",children:["Mostrando ",t>s?s:t," de ",s," resultados"]})]})}function M({cashRegisterId:t,open:s,setOpen:u,setHelper:r,transitionName:m,setTransitionName:d,setImage:a,setHide:p}){const x={id:Se(),img:"",product_id:"",name:"",price:0,quantity:1,description:""},c={id:Se(),service_id:"",name:"",price:0,quantity:1,description:""},h={id:Se(),expense_id:"",reason:"",subtotal:0},[j,i]=n.useState(!1),[o,g]=n.useState(ce.inc),[N,f]=n.useState(1),[w,l]=n.useState(0),[y,v]=n.useState(""),[_,$]=n.useState(""),[R,S]=n.useState(1),[k,F]=n.useState(""),[U,z]=n.useState("name"),[H,G]=n.useState(""),[W,V]=n.useState(1),[q,D]=n.useState(!1),[Q,A]=n.useState(!1),{debounceValue:J}=re(H),{data:We,loading:Qe}=L(`/customers/list?filter=${U}&inputFilter=${J}`,[W],Q),[Je,Xe]=n.useState(x),[X,ge]=n.useState([]),[ke,Ke]=n.useState("name"),[$e,Fe]=n.useState(""),[Ze,et]=n.useState(1),[tt,st]=n.useState(!1),[at,rt]=n.useState(!1),{debounceValue:Te}=re($e),{data:nt,loading:it}=L(`/products/list?filter=${ke}&inputFilter=${Te}`,[Ze],at),[ot,lt]=n.useState(c),[K,be]=n.useState([]),[Be,Pe]=n.useState(""),[dt,ct]=n.useState(1),[ut,xt]=n.useState(!1),[mt,pt]=n.useState(!1),{debounceValue:Me}=re(Be),{data:ht,loading:gt}=L(`/services/list?filter=name&inputFilter=${Me}`,[dt],mt),[bt,yt]=n.useState(h),[ye,je]=n.useState([]),[Re,Ae]=n.useState(""),[jt,ft]=n.useState(1),[vt,Nt]=n.useState(!1),[wt,St]=n.useState(!1),{debounceValue:Ie}=re(Re),{data:Ct,loading:_t}=L(`/expenses/list?filter=reason&inputFilter=${Ie}`,[jt],wt);n.useEffect(()=>{var I;l(Array.isArray(X)&&Array.isArray(K)?(I=[...X,...K].reduce((ae,T)=>ae+parseFloat(T.price)*parseFloat(T.quantity),0))==null?void 0:I.toFixed(2):0)},[X,K]),n.useEffect(()=>{Ht("/cash_registers/get_voucher_id").then(I=>$(I))},[R]);const Et=()=>{i(!0);const I={cash_register_id:t,type_of_movement:N};k&&(I.customer_id=k),X.length>0&&(I.products=X.map(T=>({product_id:T.product_id,quantity:T.quantity,description:T.description}))),K.length>0&&(I.services=K.map(T=>({service_id:T.service_id,quantity:T.quantity,description:T.description}))),ye.length>0&&(I.expenses=ye.map(T=>({expense_id:T.expense_id,subtotal:T.subtotal})));const ae=b(e.jsx(Y,{message:"Agregando movimiento"}),{autoClose:3e3,hideProgressBar:!0});ee("POST","/cash_registers/store_movements",I).then(T=>{if(T.errors)return b.update(ae,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:T.errors})}),type:b.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});b.update(ae,{render:"Movimiento guardado.",type:b.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),F(""),G(""),ge([]),be([]),je([]),r(fe=>fe+1),u(!1),S(fe=>fe+1)}).catch(T=>{console.log(T),b.update(ae,{render:"Hay problemas de conexión",type:b.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>i(!1))};return e.jsxs(Kt,{option:"Vender",open:s,setOpen:u,handleClick:Et,icon:Tt,text:"Nuevo movimiento",loading:j,width:"max-w-5xl",children:[e.jsx("div",{className:"col-span-full",children:e.jsx(Oe,{names:[{name:"Ingresos",value:ce.inc,movement:1},{name:"Egresos",value:ce.exp,movement:2}],optionSearch:o,setOptionSearch:g,anotherAction:!0,action:I=>f(I.movement)})}),o===ce.inc?e.jsxs(e.Fragment,{children:[e.jsxs(M.ButtonContainer,{css:"border-2 border-gray-200 bg-gray-300",children:[e.jsx("span",{className:"text-base absolute -translate-y-2 -translate-x-12",children:"Comprobante"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500 mt-2",children:_||"V-00000001"})]}),e.jsx(M.ButtonContainer,{css:"bg-blue-500 hover:bg-blue-700 order-5 mt-10",children:e.jsx("button",{className:"w-full text-white",onClick:()=>{F(""),G(""),ge([]),be([]),Fe(""),Pe("")},children:e.jsx("code",{children:"LIMPIAR FORMULARIO"})})}),e.jsxs(M.ButtonContainer,{css:"border-2 order-4 bg-sky-800 text-white",children:["Total: S/. ",w]}),w>0&&e.jsxs(M.ButtonContainer,{css:"order-4",children:[e.jsx("h1",{className:"underline  underline-offset-2",children:"Calculadora de vuelto"}),e.jsxs("section",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"number",step:"any",min:0,max:99999,value:y,placeholder:"Cantidad de dinero ...",className:"border-2 w-full sm:w-1/2  p-1 rounded-lg bg-transparent text-center",onChange:I=>v(I.target.value)}),e.jsx("div",{className:"border-2 w-full sm:w-1/2 rounded-lg min-h-10 flex items-center justify-center",children:e.jsx("p",{children:y-w>0?`Su vuelto es de S/. ${(y-w).toFixed(2)}`:`Faltan S/. ${-(y-w).toFixed(2)}`})})]})]}),e.jsx("hr",{className:"col-span-full border"}),e.jsx(M.CustomerModal,{mustSearchCustomer:q,setMustSearchCustomer:D,filterCustomer:U,setFilterCustomer:z,inputCustomer:H,setInputCustomer:G,loadingCustomer:Qe,dataCustomer:We,setCustomerId:F,setHelperCustomer:V,debounceValueCustomer:J,setHelperSearchCustomer:A}),e.jsx("hr",{className:"col-span-full border"}),e.jsx(M.ProductModal,{mustSearchProduct:tt,setMustSearchProduct:st,filterProduct:ke,setFilterProduct:Ke,inputProduct:$e,setInputProduct:Fe,loadingProduct:it,dataProduct:nt,selectProduct:Je,setSelectProduct:Xe,setProducts:ge,initialStateProduct:x,products:X,setHelperProduct:et,debounceValueProduct:Te,setHelperSearchProduct:rt,transitionName:m,setTransitionName:d,setImage:a,setHide:p}),e.jsx("hr",{className:"col-span-full border sm:hidden"}),e.jsx(M.ServiceModal,{mustSearchService:ut,setMustSearchService:xt,inputService:Be,setInputService:Pe,loadingService:gt,dataService:ht,selectService:ot,setSelectService:lt,setServices:be,initialStateService:c,services:K,setHelperService:ct,debounceValueService:Me,setHelperSearchService:pt}),e.jsx("hr",{className:"col-span-full border"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M.ButtonContainer,{css:"bg-blue-500 hover:bg-blue-700 order-2 mt-10",children:e.jsx("button",{className:"w-full text-white",onClick:()=>{je([]),Ae("")},children:e.jsx("code",{children:"LIMPIAR FORMULARIO"})})}),e.jsx(M.ExpenseModal,{mustSearchExpense:vt,setMustSearchExpense:Nt,inputExpense:Re,setInputExpense:Ae,loadingExpense:_t,dataExpense:Ct,selectExpense:bt,setSelectExpense:yt,setExpenses:je,initialStateExpense:h,expenses:ye,setHelperExpense:ft,debounceValueExpense:Ie,setHelperSearchExpense:St})]})]})}function ds({children:t,css:s=""}){return e.jsx("div",{className:`relative w-full col-span-full rounded px-3 py-[0.32rem] leading-[1.6] text-gray-600  text-center font-semibold text-lg ${s}`,children:t})}function cs({mustSearchCustomer:t,setMustSearchCustomer:s,filterCustomer:u,setFilterCustomer:r,inputCustomer:m,setInputCustomer:d,loadingCustomer:a,dataCustomer:p,setCustomerId:x,setHelperCustomer:c,debounceValueCustomer:h,setHelperSearchCustomer:j}){var g,N;const[i,o]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(he,{mustSearch:t,setMustSearch:s,filters:[{tag:"Nombre del cliente",value:"name"},{tag:"Número de documento",value:"document_number"}],filter:u,setFilter:r,input:m,setInput:d,label:"Cliente",setHelper:c,debounceValue:h,setHelperSearch:j,css:"w-full col-span-full order-1 pe-10",listStyle:"w-full max-h-72",anotherAction:!0,actions:()=>{x("")},children:a?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(Y,{message:"Buscando los clientes ..."})}):((g=p.data)==null?void 0:g.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay clientes con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(N=p.data)==null?void 0:N.map((f,w)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{var l;s(!1),d(`${f.name} - ${((l=f.identity_document)==null?void 0:l.abbreviation)??""}: ${f.document_number??""}`),x(f.id)},children:`${f.name} - ${f.identity_document?`${f.identity_document.abbreviation}: ${f.document_number}`:""}`},w))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>o(!0),children:e.jsx(C,{icon:Bt})})]}),e.jsx("div",{className:"absolute",children:e.jsx(Vt,{customer:{...qt},option:"Crear",open:i,setOpen:o,actions:!1,mustBeToast:!1,focus:!1,onChangeComponent:f=>{d(`${f.name} -  ${f.document_number??""}`),x(f.id)}})})]})}function us({mustSearchProduct:t,setMustSearchProduct:s,filterProduct:u,setFilterProduct:r,inputProduct:m,setInputProduct:d,loadingProduct:a,dataProduct:p,selectProduct:x,setSelectProduct:c,setProducts:h,initialStateProduct:j,products:i,setHelperProduct:o,debounceValueProduct:g,setHelperSearchProduct:N,transitionName:f,setTransitionName:w,setImage:l,setHide:y}){var $,R;const[v,_]=n.useState(2);return n.useEffect(()=>{const k=document.getElementById("cash_register").getAttribute("role");_(k)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full col-span-1 grid grid-cols-1 self-start gap-6 sm:gap-x-6",children:[e.jsx(he,{mustSearch:t,setMustSearch:s,filters:[{tag:"Nombre del producto",value:"name"},{tag:"Serie",value:"serie"}],filter:u,setFilter:r,input:m,setInput:d,label:"Producto",setHelper:o,debounceValue:g,setHelperSearch:N,css:"w-full max-h-10 order-1",listStyle:"w-full sm:w-[200%] max-h-72",children:a?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(Y,{message:"Buscando los productos ..."})}):(($=p.data)==null?void 0:$.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay productos con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(R=p.data)==null?void 0:R.map((S,k)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 p-2 border-b rounded-lg",onClick:()=>{s(!1),d(S.name),c(F=>({...F,img:S.product_image_url,product_id:S.id,name:S.name,price:S.price}))},children:e.jsxs("article",{className:"flex flex-col sm:flex-row justify-center sm:justify-start items-center",children:[e.jsx("img",{src:S.product_image_url||"/image/juguete.webp",alt:S.name,width:"150px",className:"rounded-lg object-contain mb-6 sm:mb-0 sm:me-10"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Nombre:"})," ",`${S.name}`]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Precio:"})," ",`S/. ${S.price}`]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Stock:"})," ",`${S.stock}`," u."]}),S.serie&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Serie:"})," ",`${S.serie}`]}),v==1&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Estado:"})," ",`${S.isActive?"Activo":"Inactivo"}`]})]})]})},k))})}),x.name&&m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ye,{select:x,handleClick:S=>{c(k=>({...k,quantity:parseFloat(S.target.value)||""}))}}),e.jsx(Ue,{select:x,handleChange:S=>{c(k=>({...k,description:S.target.value}))},handleClick:()=>{h(S=>{if(!x.product_id)return[...S];const k=i.findIndex(F=>F.product_id===x.product_id);if(k!==-1){const F=[...i];return F[k].quantity+=parseFloat(x.quantity),F}return[...S,x]}),d(""),c(j)},message:"producto"})]})]}),i.length>0&&e.jsx("div",{className:"col-span-full order-2",children:e.jsxs(P,{children:[e.jsx(P.HeaderTable,{names:["Imagen","Producto","precio","cantidad","subtotal","descripción","Eliminar"]}),e.jsx(Ge,{data:i,setData:h,transitionName:f,setTransitionName:w,setImage:l,setHide:y})]})})]})}function xs({mustSearchService:t,setMustSearchService:s,inputService:u,setInputService:r,loadingService:m,dataService:d,selectService:a,setSelectService:p,setServices:x,initialStateService:c,services:h,setHelperService:j,debounceValueService:i,setHelperSearchService:o}){var f,w;const[g,N]=n.useState(2);return n.useEffect(()=>{const y=document.getElementById("cash_register").getAttribute("role");N(y)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full col-span-1 grid grid-cols-1 self-start gap-6 sm:gap-x-6",children:[e.jsx(he,{mustSearch:t,setMustSearch:s,filters:[{tag:"Nombre del servicio",value:"name"}],filter:"name",input:u,setInput:r,label:"Servicio",setHelper:j,debounceValue:i,setHelperSearch:o,css:"w-full max-h-10 order-1",listStyle:"w-full max-h-72",children:m?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(Y,{message:"Buscando los servicios ..."})}):((f=d.data)==null?void 0:f.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay servicios con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(w=d.data)==null?void 0:w.map((l,y)=>e.jsxs("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{s(!1),r(l.name),p(v=>({...v,service_id:l.id,name:l.name,price:l.price}))},children:[`${l.name} ->  S/. ${l.price}`,g==1&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Estado:"})," ",`${l.isActive?"Activo":"Inactivo"}`]})]},y))})}),a.name&&u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ye,{select:a,handleClick:l=>{p(y=>({...y,quantity:parseFloat(l.target.value)||""}))}}),e.jsx(Ue,{select:a,handleChange:l=>{p(y=>({...y,description:l.target.value}))},handleClick:()=>{x(l=>{if(!a.service_id)return[...l];const y=h.findIndex(v=>v.service_id===a.service_id);if(y!==-1){const v=[...h];return v[y].quantity+=parseFloat(a.quantity),v}return[...l,a]}),r(""),p(c)},message:"servicio"})]})]}),h.length>0&&e.jsx("div",{className:"col-span-full order-3",children:e.jsxs(P,{children:[e.jsx(P.HeaderTable,{names:["Servicio","precio","cantidad","subtotal","descripción","Eliminar"]}),e.jsx(Ge,{data:h,setData:x})]})})]})}function Ye({select:t,handleClick:s}){return e.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[e.jsx("input",{type:"number",step:"any",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:t.quantity,onChange:s,min:0,required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Cantidad"})]})}function Ue({select:t,handleChange:s,handleClick:u,message:r}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("textarea",{className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:t.description,onChange:s}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Descripción (opcional)"})]}),e.jsxs("button",{type:"button",className:"w-full col-span-full bg-blue-500 text-white font-semibold rounded-lg py-2 hover:bg-blue-700 order-1",onClick:u,children:["Agregar ",r]})]})}function Ge({data:t,setData:s,transitionName:u,setTransitionName:r,setImage:m,setHide:d}){return e.jsx("tbody",{className:"bg-white text-center",children:t.map((a,p)=>e.jsxs("tr",{className:"hover:bg-sky-200",children:[a.img&&e.jsx("td",{className:"whitespace-no-wrap border-b border-gray-200 h-20",children:e.jsx("div",{className:"text-gray-900 w-20",children:e.jsx("img",{src:a.img,alt:a.name,className:"rounded-sm h-16 mx-auto cursor-pointer",onClick:()=>{d(!0),document.startViewTransition?document.startViewTransition(()=>{xe.flushSync(()=>{r(`${a.name}-${a.id}`),m({url:a.img,label:a.name})})}):xe.flushSync(()=>{r(`${a.name}-${a.id}`),m({url:a.img,label:a.name})})},style:{viewTransitionName:!u&&`${a.name}-${a.id}`}})})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-40 overflow-hidden mx-auto",children:a.name})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/. ",a.price]})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:a.quantity})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/. ",(parseFloat(a.price)*parseFloat(a.quantity)).toFixed(2)]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative max-w-[200px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-48 overflow-hidden mx-auto",children:a.description})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{onClick:()=>{const x=t.filter(c=>c.id!==a.id);s(x)},children:e.jsx(C,{icon:te,css:"text-red-800 hover:scale-125 transition ease-out  cursor-pointer",size:"25px"})})})]},p))})}function ms({mustSearchExpense:t,setMustSearchExpense:s,inputExpense:u,setInputExpense:r,loadingExpense:m,dataExpense:d,selectExpense:a,setSelectExpense:p,setExpenses:x,initialStateExpense:c,expenses:h,setHelperExpense:j,debounceValueExpense:i,setHelperSearchExpense:o}){var f,w;const[g,N]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 gap-6",children:[e.jsx(he,{mustSearch:t,setMustSearch:s,filters:[{tag:"Razón",value:"reason"}],filter:"reason",input:u,setInput:r,label:"Egresos",setHelper:j,debounceValue:i,setHelperSearch:o,children:m?e.jsx("div",{className:"w-full sm:w-1/2 mx-auto py-4",children:e.jsx(Y,{message:"Buscando las razones de egreso ..."})}):((f=d.data)==null?void 0:f.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay servicios con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(w=d.data)==null?void 0:w.map((l,y)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{s(!1),r(l.reason),p(v=>({...v,expense_id:l.id,reason:l.reason}))},children:`${l.reason}`},y))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>N(!0),children:e.jsx(C,{icon:Pt})})]}),e.jsx("div",{className:"absolute",children:e.jsx(Ot,{expense:{...Lt},option:"Crear",open:g,setOpen:N,actions:!1,mustBeToast:!1,onChangeComponent:l=>{r(l.reason),p(y=>({...y,expense_id:l.id,reason:l.reason}))}})}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full",children:[e.jsx("input",{type:"number",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:a.subtotal,onChange:l=>{p(y=>({...y,subtotal:l.target.value}))},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Dinero"})]}),e.jsx("button",{type:"button",className:"w-full col-span-full bg-blue-500 text-white font-semibold rounded-lg py-2 hover:bg-blue-700",onClick:()=>{a&&(x(l=>{if(!a.expense_id)return[...l];const y=h.findIndex(v=>v.expense_id===a.expense_id);if(y!==-1){const v=[...h];return v[y].subtotal=parseFloat(a.subtotal),v}return[...l,a]}),r(""),p(c))},children:"Agregar razón"})]}),h.length>0&&e.jsx("div",{className:"col-span-full",children:e.jsxs(P,{children:[e.jsx(P.HeaderTable,{names:["subtotal","razón","eliminar"]}),e.jsx("tbody",{className:"bg-white text-center",children:h.map((l,y)=>e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/. ",l.subtotal]})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200 min-w-72",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:l.reason})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{onClick:()=>{const v=h.filter(_=>_.id!==l.id);x(v)},children:e.jsx(C,{icon:te,css:"text-red-800 hover:scale-125 transition ease-out cursor-pointer",size:"25px"})})})]},y))})]})})]})}O.Header=Zt;O.Search=es;O.ExcelButton=ts;O.Pagination=ls;O.SectionCashRegisterModal=M;M.ButtonContainer=ds;M.CustomerModal=cs;M.ProductModal=us;M.ServiceModal=xs;M.ExpenseModal=ms;P.HeaderTable=ss;P.BodyProductTable=as;P.BodyServiceTable=rs;P.BodyExpenseTable=ns;P.BodyVoucherTable=os;function ps(){var D,Q;const t={id:"",initial_amount:0},[s,u]=n.useState(1),[r,m]=n.useState(12),[d,a]=n.useState(""),[p,x]=n.useState(""),[c,h]=n.useState(0),j=`/cash_registers/list?page=${s}&limit=${r}&startDate=${d}&finishDate=${p}`,{data:i,loading:o}=L(j,[s,r,c]),[g,N]=n.useState("Abrir"),[f,w]=n.useState(!1),[l,y]=n.useState(t),[v,_]=n.useState(!0),[$,R]=n.useState(!0),[S,k]=n.useState({id:null,name:"",state:1}),[F,U]=n.useState({url:"",label:""}),[z,H]=n.useState(""),[G,W]=n.useState(!1),[V,q]=n.useState(2);return n.useEffect(()=>{const J=document.getElementById("cash_register").getAttribute("role");q(J)},[]),e.jsxs(e.Fragment,{children:[V==1?e.jsx(At,{icon:ue,message:"Gestión de cajas",name:"nueva caja",setOpen:w,setOption:N,setData:y,initialState:t}):e.jsx(It,{icon:ue,message:"Gestión de cajas"}),e.jsxs(Z,{children:[e.jsx(Z.SearchDate,{setHelper:h,startDate:d,setStartDate:a,finishDate:p,setFinishDate:x,setPage:u,handleReset:()=>{a(""),x(""),u(1),_(!0),h(A=>A+1)}}),e.jsx(hs,{rol:V}),e.jsx(Z.FilterBar,{hide:!d&&!p,data:[{tag:"Fecha de inicio",input:d.length>0?d:null,handleClick:()=>{a(""),u(1),h(A=>A+1)}},{tag:"Fecha de finalización",input:p.length>0?p:null,handleClick:()=>{x(""),u(1),h(A=>A+1)}}]}),e.jsx(Z.CardContainer,{children:o&v?e.jsx(oe,{message:"Cargando cajas"}):((D=i.data)==null?void 0:D.length)===0?e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(C,{icon:pe,css:"mr-3"}),"No hay datos disponibles."]})}):e.jsx(e.Fragment,{children:(Q=i==null?void 0:i.data)==null?void 0:Q.map((A,J)=>e.jsx(Z.CardContainer.Card,{mustAnimate:$,setMustAnimate:R,children:e.jsx(Ut,{cash_registerI:A,setCashRegister:y,setOption:N,setOpenModal:w,setHelper:h,setMustLoad:_,setMustAnimate:R,rol:V,handleClick:()=>{k({id:A.id,name:se(A.created_at),state:A.state})}})},`${A.id}-${J}`))})}),e.jsx(Z.Pagination,{pageQuantity:i.current_page*i.per_page,quantity:i.total,setMustLoad:_,setLimit:m,setPage:u,nextPage:i.next_page_url,prevPage:i.prev_page_url,page:i.current_page,lastPage:i.last_page,setMustAnimate:R})]}),z&&e.jsx(Yt,{image:F,transitionName:z,setTransitionName:H,setHide:W}),e.jsx(Wt,{cashRegister:l,option:g,open:f,setOpen:w,setMustLoad:_,setHelper:h}),e.jsx(zt,{}),e.jsx(O,{cashRegister:S,handleClose:()=>k({id:null,name:"",state:1}),setHelper:h,setMustLoad:_,transitionName:z,setTransitionName:H,setImage:U,hide:G,setHide:W})]})}function hs({rol:t}){const[s,u]=n.useState("");return e.jsx(e.Fragment,{children:t==1?e.jsxs("div",{className:"bg-vetwhite shadow-2xl p-5 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-lg text-gray-600",children:"Ingresos / Egresos del mes"}),e.jsx("input",{type:"month",className:"p-2 rounded-xl bg-gray-300 w-full mt-2",value:s,onChange:r=>{u(r.target.value)}}),e.jsx("a",{href:s.length>0?`/cash_registers/get_excel_by_month?month=${s.split("-")[1]}&year=${s.split("-")[0]}`:"#",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-flex mt-5 w-full",children:e.jsxs("span",{className:"mx-auto",children:[e.jsx(C,{icon:qe,css:"mr-2",size:"25px"}),"Descargar Excel"]})})]}):null})}const gs=Rt.createRoot(document.getElementById("cash_register"));gs.render(e.jsx(ps,{}));
