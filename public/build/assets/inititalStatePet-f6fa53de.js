import{j as e,r as o,i as pe,I as U,n as me,l as ge}from"./Footer-5b55d698.js";import{u as L,a as V,M as G,S as v,Q as c,f as ye,T as fe}from"./Spinner-fd53bf80.js";import{R as q}from"./ReactSelect-fc5a41ef.js";import{C as he,i as xe}from"./initialStateCustomer-6990e1eb.js";import{B as be,i as ve}from"./BreedModal-d1190aaa.js";function Q({message:t,filters:s,filter:h,setFilter:g}){return e.jsx(e.Fragment,{children:s?e.jsxs("div",{className:"relative bg-cyan-700 border-2 w-full col-span-full rounded-md shadow-lg order-1",children:[e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out -translate-y-[1.8rem] scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 text-primary",children:t}),e.jsx("div",{className:"overflow-y-auto w-full flex justify-between ",children:s.map((u,x)=>e.jsx("button",{type:"button",className:`${u.value===h?"bg-cyan-900":"hover:bg-cyan-900"} text-white cursor-pointer p-2 rounded-md flex-grow font-semibold `,onClick:()=>g(u.value),children:u.tag},x))})]}):null})}const r={id:"MODIFY_ID",name:"MODIFY_NAME",age:"MODIFY_AGE",customer_id:"MODIFY_CUSTOMER_ID",breed_id:"MODIFY_BREED_ID",sex:"MODIFY_SEX",ce:"MODIFY_CE",pet_image:"MODIFY_PET_IMAGE",observations:"MODIFY_OBSERVATIONS"};function je(t,s){switch(s.type){case r.id:return{...t,id:s.payload||""};case r.name:return{...t,name:s.payload||""};case r.age:return{...t,age:s.payload||""};case r.customer_id:return{...t,customer_id:s.payload||""};case r.breed_id:return{...t,breed_id:s.payload||""};case r.sex:return{...t,sex:s.payload||""};case r.ce:return{...t,ce:s.payload||""};case r.pet_image:return{...t,pet_image:s.payload||""};case r.observations:return{...t,observations:s.payload||""};default:return t}}function Ee({pet:t,option:s,open:h,setOpen:g,setMustLoad:u,setHelper:x,actions:W=!0,mustBeToast:X=!0,onChangeComponent:j}){var H,Y,k,A;const y={method:"POST",url:s!=="Actualizar"?"/pets/store":"/pets/update",sucessMessage:s==="Crear"?"Mascota agregada":"Mascota actualizada",loadingMessage:s!=="Actualizar"?"Agregando mascota":"Actualizando mascota"},[J,C]=o.useState(!1),[K,S]=o.useState(!1),[l,i]=o.useReducer(je,t),[Z,_]=o.useState(!1),[N,ee]=o.useState("name"),[w,p]=o.useState(""),[ae,E]=o.useState(1),[te,M]=o.useState(!1),[re,se]=o.useState(!1),{debounceValue:B}=L(w,400),{data:I,loading:O}=V(`/customers/list?filter=${N}&inputFilter=${B}`,[ae],re),[F,m]=o.useState(""),[oe,D]=o.useState(1),[le,T]=o.useState(!1),[ne,ie]=o.useState(!1),{debounceValue:P}=L(F,400),{data:R,loading:z}=V(`/breeds/list?filter=name&inputFilter=${P}`,[oe],ne),de=a=>{a.preventDefault(),_(!0);const n=c(e.jsx(v,{message:y.loadingMessage}),{autoClose:3e4,hideProgressBar:!0});ye(y.method,y.url,l,!0).then(d=>{if(d.errors)return c.update(n,{render:e.jsx(e.Fragment,{children:e.jsx(fe,{data:d.errors})}),type:c.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});c.update(n,{render:y.sucessMessage,type:c.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),W&&(u(!1),x(f=>f+1)),g(!1),typeof j=="function"&&j(d)}).catch(d=>{console.log(d),c.update(n,{render:"Hay problemas de conexión",type:c.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>_(!1))};return o.useEffect(()=>{!O&&te&&E(a=>a+1)},[B]),o.useEffect(()=>{!z&&le&&D(a=>a+1)},[P]),o.useEffect(()=>{var n,d,f,$;(n=t.customer)!=null&&n.name?p((d=t.customer)==null?void 0:d.name):p(""),(f=t.breed)!=null&&f.name?m(($=t.breed)==null?void 0:$.name):m("");const a=document.getElementById("pet_image");a.value="";for(const b in r){const ce=r[b],ue=t.hasOwnProperty(b)?t[b]:"";i({type:ce,payload:ue})}},[t]),e.jsxs(e.Fragment,{children:[e.jsxs(G,{option:s,open:h,setOpen:g,isLoading:Z,handleSubmit:de,icon:pe,text:"Mascota",children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:l.name,onChange:a=>{i({type:r.name,payload:a.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Nombre"})]}),e.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:l.age,onChange:a=>{i({type:r.age,payload:a.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Edad"})]}),e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(q,{setMustSearch:M,filters:[{tag:"Nombre del dueño",value:"name"},{tag:"Número de documento",value:"document_number"}],filter:N,setFilter:ee,input:w,setInput:p,label:"Dueño",setHelperSearch:se,setHelper:E,css:"w-full col-span-full order-1 pe-10",listStyle:"w-full max-h-72 z-20",children:O?e.jsx("div",{className:"w-full sm:w-1/2 mx-auto py-4",children:e.jsx(v,{message:"Buscando a los clientes ..."})}):((H=I.data)==null?void 0:H.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay clientes con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(Y=I.data)==null?void 0:Y.map((a,n)=>e.jsx("li",{className:`cursor-pointer hover:bg-slate-600 rounded p-2 ${l.customer_id===a.id&&"bg-slate-600"}`,onClick:()=>{i({type:r.customer_id,payload:a.id}),M(!1),p(a.name)},children:`${a.name} - ${a.identity_document?`${a.identity_document.abbreviation}: ${a.document_number}`:""}`},n))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>C(!0),children:e.jsx(U,{icon:me})})]}),e.jsx("div",{className:"absolute",children:e.jsx(he,{customer:{...xe},option:"Crear",open:J,setOpen:C,actions:!1,mustBeToast:!1,onChangeComponent:a=>{i({type:r.customer_id,payload:a.id}),p(a.name)}})}),e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 sm:grid-cols-2 gap-6 order-1",children:[e.jsx(q,{setMustSearch:T,filters:[{tag:"Nombre de la raza",value:"name"}],filter:"name",input:F,setInput:m,label:"Raza",setHelperSearch:ie,setHelper:D,listStyle:"w-full max-h-72",children:z?e.jsx("div",{className:"w-full sm:w-1/2 mx-auto py-4",children:e.jsx(v,{message:"Buscando a las razas ..."})}):((k=R.data)==null?void 0:k.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay razas con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(A=R.data)==null?void 0:A.map((a,n)=>e.jsx("li",{className:`cursor-pointer hover:bg-slate-600 rounded p-2 ${l.breed_id===a.id&&"bg-slate-600"}`,onClick:()=>{i({type:r.breed_id,payload:a.id}),T(!1),m(a.name)},children:a.name},n))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>S(!0),children:e.jsx(U,{icon:ge,size:"22px"})})]}),e.jsx("div",{className:"absolute",children:e.jsx(be,{breed:{...ve},option:"Crear",open:K,setOpen:S,actions:!1,mustBeToast:!1,onChangeComponent:a=>{i({type:r.breed_id,payload:a.id}),m(a.name)}})}),e.jsx(Q,{message:"Sexo",filters:[{tag:"Macho",value:"Macho"},{tag:"Hembra",value:"Hembra"}],filter:l.sex,setFilter:a=>i({type:r.sex,payload:a})}),e.jsx(Q,{message:"C/E",filters:[{tag:l.sex=="Hembra"?"Esterilizada":"Castrado",value:l.sex=="Hembra"?"Esterilizada":"Castrado"},{tag:"Entero",value:"Entero"}],filter:l.ce,setFilter:a=>i({type:r.ce,payload:a})}),e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("input",{type:"file",className:"hidden",id:"pet_image",accept:"image/*",onChange:a=>{const n=a.target.files&&a.target.files[0];i({type:r.pet_image,payload:n})}}),e.jsx("label",{htmlFor:"pet_image",className:"cursor-pointer block w-full py-2 text-center text-gray-600 bg-transparent rounded transition duration-200 ease-in-out hover:bg-gray-300",children:"--- Seleccionar foto (opcional) ---"})]}),l.pet_image&&e.jsx("img",{src:URL.createObjectURL(l.pet_image),alt:"mascota",className:"order-1 w-3/5 col-span-full mx-auto rounded-lg"}),e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("textarea",{className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",rows:"4",value:l.observations,onChange:a=>{i({type:r.observations,payload:a.target.value})}}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Observaciones (opcional)"})]})]}),X&&e.jsx(G.ToastifyModal,{})]})}const Me={id:"",name:"",age:"",customer_id:"",breed_id:"",sex:"Macho",ce:"Entero",pet_image:null,observations:"No hay observaciones."};export{Ee as P,Q as S,Me as i};
