import{r as t,j as e,h as z,d as q,H as U,i as J,I as K,e as X,F as Z}from"./Footer-5b55d698.js";import{F as I}from"./Filters-74b6bb7b.js";import{c as ee,d as ae,s as se,Q as c,S as te,f as ne,T as le,u as re,a as oe,b as p,L as ie}from"./Spinner-fd53bf80.js";import{P as ce,i as de}from"./inititalStatePet-2067317e.js";import{I as me}from"./ImageModal-6ba9a32e.js";import"./ReactSelect-fc5a41ef.js";import"./initialStateCustomer-6614d193.js";import"./BreedModal-a249fee4.js";function ue({petI:a,setPet:b,setOption:y,setOpenModal:r,setHelper:N,setMustLoad:P,setMustAnimate:g,setImage:S,transitionName:C,setTransitionName:h,setIsDeleted:o}){var m,f,x,w,l,E;const[j,d]=t.useState(!1),v=()=>{se("¿Quieres eliminar esta mascota?",()=>{o(!0),g(!1);const n=c(e.jsx(te,{message:`Eliminando a ${a.name}`}),{autoClose:3e3,hideProgressBar:!0});ne("DELETE","/pets/destroy",{id:a.id}).then(u=>{if(P(!1),u.errors)return o(!1),c.update(n,{render:e.jsx(e.Fragment,{children:e.jsx(le,{data:u.errors})}),type:c.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(u.message)return o(!1),c.update(n,{render:e.jsx(e.Fragment,{children:u.message}),type:c.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});c.update(n,{render:`Mascota ${a.name} ha sido eliminado.`,type:c.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),N($=>$+1)}).catch(u=>{o(!1),c.update(n,{render:"Hay problemas de conexión",type:c.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})},"Se eliminarán los datos asociados a esta mascota como el historial de las mismas.")};return e.jsxs(e.Fragment,{children:[e.jsx("img",{className:"w-full h-60 object-cover cursor-pointer",src:a.pet_image_url,alt:a.name,onClick:()=>{document.startViewTransition?document.startViewTransition(()=>{z.flushSync(()=>{h(`${a.name}-${a.id}`),S({url:a.pet_image_url,label:a.name})})}):z.flushSync(()=>{h(`${a.name}-${a.id}`),S({url:a.pet_image_url,label:a.name})})},style:{viewTransitionName:!C&&`${a.name}-${a.id}`}}),e.jsxs("div",{className:"px-8 pt-5 flex flex-col justify-between flex-1",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold",children:["Nombre: ",a.name]}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:["Edad: ",a.age]}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:["Raza: ",(m=a.breed)==null?void 0:m.name]}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:["Sexo: ",a.sex]}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:["C/E: ",a.ce]}),e.jsxs("p",{className:"mt-2 text-gray-700",children:["Dueño: ",(f=a.customer)==null?void 0:f.name," ",e.jsx("br",{})," ",(w=(x=a.customer)==null?void 0:x.identity_document)==null?void 0:w.abbreviation,": ",(l=a.customer)==null?void 0:l.document_number]}),e.jsxs("p",{className:"my-1 text-gray-700",children:["Fecha: ",ee(a.created_at)]}),((E=a.observations)==null?void 0:E.length)>50?e.jsxs("div",{children:[e.jsx("button",{className:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-lg",onClick:()=>d(!0),children:"Observaciones"}),e.jsxs("article",{className:`${j?"-translate-y-0":"translate-y-full"} z-10 ease-in duration-150 absolute flex top-0 left-0 w-full h-full bg-vetgreen-100 text-black font-medium rounded-lg`,children:[e.jsx("button",{className:"fixed bg-red-900 text-white font-semibold px-3 py-1 rounded-lg top-2 right-0 me-5 mt-1 animate-bounce",onClick:()=>d(!1),children:"Cerrar"}),e.jsx("p",{className:"overflow-auto p-3 pt-10",children:a.observations})]})]}):e.jsxs("p",{className:"text-gray-700 font-semibold",children:[" ",e.jsx("strong",{children:"Observaciones:"})," ",a.observations||"---"]})]}),e.jsxs("div",{className:"my-3 flex gap-2 pb-4",children:[e.jsx("button",{className:"bg-vetsky rounded-md py-1 px-4 font-semibold hover:bg-gray-400",onClick:()=>{y("Actualizar"),r(!0),b(a)},children:"Editar"}),e.jsx("button",{className:"bg-vetbrown rounded-md py-1 px-4 text-white font-semibold hover:bg-gray-500",onClick:v,children:"Eliminar"})]}),e.jsxs("p",{className:"text-gray-600 font-medium text-sm absolute bottom-1 right-6",children:["Agregado ",ae(a.created_at)]})]})]})}function xe(){var L,M,O;const a={...de},b=[{name:"Nombre",value:"name"},{name:"Nombre del dueño",value:"customer_id"},{name:"Número de documento del dueño",value:"document_number"},{name:"Raza",value:"breed_id"}],[y,r]=t.useState(1),[N,P]=t.useState(12),[g,S]=t.useState("name"),[C,h]=t.useState(""),[o,j]=t.useState(""),[d,v]=t.useState(""),[m,f]=t.useState(""),{debounceValue:x}=re(C,500),[w,l]=t.useState(0),E=`/pets/list?page=${y}&limit=${N}&filter=${g}&inputFilter=${x}&sex=${o}&startDate=${d}&finishDate=${m}`,{data:n,loading:u}=oe(E,[y,N,w]),[$,T]=t.useState("Crear"),[A,k]=t.useState(!1),[Y,R]=t.useState(a),[Q,F]=t.useState(!0),[V,_]=t.useState(!0),[G,W]=t.useState({url:"",label:""}),[D,B]=t.useState("");return t.useEffect(()=>{u||(F(!0),_(!0),r(1),l(s=>s+1))},[x]),e.jsxs(e.Fragment,{children:[e.jsx(U,{icon:J,message:"Gestión de mascotas",name:"mascota",setOpen:k,setOption:T,setData:R,initialState:a}),e.jsx(I,{children:e.jsx("div",{className:"w-full flex justify-between flex-wrap lg:flex-nowrap gap-y-1",children:b.map((s,i)=>e.jsx("button",{className:`${g===s.value?"bg-vetgreen-200 text-white":"bg-vetgreen-100 hover:bg-vetgreen-200 hover:text-white"} cursor-pointer py-2 md:mx-2 mx-1 rounded-xl lg:rounded-full flex-grow`,onClick:()=>{var H;S(s.value),h(""),(H=document.getElementById("input_search"))==null||H.focus()},children:s.name},i))})}),e.jsxs(p,{children:[e.jsxs(p.Search,{inputFilter:C,setInputFilter:h,handleReset:()=>{j(""),v(""),f(""),r(1),l(s=>s+1)},filter:g,filters:b,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm my-2",children:"Sexo de la mascota"}),e.jsxs("select",{className:"p-2 rounded-xl bg-gray-300 w-full",value:o,onChange:s=>{j(s.target.value),r(1),l(i=>i+1)},children:[e.jsx("option",{value:"",children:"Ambos"}),e.jsx("option",{value:"Macho",children:"Macho"}),e.jsx("option",{value:"Hembra",children:"Hembra"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm my-2",children:"Fecha de inicio"}),e.jsx("input",{type:"date",className:"p-2 rounded-xl bg-gray-300 w-full",value:d,onChange:s=>{v(s.target.value),r(1),l(i=>i+1)}})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm my-2",children:"Fecha de finalización"}),e.jsx("input",{type:"date",className:"p-2 rounded-xl bg-gray-300 w-full",value:m,onChange:s=>{f(s.target.value),r(1),l(i=>i+1)}})]})]}),e.jsx(p.FilterBar,{hide:!x&&!o&&!d&&!m,data:[{tag:(L=b.find(s=>s.value===g))==null?void 0:L.name,input:x,handleClick:()=>h("")},{tag:"Sexo de la mascota",input:o.length>0?o:null,handleClick:()=>{j(""),r(1),l(s=>s+1)}},{tag:"Fecha de inicio",input:d.length>0?d:null,handleClick:()=>{v(""),r(1),l(s=>s+1)}},{tag:"Fecha de finalización",input:m.length>0?m:null,handleClick:()=>{f(""),r(1),l(s=>s+1)}}]}),e.jsx(p.CardContainer,{children:u&Q?e.jsx(ie,{message:"Cargando mascotas"}):((M=n.data)==null?void 0:M.length)===0?e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(K,{icon:X,css:"mr-3"}),"No hay datos disponibles."]})}):e.jsx(e.Fragment,{children:(O=n==null?void 0:n.data)==null?void 0:O.map((s,i)=>e.jsx(p.CardContainer.Card,{mustAnimate:V,setMustAnimate:_,children:e.jsx(ue,{petI:s,setPet:R,setOption:T,setOpenModal:k,setHelper:l,setMustLoad:F,setMustAnimate:_,setImage:W,transitionName:D,setTransitionName:B})},`${s.id}-${i}`))})}),e.jsx(p.Pagination,{pageQuantity:n.current_page*n.per_page,quantity:n.total,setMustLoad:F,setLimit:P,setPage:r,nextPage:n.next_page_url,prevPage:n.prev_page_url,page:n.current_page,lastPage:n.last_page,setMustAnimate:_})]}),D&&e.jsx(me,{image:G,transitionName:D,setTransitionName:B}),e.jsx(ce,{pet:Y,option:$,open:A,setOpen:k,setMustLoad:F,setHelper:l}),e.jsx(Z,{})]})}const ge=q.createRoot(document.getElementById("pet"));ge.render(e.jsx(xe,{}));
