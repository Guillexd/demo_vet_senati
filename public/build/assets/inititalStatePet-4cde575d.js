import{j as e,r as o,i as ue,I as $,n as pe,l as me}from"./Footer-c5ea0129.js";import{u as U,a as L,M as V,S as v,Q as c,f as ge,T as ye}from"./Spinner-44841055.js";import{R as G}from"./ReactSelect-d6c9653c.js";import{C as fe,i as he}from"./initialStateCustomer-1cab4a9d.js";import{B as xe,i as be}from"./BreedModal-0ddb005e.js";function q({message:t,filters:r,filter:h,setFilter:p}){return e.jsx(e.Fragment,{children:r?e.jsxs("div",{className:"relative bg-cyan-700 border-2 w-full col-span-full rounded-md shadow-lg order-1",children:[e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out -translate-y-[1.8rem] scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-neutral-200 text-primary",children:t}),e.jsx("div",{className:"overflow-y-auto w-full flex justify-between ",children:r.map((u,x)=>e.jsx("button",{type:"button",className:`${u.value===h?"bg-cyan-900":"hover:bg-cyan-900"} text-white cursor-pointer p-2 rounded-md flex-grow font-semibold `,onClick:()=>p(u.value),children:u.tag},x))})]}):null})}const s={id:"MODIFY_ID",name:"MODIFY_NAME",age:"MODIFY_AGE",customer_id:"MODIFY_CUSTOMER_ID",breed_id:"MODIFY_BREED_ID",sex:"MODIFY_SEX",ce:"MODIFY_CE",pet_image:"MODIFY_PET_IMAGE",observations:"MODIFY_OBSERVATIONS"};function ve(t,r){switch(r.type){case s.id:return{...t,id:r.payload||""};case s.name:return{...t,name:r.payload||""};case s.age:return{...t,age:r.payload||""};case s.customer_id:return{...t,customer_id:r.payload||""};case s.breed_id:return{...t,breed_id:r.payload||""};case s.sex:return{...t,sex:r.payload||""};case s.ce:return{...t,ce:r.payload||""};case s.pet_image:return{...t,pet_image:r.payload||""};case s.observations:return{...t,observations:r.payload||""};default:return t}}function we({pet:t,option:r,open:h,setOpen:p,setMustLoad:u,setHelper:x,actions:Q=!0,mustBeToast:W=!0}){var z,H,Y,k;const m={method:"POST",url:r!=="Actualizar"?"/pets/store":"/pets/update",sucessMessage:r==="Crear"?"Mascota agregada":"Mascota actualizada",loadingMessage:r!=="Actualizar"?"Agregando mascota":"Actualizando mascota"},[X,j]=o.useState(!1),[J,S]=o.useState(!1),[l,i]=o.useReducer(ve,t),[K,C]=o.useState(!1),[_,Z]=o.useState("name"),[N,g]=o.useState(""),[ee,w]=o.useState(1),[ae,E]=o.useState(!1),[te,re]=o.useState(!1),{debounceValue:M}=U(N,400),{data:B,loading:I}=L(`/customers/list?filter=${_}&inputFilter=${M}`,[ee],te),[O,y]=o.useState(""),[se,F]=o.useState(1),[oe,D]=o.useState(!1),[le,ne]=o.useState(!1),{debounceValue:T}=U(O,400),{data:P,loading:R}=L(`/breeds/list?filter=name&inputFilter=${T}`,[se],le),ie=a=>{a.preventDefault(),C(!0);const n=c(e.jsx(v,{message:m.loadingMessage}),{autoClose:3e4,hideProgressBar:!0});ge(m.method,m.url,l,!0).then(d=>{if(d.errors)return c.update(n,{render:e.jsx(e.Fragment,{children:e.jsx(ye,{data:d.errors})}),type:c.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});c.update(n,{render:m.sucessMessage,type:c.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),Q&&(u(!1),x(f=>f+1)),p(!1)}).catch(d=>{console.log(d),c.update(n,{render:"Hay problemas de conexión",type:c.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>C(!1))};return o.useEffect(()=>{!I&&ae&&w(a=>a+1)},[M]),o.useEffect(()=>{!R&&oe&&F(a=>a+1)},[T]),o.useEffect(()=>{var n,d,f,A;(n=t.customer)!=null&&n.name?g((d=t.customer)==null?void 0:d.name):g(""),(f=t.breed)!=null&&f.name?y((A=t.breed)==null?void 0:A.name):y("");const a=document.getElementById("pet_image");a.value="";for(const b in s){const de=s[b],ce=t.hasOwnProperty(b)?t[b]:"";i({type:de,payload:ce})}},[t]),e.jsxs(e.Fragment,{children:[e.jsxs(V,{option:r,open:h,setOpen:p,isLoading:K,handleSubmit:ie,icon:ue,text:"Mascota",children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:l.name,onChange:a=>{i({type:s.name,payload:a.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Nombre"})]}),e.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[e.jsx("input",{type:"text",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:l.age,onChange:a=>{i({type:s.age,payload:a.target.value})},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Edad"})]}),e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(G,{setMustSearch:E,filters:[{tag:"Nombre del dueño",value:"name"},{tag:"Número de documento",value:"document_number"}],filter:_,setFilter:Z,input:N,setInput:g,label:"Dueño",setHelperSearch:re,setHelper:w,css:"w-full col-span-full order-1 pe-10",listStyle:"w-full max-h-72 z-20",children:I?e.jsx("div",{className:"w-full sm:w-1/2 mx-auto py-4",children:e.jsx(v,{message:"Buscando a los clientes ..."})}):((z=B.data)==null?void 0:z.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay clientes con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(H=B.data)==null?void 0:H.map((a,n)=>e.jsx("li",{className:`cursor-pointer hover:bg-slate-600 rounded p-2 ${l.customer_id===a.id&&"bg-slate-600"}`,onClick:()=>{i({type:s.customer_id,payload:a.id}),E(!1),g(a.name)},children:`${a.name} - ${a.identity_document?`${a.identity_document.abbreviation}: ${a.document_number}`:""}`},n))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>j(!0),children:e.jsx($,{icon:pe})})]}),e.jsx("div",{className:"absolute",children:e.jsx(fe,{customer:{...he},option:"Crear",open:X,setOpen:j,actions:!1,mustBeToast:!1})}),e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 sm:grid-cols-2 gap-6 order-1",children:[e.jsx(G,{setMustSearch:D,filters:[{tag:"Nombre de la raza",value:"name"}],filter:"name",input:O,setInput:y,label:"Raza",setHelperSearch:ne,setHelper:F,listStyle:"w-full max-h-72",children:R?e.jsx("div",{className:"w-full sm:w-1/2 mx-auto py-4",children:e.jsx(v,{message:"Buscando a las razas ..."})}):((Y=P.data)==null?void 0:Y.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay razas con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(k=P.data)==null?void 0:k.map((a,n)=>e.jsx("li",{className:`cursor-pointer hover:bg-slate-600 rounded p-2 ${l.breed_id===a.id&&"bg-slate-600"}`,onClick:()=>{i({type:s.breed_id,payload:a.id}),D(!1),y(a.name)},children:a.name},n))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>S(!0),children:e.jsx($,{icon:me,size:"22px"})})]}),e.jsx("div",{className:"absolute",children:e.jsx(xe,{breed:{...be},option:"Crear",open:J,setOpen:S,actions:!1,mustBeToast:!1})}),e.jsx(q,{message:"Sexo",filters:[{tag:"Macho",value:"Macho"},{tag:"Hembra",value:"Hembra"}],filter:l.sex,setFilter:a=>i({type:s.sex,payload:a})}),e.jsx(q,{message:"C/E",filters:[{tag:l.sex=="Hembra"?"Esterilizada":"Castrado",value:l.sex=="Hembra"?"Esterilizada":"Castrado"},{tag:"Entero",value:"Entero"}],filter:l.ce,setFilter:a=>i({type:s.ce,payload:a})}),e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("input",{type:"file",className:"hidden",id:"pet_image",accept:"image/*",onChange:a=>{const n=a.target.files&&a.target.files[0];i({type:s.pet_image,payload:n})}}),e.jsx("label",{htmlFor:"pet_image",className:"cursor-pointer block w-full py-2 text-center text-gray-600 bg-transparent rounded transition duration-200 ease-in-out hover:bg-gray-300",children:"--- Seleccionar foto (opcional) ---"})]}),l.pet_image&&e.jsx("img",{src:URL.createObjectURL(l.pet_image),alt:"mascota",className:"order-1 w-3/5 col-span-full mx-auto rounded-lg"}),e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("textarea",{className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",rows:"4",value:l.observations,onChange:a=>{i({type:s.observations,payload:a.target.value})}}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Observaciones (opcional)"})]})]}),W&&e.jsx(V.ToastifyModal,{})]})}const Ee={id:"",name:"",age:"",customer_id:"",breed_id:"",sex:"Macho",ce:"Entero",pet_image:null,observations:"No hay observaciones."};export{we as P,q as S,Ee as i};
