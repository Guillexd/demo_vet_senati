import{j as e,I as w,t as kt,u as $t,v as Ft,r,w as ue,x as Ce,y as Tt,n as Bt,h as xe,z as te,A as Pt,e as pe,B as Ye,C as _e,E as Ue,a as Mt,G as Qe,d as Rt,H as At,D as It,F as zt}from"./Footer-5b55d698.js";import{c as se,s as me,Q as j,S as Y,f as ee,T as ie,M as Ge,u as re,a as L,i as Ht,L as oe,d as Ee,h as Dt,l as le,b as Z}from"./Spinner-fd53bf80.js";import{R as he}from"./ReactSelect-fc5a41ef.js";import{C as Vt,i as qt}from"./initialStateCustomer-6990e1eb.js";import{E as Ot,i as Lt}from"./initialStateExpense-1a81d72d.js";import{I as Yt}from"./ImageModal-6ba9a32e.js";function Ut({cash_registerI:t,setCashRegister:s,setOption:c,setOpenModal:n,setHelper:u,setMustLoad:l,setMustAnimate:a,rol:x,handleClick:h,setIsDeleted:d}){const g=()=>{me("¿Quieres eliminar esta caja?",()=>{d(!0),a(!1);const f=j(e.jsx(Y,{message:`Eliminando la caja ${t.id}`}),{autoClose:3e3,hideProgressBar:!0});ee("DELETE","/cash_registers/destroy",{id:t.id}).then(o=>{if(l(!1),o.errors)return d(!1),j.update(f,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:o.errors})}),type:j.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(o.message)return d(!1),j.update(f,{render:e.jsx(e.Fragment,{children:o.message}),type:j.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});j.update(f,{render:`Caja ${t.id} ha sido eliminado.`,type:j.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),u(i=>i+1)}).catch(o=>{d(!1),j.update(f,{render:"Hay problemas de conexión",type:j.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})},"Se eliminarán los datos asociados a esta caja como los ingresos y egresos registrados del mismo.")};return e.jsxs("div",{className:"px-8 pt-5 flex flex-col justify-between flex-1 cursor-pointer",onClick:h,children:[e.jsx("div",{className:"absolute top-1 left-2 rounded-full bg-indigo-500 w-8 h-8 flex justify-center items-center font-bold font-mono text-xl text-white",children:t.id}),e.jsx("div",{className:"absolute top-8 right-2 animate-bounce rounded-full bg-indigo-500 w-10 h-10 flex justify-center items-center font-bold font-mono text-xl text-white",children:e.jsx(w,{icon:kt,size:"30px"})}),e.jsx("img",{src:"/image/caja.png",alt:"caja"}),e.jsxs("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold",children:["Caja ",se(t.created_at)]}),e.jsxs("div",{className:"uppercase tracking-wide text-sm text-indigo-700 font-bold",children:["Monto inicial: S/. ",t.initial_amount]}),t.total&&e.jsxs("div",{className:"uppercase tracking-wide text-sm font-bold",children:["Total: S/. ",t.total]}),e.jsx("div",{className:`${t.state===0?"bg-red-400 text-amber-200 ":"bg-green-400 text-black "} uppercase tracking-wide text-sm font-semibold rounded-lg w-fullpx-4 py-1 flex justify-center mb-3`,children:t.state!==0?e.jsxs(e.Fragment,{children:[e.jsx(w,{css:"me-2",icon:$t}),"Abierto"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{css:"me-2",icon:Ft}),"Cerrado"]})}),x==1&&e.jsxs("div",{className:"mb-3 flex gap-2 mx-auto",onClick:f=>f.stopPropagation(),children:[t.state===0?e.jsx("button",{type:"button",className:"bg-green-300 rounded-md py-1 px-4 font-semibold hover:bg-green-400",onClick:()=>{c("Actualizar"),n(!1),s(t),setTimeout(()=>{document.getElementById("btn_to_submit").click()},200)},children:"Abrir caja"}):e.jsx("button",{className:"bg-vetsky rounded-md py-1 px-4 font-semibold hover:bg-gray-400",onClick:()=>{c("Actualizar"),n(!0),s(t)},children:"Editar"}),e.jsx("button",{className:"bg-vetbrown rounded-md py-1 px-4 text-white font-semibold hover:bg-gray-500",onClick:g,children:"Eliminar"})]})]})}const ne={id:"MODIFY_ID",initial_amount:"MODIFY_INITIAL_AMOUNT"};function Gt(t,s){switch(s.type){case ne.id:return{...t,id:s.payload};case ne.initial_amount:return{...t,initial_amount:s.payload};default:return t}}function Wt({cashRegister:t,option:s,open:c,setOpen:n,setMustLoad:u,setHelper:l}){const a={method:s==="Crear"?"POST":"PUT",url:s!=="Actualizar"?"/cash_registers/store":"/cash_registers/update",sucessMessage:s==="Crear"?"Caja agregada":"Caja actualizada",loadingMessage:s!=="Actualizar"?"Agregando caja":"Actualizando caja"},[x,h]=r.useReducer(Gt,t),[d,g]=r.useState(!1),f=o=>{o.preventDefault(),g(!0);const i=j(e.jsx(Y,{message:a.loadingMessage}),{autoClose:1e4,hideProgressBar:!0});ee(a.method,a.url,x).then(p=>{if(p.errors)return j.update(i,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:p.errors})}),type:j.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(p.message)return j.update(i,{render:e.jsx(e.Fragment,{children:p.message}),type:j.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});j.update(i,{render:a.sucessMessage,type:j.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),u(!1),l(N=>N+1),n(!1)}).catch(p=>{console.log(p),j.update(i,{render:"Hay problemas de conexión",type:j.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>g(!1))};return r.useEffect(()=>{for(const o in ne){const i=ne[o],p=t.hasOwnProperty(o)?t[o]:"";h({type:i,payload:p})}},[t]),e.jsxs(e.Fragment,{children:[e.jsx(Ge,{option:s,open:c,setOpen:n,isLoading:d,handleSubmit:f,icon:ue,text:"Caja",children:e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("input",{type:"number",step:"any",min:0,className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:x.initial_amount,onChange:o=>{h({type:ne.initial_amount,payload:o.target.value})},required:!0,autoFocus:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Monto inicial"})]})}),e.jsx(Ge.ToastifyModal,{})]})}let de;const Qt=new Uint8Array(16);function Xt(){if(!de&&(de=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!de))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return de(Qt)}const T=[];for(let t=0;t<256;++t)T.push((t+256).toString(16).slice(1));function Jt(t,s=0){return T[t[s+0]]+T[t[s+1]]+T[t[s+2]]+T[t[s+3]]+"-"+T[t[s+4]]+T[t[s+5]]+"-"+T[t[s+6]]+T[t[s+7]]+"-"+T[t[s+8]]+T[t[s+9]]+"-"+T[t[s+10]]+T[t[s+11]]+T[t[s+12]]+T[t[s+13]]+T[t[s+14]]+T[t[s+15]]}let We,ve,Ne=0,we=0;function Se(t,s,c){let n=s&&c||0;const u=s||new Array(16);t=t||{};let l=t.node||We,a=t.clockseq!==void 0?t.clockseq:ve;if(l==null||a==null){const o=t.random||(t.rng||Xt)();l==null&&(l=We=[o[0]|1,o[1],o[2],o[3],o[4],o[5]]),a==null&&(a=ve=(o[6]<<8|o[7])&16383)}let x=t.msecs!==void 0?t.msecs:Date.now(),h=t.nsecs!==void 0?t.nsecs:we+1;const d=x-Ne+(h-we)/1e4;if(d<0&&t.clockseq===void 0&&(a=a+1&16383),(d<0||x>Ne)&&t.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ne=x,we=h,ve=a,x+=122192928e5;const g=((x&268435455)*1e4+h)%4294967296;u[n++]=g>>>24&255,u[n++]=g>>>16&255,u[n++]=g>>>8&255,u[n++]=g&255;const f=x/4294967296*1e4&268435455;u[n++]=f>>>8&255,u[n++]=f&255,u[n++]=f>>>24&15|16,u[n++]=f>>>16&255,u[n++]=a>>>8|128,u[n++]=a&255;for(let o=0;o<6;++o)u[n+o]=l[o];return s||Jt(u)}function Kt({children:t,option:s,open:c,setOpen:n,handleClick:u,icon:l,text:a,loading:x,width:h}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${c?"scale-100":"scale-0"} fixed inset-0 bg-black opacity-60 z-10 transition-all duration-300 ease-out`}),e.jsx("div",{className:`fixed top-0 left-0 w-full h-full flex items-center justify-center transition-all duration-500 ease-out transform ${c?"":"translate-y-[-200%]"}`,style:{zIndex:"40"},children:e.jsx("div",{className:`w-full ${h||"max-w-2xl"} max-h-full mx-3 overflow-y-auto`,children:e.jsxs("div",{className:"relative rounded-lg shadow bg-white z-40",children:[e.jsxs("div",{className:"flex items-start p-4 border-b rounded-t border-gray-600",children:[e.jsx(w,{icon:l,css:"text-gray-700  mx-3",size:"30px"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 ",children:a}),e.jsx("button",{type:"button",className:"bg-gray-300 right-0 top-0 absolute p-3 rounded-xl m-2 opacity-80 hover:opacity-45",onClick:()=>n(!1),children:e.jsx(w,{css:"text-green-800",icon:Ce,size:"22px"})})]}),e.jsx("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 gap-6",children:t}),e.jsxs("div",{className:"flex justify-end p-6 space-x-2 border-t rounded-b border-gray-600",children:[e.jsx("button",{type:"button",className:"text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:bg-red-600 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",onClick:u,disabled:x,children:s}),e.jsx("button",{type:"button",className:"focus:ring-4 focus:outline-none rounded-lg border text-sm font-medium px-5 py-2.5 focus:z-10 bg-gray-500 text-white border-gray-500 hover:bg-gray-600 focus:ring-gray-600",onClick:()=>n(!1),children:"Cerrar"})]})]})})})]})}const _={prod:"product",serv:"service",expen:"expense",vous:"vouchers",vou:"voucher"},ce={inc:"income",exp:"expense"};function O({cashRegister:t,handleClose:s,setHelper:c,setMustLoad:n,transitionName:u,setTransitionName:l,setImage:a,hide:x,setHide:h}){const[d,g]=r.useState(_.vous),[f,o]=r.useState([]),[i,p]=r.useState([]),[N,m]=r.useState(1),[y,b]=r.useState(6),[S,E]=r.useState(""),[C,v]=r.useState(!0),[k,P]=r.useState(!1),[z,H]=r.useState(0),[U,A]=r.useState(null);r.useEffect(()=>{d===_.prod?(A(null),o(["Transacción","Imagen","Producto","Precio","cantidad","subtotal","Cliente","descripción","fecha","voucher","eliminar"])):d===_.serv?(A(null),o(["Transacción","Servicio","Precio","cantidad","subtotal","Cliente","descripción","fecha","voucher","eliminar"])):d===_.expen?(A(null),o(["Transacción","subtotal","Razón","fecha","eliminar"])):d===_.vous?o(["Código","Cliente","fecha","eliminar"]):d===_.vou&&o(["Producto / Servicio","Precio","cantidad","subtotal","descripción","fecha","eliminar"])},[d]);const I=()=>{me("¿Quieres cerrar esta caja?",()=>{const D=j(e.jsx(Y,{message:"Cerrando caja"}),{autoClose:3e3,hideProgressBar:!0});ee("PUT","/cash_registers/update_state",{id:t.id}).then(q=>{j.update(D,{render:"La caja ha sido cerrada.",type:j.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),s(),n(!1),c(V=>V+1)}).catch(q=>{console.log(q),j.update(D,{render:"Hay problemas de conexión",type:j.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})},"¡Solo un administrador podrá volver a abrirla!","¡ciérralo!")},G=D=>{me("¿Quieres eliminar este movimiento?",()=>{const q=j(e.jsx(Y,{message:"Eliminando movimiento"}),{autoClose:3e3,hideProgressBar:!0});ee("DELETE","/cash_registers/destroy_movement",{id:D,cash_register_id:t.id}).then(V=>{if(v(!1),V.errors)return j.update(q,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:V.errors})}),type:j.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(V.message)return j.update(q,{render:e.jsx(e.Fragment,{children:V.message}),type:j.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});j.update(q,{render:"El movimiento ha sido eliminado.",type:j.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),H(Q=>Q+1)}).catch(V=>{j.update(q,{render:"Hay problemas de conexión",type:j.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})})},W={id:t.id,setData:p,page:N,limit:y,helper:z,searchByFilter:S,mustLoad:C,handleDelete:G};return e.jsx("section",{id:"section_cash_register",className:`${t.id!==null?"translate-y-0":"translate-y-[200%]"} transition-all duration-500 ease-in fixed bg-slate-50 z-30 bottom-0 left-0 px-3 md:px-5 ${k?"overflow-hidden":"overflow-y-auto"} rounded-t-2xl w-screen h-[99vh] mt-2 pb-10`,children:t.id!==null?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-gray-400 sticky top-3 float-right p-3 rounded-xl m-2 opacity-80 hover:opacity-45 z-40 animate-bounce",onClick:s,children:e.jsx(w,{css:"text-green-900",icon:Ce,size:"22px"})}),e.jsx("br",{})," ",e.jsx("br",{}),e.jsx(O.Header,{message:`Caja ${t.name}`,messageButton:"Agregar movimiento",disabled:t.state===0,handleClick:()=>P(!0)}),e.jsx("div",{className:"mb-4",children:e.jsx(Xe,{names:[{name:"Productos",value:_.prod},{name:"Servicios",value:_.serv},{name:"Egresos",value:_.expen},{name:"Vouchers",value:_.vous},{name:"Voucher",value:_.vou}],optionSearch:d,setOptionSearch:g,anotherAction:!0,action:D=>{E(""),v(!0),m(1)}})}),e.jsx(O.Search,{render:d!==_.vou,setSearchByFilter:E,setMustLoad:v,setPage:m,placeholder:_.prod==d?"Buscar por nombre del producto":_.serv==d?"Buscar por nombre del servicio":_.expen==d?"Buscar por razón de egreso":"Buscar por código de voucher / Nombre o número de documento del cliente",hide:!S,data:[{tag:_.vous==d?"código / nombre o documento del cliente":_.vou==d?"código":_.expen==d?"razón":"nombre",input:S,handleClick:()=>E("")}]}),e.jsxs(B,{children:[e.jsx(B.HeaderTable,{names:f}),d===_.prod?e.jsx(B.BodyProductTable,{...W,setOptionSearch:g,setSearchByFilter:E,transitionName:u,setTransitionName:l,setImage:a,hide:x}):d===_.serv?e.jsx(B.BodyServiceTable,{...W,setOptionSearch:g,setSearchByFilter:E}):d===_.expen?e.jsx(B.BodyExpenseTable,{...W}):d===_.vous?e.jsx(is,{cashId:t.id,page:N,limit:y,searchByFilter:S,helper:z,setData:p,mustLoad:C,setOptionSearch:g,setSearchByFilter:E,setCashHelper:A,setHelper:H,setMustLoad:v}):d===_.vou?e.jsx(B.BodyVoucherTable,{id:U||t.id,searchByFilter:S,mustLoad:C,helper:z,handleDelete:G}):null]}),e.jsx(O.ExcelButton,{id:t.id}),d===_.vou?null:e.jsx(O.Pagination,{pageQuantity:i.current_page*i.per_page,quantity:i.total,setLimit:b,setPage:m,nextPage:i.next_page_url,prevPage:i.prev_page_url,page:i.current_page,lastPage:i.last_page}),t.state!==0&&e.jsxs(e.Fragment,{children:[e.jsx(O.SectionCashRegisterModal,{cashRegisterId:t.id,open:k,setOpen:P,setHelper:H,transitionName:u,setTransitionName:l,setImage:a,setHide:h}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:"bg-red-600 w-full lg:w-1/2 px-3 py-4 leading-[1.6] mt-5 rounded-xl hover:rotate-[1deg] transition ease-out text-white text-xl",onClick:I,children:"Cerrar caja"})})]})]}):null})}function Zt({message:t,messageButton:s,disabled:c,handleClick:n}){return e.jsxs("header",{className:"w-full flex flex-wrap justify-center md:justify-between md:px-7 text-gray-700",children:[e.jsxs("p",{className:"font-bold text-4xl text-center",children:[e.jsx(w,{icon:ue,css:"mr-3",size:"37px"}),t]}),e.jsx("button",{className:`bg-sky-700 hover:bg-sky-900 text-white font-bold py-2 px-4 rounded mr-4 mb-4 mt-4 sm:mt-0 shadow-xl ${c&&"opacity-0"}`,disabled:c,onClick:()=>{n(),document.getElementById("section_cash_register").scrollTo({top:0,behavior:"smooth"})},children:s})]})}function Xe({names:t,optionSearch:s,setOptionSearch:c,anotherAction:n=!1,action:u}){return e.jsx("div",{className:"w-full flex flex-wrap gap-1",children:t.map((l,a)=>e.jsx("button",{type:"button",className:`${s===l.value?"bg-sky-400":"bg-sky-900 hover:bg-sky-400"} py-2 rounded-lg flex-grow text-white font-semibold min-w-24`,onClick:()=>{c(l.value),n&&u(l)},children:l.name},a))})}function es({render:t,setSearchByFilter:s,setMustLoad:c,setPage:n,placeholder:u,hide:l,data:a}){const[x,h]=r.useState(""),{debounceValue:d}=re(x,500);return r.useEffect(()=>{c(!0),s(d),n(1)},[d]),e.jsxs(e.Fragment,{children:[t&&e.jsxs("div",{className:"relative min-w-[calc(80%)] bg-white rounded-full shadow-lg border",children:[e.jsx("input",{type:"text",placeholder:u,className:"w-full bg-transparent focus:outline-none ml-2 py-2 ps-3 pe-12 md:pe-16 font-semibold",value:x,onChange:g=>{h(g.target.value)}}),e.jsx(w,{css:"absolute inset-y-2.5 right-4 text-green-600",icon:Mt,size:"20px"})]}),e.jsxs("section",{className:`${l&&"hidden"} px-2 py-1 overflow-hidden flex flex-wrap cursor-pointer`,children:[e.jsx("span",{className:"font-medium me-4 text-black",children:"Filtro: "}),a.map((g,f)=>g.input?e.jsxs("div",{className:"bg-sky-400 rounded-lg py-1 px-2 me-2 hover:bg-vetgreen-100 cursor-pointer text-sm",onClick:()=>{g.handleClick(),h("")},children:[e.jsx(w,{css:"px-1 me-1",icon:Ce,size:"13px"}),e.jsxs("span",{children:[e.jsxs("strong",{children:[g.tag,": "]}),g.input]})]},f):null)]})]})}function ts({id:t}){const[s,c]=r.useState(2);return r.useEffect(()=>{const u=document.getElementById("cash_register").getAttribute("role");c(u)},[]),e.jsx(e.Fragment,{children:s==1?e.jsx("a",{href:`/cash_registers/get_excel_by_cash_register?id=${t}`,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-flex items-center mt-5 w-full sm:w-auto",children:e.jsxs("span",{className:"mx-auto",children:[e.jsx(w,{icon:Qe,css:"mr-2",size:"25px"}),"Descargar Excel"]})}):null})}function B({children:t,css:s}){return e.jsx("main",{className:"mx-auto mt-2",children:e.jsx("div",{className:"flex flex-col overflow-hidden",children:e.jsx("div",{className:"py-2 -my-2 sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8",children:e.jsx("div",{className:`overflow-x-auto h-auto ${s||"rounded-lg"} border border-gray-400`,children:e.jsx("table",{className:`min-w-full rounded-lg ${s||"rounded-lg"}`,children:t})})})})})}function ss({names:t,css:s}){return e.jsx("thead",{className:`sticky top-0 ${s||""}`,children:e.jsx("tr",{children:t.map((c,n)=>e.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium leading-4 tracking-wider text-gray-500 uppercase border-b border-gray-200 bg-gray-50",children:c},n))})})}function as({id:t,setData:s,page:c,limit:n,helper:u,searchByFilter:l,mustLoad:a,handleDelete:x,setOptionSearch:h,setSearchByFilter:d,transitionName:g,setTransitionName:f,setImage:o,hide:i}){const p=`/cash_registers/get_products/${t}?page=${c}&limit=${n}&filter=name&inputFilter=${l}`,{data:N,loading:m}=L(p,[c,n,u,l]);return r.useEffect(()=>{m||s(N)},[N,m]),e.jsx(Je,{loading:m,mustLoad:a,message:"Cargando ingresos de productos",data:N,handleDelete:x,setOptionSearch:h,setSearchByFilter:d,transitionName:g,setTransitionName:f,setImage:o,hide:i})}function rs({id:t,setData:s,page:c,limit:n,helper:u,searchByFilter:l,mustLoad:a,handleDelete:x,setOptionSearch:h,setSearchByFilter:d}){const g=`/cash_registers/get_services/${t}?page=${c}&limit=${n}&filter=name&inputFilter=${l}`,{data:f,loading:o}=L(g,[c,n,u,l]);return r.useEffect(()=>{o||s(f)},[f,o]),e.jsx(Je,{loading:o,mustLoad:a,message:"Cargando ingresos de servicios",data:f,handleDelete:x,setOptionSearch:h,setSearchByFilter:d})}function Je({loading:t,mustLoad:s,message:c,data:n,handleDelete:u,setOptionSearch:l,setSearchByFilter:a,transitionName:x,setTransitionName:h,setImage:d,hide:g}){var f,o;return e.jsx("tbody",{className:"bg-white text-center",children:t&s?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(oe,{message:c})})}):((f=n.data)==null?void 0:f.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(w,{icon:pe,css:"mr-3"}),"No hay datos disponibles."]})})})}):(o=n.data)==null?void 0:o.map((i,p)=>{var N,m,y,b,S,E,C,v,k,P,z,H,U,A;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"mx-auto text-center",children:[e.jsx(w,{icon:Ye,css:"text-green-600",size:"22px"}),e.jsx(w,{icon:Ye,css:"text-green-600",size:"22px"}),e.jsx("div",{className:"text-sm leading-5 text-gray-500 font-semibold",children:"Ingreso"})]})})}),i.product_image_url&&e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 h-24",children:e.jsx("div",{className:"text-gray-900 w-20 mx-auto",children:e.jsx("img",{src:i.product_image_url,alt:i.name,className:`rounded-sm h-16 mx-auto cursor-pointer ${g>0?"opacity-0":""}`,onClick:()=>{document.startViewTransition?document.startViewTransition(()=>{xe.flushSync(()=>{h(`${i.name}-${i.id}`),d({url:i.product_image_url,label:i.name})})}):xe.flushSync(()=>{h(`${i.name}-${i.id}`),d({url:i.product_image_url,label:i.name})})},style:{viewTransitionName:!x&&`${i.name}-${i.id}`}})})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 max-w-40 overflow-hidden mx-auto",children:i.name})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",i.price]})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:Number.isInteger(parseFloat((N=i.pivot)==null?void 0:N.quantity))?parseFloat((m=i.pivot)==null?void 0:m.quantity).toFixed(0):(y=i.pivot)==null?void 0:y.quantity})}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",(b=i.pivot)==null?void 0:b.subtotal]})}),e.jsxs("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:[e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-40 overflow-hidden mx-auto",children:((S=i.customer)==null?void 0:S.name)??"--"}),e.jsxs("div",{className:"text-sm leading-5 text-gray-700 w-40 overflow-hidden mx-auto",children:[((C=(E=i.customer)==null?void 0:E.identity_document)==null?void 0:C.abbreviation)&&`${(k=(v=i.customer)==null?void 0:v.identity_document)==null?void 0:k.abbreviation}:`," ",(P=i.customer)==null?void 0:P.document_number]})]}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative max-w-[200px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 max-w-48 overflow-hidden mx-auto",children:((z=i.pivot)==null?void 0:z.description)||"--"})}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700",children:se((H=i.pivot)==null?void 0:H.created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:Ee((U=i.pivot)==null?void 0:U.created_at)})]})}),e.jsx("td",{className:"py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("button",{className:"bg-red-500 hover:bg-red-700 text-sm leading-5 w-full text-white flex flex-col items-center p-1 rounded",onClick:()=>{var I;l(_.vou),a((I=i.pivot)==null?void 0:I.voucher_id)},children:[e.jsx(w,{icon:_e,css:"mx-auto",size:"24px"}),e.jsx("p",{css:"text-center",children:(A=i.pivot)==null?void 0:A.voucher_id})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var I;return u((I=i.pivot)==null?void 0:I.id)},children:e.jsx(w,{icon:te,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},p)})})}function ns({id:t,setData:s,page:c,limit:n,helper:u,searchByFilter:l,mustLoad:a,handleDelete:x}){var f,o;const h=`/cash_registers/get_expenses/${t}?page=${c}&limit=${n}&filter=name&inputFilter=${l}`,{data:d,loading:g}=L(h,[c,n,u,l]);return r.useEffect(()=>{g||s(d)},[d,g]),e.jsx("tbody",{className:"bg-white",children:g&a?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(oe,{message:"Cargando egresos"})})}):((f=d.data)==null?void 0:f.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(w,{icon:pe,css:"mr-3"}),"No hay datos disponibles."]})})})}):(o=d.data)==null?void 0:o.map((i,p)=>{var N,m,y;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"mx-auto text-center",children:[e.jsx(w,{icon:Ue,css:"text-red-600",size:"22px"}),e.jsx(w,{icon:Ue,css:"text-red-600",size:"22px"}),e.jsx("div",{className:"text-sm leading-5 text-gray-500 font-semibold",children:"Egreso"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center w-40",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",(N=i.pivot)==null?void 0:N.subtotal]})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative min-w-[400px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:i.reason})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700",children:se((m=i.pivot)==null?void 0:m.created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:Ee((y=i.pivot)==null?void 0:y.created_at)})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var b;return x((b=i.pivot)==null?void 0:b.id)},children:e.jsx(w,{icon:te,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},p)})})}function is({cashId:t,page:s,limit:c,searchByFilter:n,helper:u,setData:l,mustLoad:a,setOptionSearch:x,setSearchByFilter:h,setCashHelper:d,setHelper:g,setMustLoad:f}){var m,y;const o=`/cash_registers/get_all_vouchers?page=${s}&limit=${c}&inputFilter=${n}`,{data:i,loading:p}=L(o,[s,c,u,n]);r.useEffect(()=>{p||l(i)},[i,p]);const N=(b,S)=>{me(`¿Seguro(a) que quieres eliminar el voucher ${b}?`,()=>{const E=j(e.jsx(Y,{message:"Eliminando voucher"}),{autoClose:3e3,hideProgressBar:!0});ee("DELETE","/cash_registers/destroy_voucher",{voucher_id:b,cash_register_id:S}).then(C=>{if(f(!1),C.errors)return j.update(E,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:C.errors})}),type:j.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(C.message)return j.update(E,{render:e.jsx(e.Fragment,{children:C.message}),type:j.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});j.update(E,{render:`El voucher ${b} ha sido eliminado.`,type:j.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),g(v=>v+1)}).catch(C=>{j.update(E,{render:"Hay problemas de conexión",type:j.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})})};return e.jsx("tbody",{className:"bg-white",children:p&a?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(oe,{message:"Cargando vouchers"})})}):((m=i.data)==null?void 0:m.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(w,{icon:pe,css:"mr-3"}),"No hay datos disponibles."]})})})}):(y=i.data)==null?void 0:y.map((b,S)=>e.jsxs("tr",{className:`${t===b.cash_id&&"bg-gray-300"} hover:bg-sky-200`,children:[e.jsx("td",{className:"py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative w-96",children:e.jsxs("button",{className:"bg-red-500 hover:bg-red-700 text-sm leading-5 w-40 md:w-3/4 mx-auto text-white flex flex-col items-center p-1 rounded",onClick:()=>{d(b.cash_id),x(_.vou),h(b.voucher_id)},children:[e.jsx(w,{icon:_e,css:"mx-auto",size:"24px"}),e.jsx("p",{css:"text-center",children:b.voucher_id})]})}),e.jsxs("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:[e.jsx("div",{className:"text-sm leading-5 text-gray-900 min-w-28 overflow-hidden mx-auto",children:b.customer??"--"}),e.jsxs("div",{className:"text-sm leading-5 text-gray-700 min-w-28 overflow-hidden mx-auto",children:[b.abbreviation&&`${b.abbreviation}:`," ",b.doc_customer]})]}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700 md:hidden",children:se(b.max_created_at)}),e.jsx("p",{className:"text-gray-700 text-base hidden md:block",children:Dt(b.max_created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:Ee(b.max_created_at)})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative w-36",children:e.jsx("div",{className:"text-center",onClick:()=>N(b.voucher_id,b.cash_id),children:e.jsx(w,{icon:te,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},S))})}function os({id:t,searchByFilter:s,mustLoad:c,helper:n,handleDelete:u}){var f,o,i;const l=`/cash_registers/get_voucher/${t}?inputFilter=${s}`,{data:a,loading:x}=L(l,[s,n]),[h,d]=r.useState("");r.useEffect(()=>{var p,N;d((N=(p=a.voucher)==null?void 0:p.reduce((m,y)=>{var b;return m+parseFloat((b=y.pivot)==null?void 0:b.subtotal)},0))==null?void 0:N.toFixed(2))},[a]);const g=()=>{const p=`/cash_registers/get_voucher_pdf/${t}?uuid=${s}`;window.open(p,"_blank")};return e.jsx("tbody",{className:"bg-white",children:x&c?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{children:e.jsx(oe,{message:"Cargando voucher"})})})}):e.jsxs(e.Fragment,{children:[(f=a.voucher)==null?void 0:f.map((p,N)=>{var m,y,b,S,E,C;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:p.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",p.price]})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center ",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:Number.isInteger(parseFloat((m=p.pivot)==null?void 0:m.quantity))?parseFloat((y=p.pivot)==null?void 0:y.quantity).toFixed(0):(b=p.pivot)==null?void 0:b.quantity})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/. ",(S=p.pivot)==null?void 0:S.subtotal]})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 min-w-24",children:((E=p.pivot)==null?void 0:E.description)??"-"})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"min-w-28 text-center",children:e.jsx("p",{className:"text-gray-700",children:se((C=p.pivot)==null?void 0:C.created_at)})})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var v;return u((v=p.pivot)==null?void 0:v.id)},children:e.jsx(w,{icon:te,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},N)}),e.jsx("tr",{className:"hover:bg-sky-200",children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",colSpan:100,children:e.jsxs("div",{className:"text-lg font-bold leading-5 text-gray-900 text-center",children:["Cliente: ",((o=a.customer)==null?void 0:o.name)??"-",((i=a.customer)==null?void 0:i.identity_document)&&` - ${a.customer.identity_document.abbreviation}: ${a.customer.document_number}`]})})}),e.jsx("tr",{className:"hover:bg-sky-200",children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",colSpan:100,children:e.jsxs("div",{className:"text-lg font-bold leading-5 text-gray-600 text-center",children:["Total: S/. ",h]})})}),h>0&&e.jsx("tr",{className:"hover:bg-red-300",onClick:g,children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 cursor-pointer",colSpan:100,children:e.jsxs("div",{className:"text-center text-red-800 font-bold text-xl animate-bounce",children:["Presiona aquí para verlo en ",e.jsx(w,{icon:_e,css:"text-red-800 hover:scale-125 transition ease-out cursor-pointer",size:"35px"})]})})})]})})}function ls({pageQuantity:t,quantity:s,setLimit:c,setPage:n,nextPage:u,prevPage:l,page:a,lastPage:x}){return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"flex justify-between items-center mt-4 px-1 sm:px-5",children:[e.jsxs("div",{className:"hidden xl:block text-black rounded-lg",children:["Mostrando ",t>s?s:t," de ",s," resultados"]}),e.jsx("button",{className:"xl:hidden bg-white border px-4 py-2 text-gray-600 hover:text-indigo-500 hover:bg-gray-200 cursor-pointer rounded-lg",disabled:!l,onClick:()=>{l&&n(parseInt(le(l)))},children:"Anterior"}),e.jsxs("div",{className:"hidden xl:block text-vetbrown rounded-full bg-white border border-vetbrown p-2 mb-1",children:[e.jsx("span",{className:"",children:" Por página: "}),e.jsxs("select",{className:"px-2 py-1 bg-transparent rounded-lg cursor-pointer",defaultValue:"6",onChange:h=>{c(h.target.value),n(1)},children:[e.jsx("option",{value:"6",className:"bg-white",children:"6"}),e.jsx("option",{value:"12",className:"bg-white",children:"12"}),e.jsx("option",{value:"20",className:"bg-white",children:"20"})]})]}),e.jsx("div",{className:"xl:hidden text-gray-600 rounded-xl bg-white border border-gray-200 p-2",children:e.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded-lg cursor-pointer",defaultValue:"6",onChange:h=>{c(h.target.value),n(1)},children:[e.jsx("option",{value:"6",className:" bg-white",children:"6"}),e.jsx("option",{value:"12",className:" bg-white",children:"12"}),e.jsx("option",{value:"20",className:" bg-white",children:"20"})]})}),e.jsxs("nav",{className:"hidden xl:flex rounded-lg divide-vetbrown ease-out duration-300",children:[e.jsx("button",{className:`px-4 py-2 text-vetbrown bg-white border border-vetbrown rounded-l-full ${l&&"hover:text-indigo-500 hover:scale-[105%]"}`,disabled:!l,onClick:()=>{l&&n(parseInt(le(l)))},children:"Anterior"}),a!==1&&e.jsx("button",{className:"px-4 py-2 text-indigo-800 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{n(1)},children:1}),1-a<-2&&a!=1&&e.jsx("span",{className:"px-4 py-2 bg-white text-gray-500",children:"..."}),1-a<-1&&a!=1&&e.jsx("button",{className:"px-4 py-2 text-gray-600 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{n(h=>h-1)},children:parseInt(a)-1}),e.jsx("button",{className:"px-4 py-2 text-indigo-500 bg-vetwhite border border-vetbrown font-medium",children:a}),x-a>0&&e.jsx("button",{className:"px-4 py-2 text-gray-600 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{n(h=>h+1)},children:parseInt(a)+1}),x-a>2&&e.jsx("span",{className:"px-4 py-2 bg-white  text-gray-600",children:"..."}),x-a>2&&e.jsx("button",{className:"px-4 py-2 bg-white text-gray-600 hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{n(parseInt(x))},children:x}),e.jsx("button",{className:`px-4 py-2 text-vetbrown rounded-r-full bg-white border border-vetbrown ${u&&"hover:text-indigo-500 hover:scale-[105%]"}`,disabled:!u,onClick:()=>{u&&n(parseInt(le(u)))},children:"Siguiente"})]}),e.jsx("button",{className:"xl:hidden bg-white border px-4 py-2 text-gray-600 hover:text-indigo-500 hover:bg-gray-200 cursor-pointer rounded-lg",disabled:!u,onClick:()=>{u&&n(parseInt(le(u)))},children:"Siguiente"})]}),e.jsxs("div",{className:"block xl:hidden text-black rounded-lg text-center mt-5",children:["Mostrando ",t>s?s:t," de ",s," resultados"]})]})}function M({cashRegisterId:t,open:s,setOpen:c,setHelper:n,transitionName:u,setTransitionName:l,setImage:a,setHide:x}){const h={id:Se(),img:"",product_id:"",name:"",price:0,quantity:1,description:""},d={id:Se(),service_id:"",name:"",price:0,quantity:1,description:""},g={id:Se(),expense_id:"",reason:"",subtotal:0},[f,o]=r.useState(!1),[i,p]=r.useState(ce.inc),[N,m]=r.useState(1),[y,b]=r.useState(0),[S,E]=r.useState(""),[C,v]=r.useState(""),[k,P]=r.useState(1),[z,H]=r.useState(""),[U,A]=r.useState("name"),[I,G]=r.useState(""),[W,D]=r.useState(1),[q,V]=r.useState(!1),[Q,R]=r.useState(!1),{debounceValue:X}=re(I,400),{data:tt,loading:ke}=L(`/customers/list?filter=${U}&inputFilter=${X}`,[W],Q),[st,at]=r.useState(h),[J,ge]=r.useState([]),[$e,rt]=r.useState("name"),[Fe,Te]=r.useState(""),[nt,Be]=r.useState(1),[it,ot]=r.useState(!1),[lt,dt]=r.useState(!1),{debounceValue:Pe}=re(Fe,400),{data:ct,loading:Me}=L(`/products/list?filter=${$e}&inputFilter=${Pe}`,[nt],lt),[ut,xt]=r.useState(d),[K,be]=r.useState([]),[Re,Ae]=r.useState(""),[mt,Ie]=r.useState(1),[pt,ht]=r.useState(!1),[gt,bt]=r.useState(!1),{debounceValue:ze}=re(Re,400),{data:ft,loading:He}=L(`/services/list?filter=name&inputFilter=${ze}`,[mt],gt),[yt,jt]=r.useState(g),[fe,ye]=r.useState([]),[De,Ve]=r.useState(""),[vt,qe]=r.useState(1),[Nt,wt]=r.useState(!1),[St,Ct]=r.useState(!1),{debounceValue:Oe}=re(De,400),{data:_t,loading:Le}=L(`/expenses/list?filter=reason&inputFilter=${Oe}`,[vt],St);r.useEffect(()=>{!Me&&it&&Be($=>$+1)},[Pe]),r.useEffect(()=>{!He&&pt&&Ie($=>$+1)},[ze]),r.useEffect(()=>{!Le&&Nt&&qe($=>$+1)},[Oe]),r.useEffect(()=>{!ke&&q&&D($=>$+1)},[X]),r.useEffect(()=>{var $;b(Array.isArray(J)&&Array.isArray(K)?($=[...J,...K].reduce((ae,F)=>ae+parseFloat(F.price)*parseFloat(F.quantity),0))==null?void 0:$.toFixed(2):0)},[J,K]),r.useEffect(()=>{Ht("/cash_registers/get_voucher_id").then($=>v($))},[k]);const Et=()=>{o(!0);const $={cash_register_id:t,type_of_movement:N};z&&($.customer_id=z),J.length>0&&($.products=J.map(F=>({product_id:F.product_id,quantity:F.quantity,description:F.description}))),K.length>0&&($.services=K.map(F=>({service_id:F.service_id,quantity:F.quantity,description:F.description}))),fe.length>0&&($.expenses=fe.map(F=>({expense_id:F.expense_id,subtotal:F.subtotal})));const ae=j(e.jsx(Y,{message:"Agregando movimiento"}),{autoClose:3e3,hideProgressBar:!0});ee("POST","/cash_registers/store_movements",$).then(F=>{if(F.errors)return j.update(ae,{render:e.jsx(e.Fragment,{children:e.jsx(ie,{data:F.errors})}),type:j.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});j.update(ae,{render:"Movimiento guardado.",type:j.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),H(""),G(""),ge([]),be([]),ye([]),n(je=>je+1),c(!1),P(je=>je+1)}).catch(F=>{console.log(F),j.update(ae,{render:"Hay problemas de conexión",type:j.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>o(!1))};return e.jsxs(Kt,{option:"Vender",open:s,setOpen:c,handleClick:Et,icon:Tt,text:"Nuevo movimiento",loading:f,width:"max-w-5xl",children:[e.jsx("div",{className:"col-span-full",children:e.jsx(Xe,{names:[{name:"Ingresos",value:ce.inc,movement:1},{name:"Egresos",value:ce.exp,movement:2}],optionSearch:i,setOptionSearch:p,anotherAction:!0,action:$=>m($.movement)})}),i===ce.inc?e.jsxs(e.Fragment,{children:[e.jsxs(M.ButtonContainer,{css:"border-2 border-gray-200 bg-gray-300",children:[e.jsx("span",{className:"text-base absolute -translate-y-2 -translate-x-12",children:"Comprobante"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500 mt-2",children:C||"V-00000001"})]}),e.jsx(M.ButtonContainer,{css:"bg-blue-500 hover:bg-blue-700 order-5 mt-10",children:e.jsx("button",{className:"w-full text-white",onClick:()=>{H(""),G(""),ge([]),be([]),Te(""),Ae("")},children:e.jsx("code",{children:"LIMPIAR FORMULARIO"})})}),e.jsxs(M.ButtonContainer,{css:"border-2 order-4 bg-sky-800 text-white",children:["Total: S/. ",y]}),y>0&&e.jsxs(M.ButtonContainer,{css:"order-4",children:[e.jsx("h1",{className:"underline  underline-offset-2",children:"Calculadora de vuelto"}),e.jsxs("section",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"number",step:"any",min:0,max:99999,value:S,placeholder:"Cantidad de dinero ...",className:"border-2 w-full sm:w-1/2  p-1 rounded-lg bg-transparent text-center",onChange:$=>E($.target.value)}),e.jsx("div",{className:"border-2 w-full sm:w-1/2 rounded-lg min-h-10 flex items-center justify-center",children:e.jsx("p",{children:S-y>0?`Su vuelto es de S/. ${(S-y).toFixed(2)}`:`Faltan S/. ${-(S-y).toFixed(2)}`})})]})]}),e.jsx("hr",{className:"col-span-full border"}),e.jsx(M.CustomerModal,{setMustSearchCustomer:V,filterCustomer:U,setFilterCustomer:A,inputCustomer:I,setInputCustomer:G,loadingCustomer:ke,dataCustomer:tt,setCustomerId:H,setHelperSearchCustomer:R,setHelperCustomer:D}),e.jsx("hr",{className:"col-span-full border"}),e.jsx(M.ProductModal,{setMustSearchProduct:ot,filterProduct:$e,setFilterProduct:rt,inputProduct:Fe,setInputProduct:Te,loadingProduct:Me,dataProduct:ct,selectProduct:st,setSelectProduct:at,setProducts:ge,initialStateProduct:h,products:J,setHelperSearchProduct:dt,setHelperProduct:Be,transitionName:u,setTransitionName:l,setImage:a,setHide:x}),e.jsx("hr",{className:"col-span-full border sm:hidden"}),e.jsx(M.ServiceModal,{setMustSearchService:ht,inputService:Re,setInputService:Ae,loadingService:He,dataService:ft,selectService:ut,setSelectService:xt,setServices:be,initialStateService:d,services:K,setHelperSearchService:bt,setHelperService:Ie}),e.jsx("hr",{className:"col-span-full border"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M.ButtonContainer,{css:"bg-blue-500 hover:bg-blue-700 order-2 mt-10",children:e.jsx("button",{className:"w-full text-white",onClick:()=>{ye([]),Ve("")},children:e.jsx("code",{children:"LIMPIAR FORMULARIO"})})}),e.jsx(M.ExpenseModal,{setMustSearchExpense:wt,inputExpense:De,setInputExpense:Ve,loadingExpense:Le,dataExpense:_t,selectExpense:yt,setSelectExpense:jt,setExpenses:ye,initialStateExpense:g,expenses:fe,setHelperSearchExpense:Ct,setHelperExpense:qe})]})]})}function ds({children:t,css:s=""}){return e.jsx("div",{className:`relative w-full col-span-full rounded px-3 py-[0.32rem] leading-[1.6] text-gray-600  text-center font-semibold text-lg ${s}`,children:t})}function cs({setMustSearchCustomer:t,filterCustomer:s,setFilterCustomer:c,inputCustomer:n,setInputCustomer:u,loadingCustomer:l,dataCustomer:a,setCustomerId:x,setHelperSearchCustomer:h,setHelperCustomer:d}){var o,i;const[g,f]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(he,{setMustSearch:t,filters:[{tag:"Nombre del cliente",value:"name"},{tag:"Número de documento",value:"document_number"}],filter:s,setFilter:c,input:n,setInput:u,label:"Cliente",setHelperSearch:h,setHelper:d,css:"w-full col-span-full order-1 pe-10",listStyle:"w-full max-h-72",anotherAction:!0,actions:()=>{x("")},children:l?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(Y,{message:"Buscando los clientes ..."})}):((o=a.data)==null?void 0:o.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay clientes con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(i=a.data)==null?void 0:i.map((p,N)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{var m;t(!1),u(`${p.name} - ${((m=p.identity_document)==null?void 0:m.abbreviation)??""}: ${p.document_number??""}`),x(p.id)},children:`${p.name} - ${p.identity_document?`${p.identity_document.abbreviation}: ${p.document_number}`:""}`},N))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>f(!0),children:e.jsx(w,{icon:Bt})})]}),e.jsx("div",{className:"absolute",children:e.jsx(Vt,{customer:{...qt},option:"Crear",open:g,setOpen:f,actions:!1,mustBeToast:!1,focus:!1,onChangeComponent:p=>{u(`${p.name} -  ${p.document_number??""}`),x(p.id)}})})]})}function us({setMustSearchProduct:t,filterProduct:s,setFilterProduct:c,inputProduct:n,setInputProduct:u,loadingProduct:l,dataProduct:a,selectProduct:x,setSelectProduct:h,setProducts:d,initialStateProduct:g,products:f,setHelperSearchProduct:o,setHelperProduct:i,transitionName:p,setTransitionName:N,setImage:m,setHide:y}){var E,C;const[b,S]=r.useState(2);return r.useEffect(()=>{const k=document.getElementById("cash_register").getAttribute("role");S(k)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full col-span-1 grid grid-cols-1 self-start gap-6 sm:gap-x-6",children:[e.jsx(he,{setMustSearch:t,filters:[{tag:"Nombre del producto",value:"name"},{tag:"Serie",value:"serie"}],filter:s,setFilter:c,input:n,setInput:u,label:"Producto",setHelperSearch:o,setHelper:i,css:"w-full max-h-10 order-1",listStyle:"w-full sm:w-[200%] max-h-72",children:l?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(Y,{message:"Buscando los productos ..."})}):((E=a.data)==null?void 0:E.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay productos con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(C=a.data)==null?void 0:C.map((v,k)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 p-2 border-b rounded-lg",onClick:()=>{t(!1),u(v.name),h(P=>({...P,img:v.product_image_url,product_id:v.id,name:v.name,price:v.price}))},children:e.jsxs("article",{className:"flex flex-col sm:flex-row justify-center sm:justify-start items-center",children:[e.jsx("img",{src:v.product_image_url||"/image/juguete.webp",alt:v.name,width:"150px",className:"rounded-lg object-contain mb-6 sm:mb-0 sm:me-10"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Nombre:"})," ",`${v.name}`]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Precio:"})," ",`S/. ${v.price}`]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Stock:"})," ",`${v.stock}`," u."]}),v.serie&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Serie:"})," ",`${v.serie}`]}),b==1&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Estado:"})," ",`${v.isActive?"Activo":"Inactivo"}`]})]})]})},k))})}),x.name&&n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ke,{select:x,handleClick:v=>{h(k=>({...k,quantity:parseFloat(v.target.value)||""}))}}),e.jsx(Ze,{select:x,handleChange:v=>{h(k=>({...k,description:v.target.value}))},handleClick:()=>{d(v=>{if(!x.product_id)return[...v];const k=f.findIndex(P=>P.product_id===x.product_id);if(k!==-1){const P=[...f];return P[k].quantity+=parseFloat(x.quantity),P}return[...v,x]}),u(""),h(g)},message:"producto"})]})]}),f.length>0&&e.jsx("div",{className:"col-span-full order-2",children:e.jsxs(B,{children:[e.jsx(B.HeaderTable,{names:["Imagen","Producto","precio","cantidad","subtotal","descripción","Eliminar"]}),e.jsx(et,{data:f,setData:d,transitionName:p,setTransitionName:N,setImage:m,setHide:y})]})})]})}function xs({setMustSearchService:t,inputService:s,setInputService:c,loadingService:n,dataService:u,selectService:l,setSelectService:a,setServices:x,initialStateService:h,services:d,setHelperSearchService:g,setHelperService:f}){var p,N;const[o,i]=r.useState(2);return r.useEffect(()=>{const y=document.getElementById("cash_register").getAttribute("role");i(y)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full col-span-1 grid grid-cols-1 self-start gap-6 sm:gap-x-6",children:[e.jsx(he,{setMustSearch:t,filters:[{tag:"Nombre del servicio",value:"name"}],filter:"name",input:s,setInput:c,label:"Servicio",setHelperSearch:g,setHelper:f,css:"w-full max-h-10 order-1",listStyle:"w-full max-h-72",children:n?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(Y,{message:"Buscando los servicios ..."})}):((p=u.data)==null?void 0:p.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay servicios con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(N=u.data)==null?void 0:N.map((m,y)=>e.jsxs("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{t(!1),c(m.name),a(b=>({...b,service_id:m.id,name:m.name,price:m.price}))},children:[`${m.name} ->  S/. ${m.price}`,o==1&&e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Estado:"})," ",`${m.isActive?"Activo":"Inactivo"}`]})]},y))})}),l.name&&s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ke,{select:l,handleClick:m=>{a(y=>({...y,quantity:parseFloat(m.target.value)||""}))}}),e.jsx(Ze,{select:l,handleChange:m=>{a(y=>({...y,description:m.target.value}))},handleClick:()=>{x(m=>{if(!l.service_id)return[...m];const y=d.findIndex(b=>b.service_id===l.service_id);if(y!==-1){const b=[...d];return b[y].quantity+=parseFloat(l.quantity),b}return[...m,l]}),c(""),a(h)},message:"servicio"})]})]}),d.length>0&&e.jsx("div",{className:"col-span-full order-3",children:e.jsxs(B,{children:[e.jsx(B.HeaderTable,{names:["Servicio","precio","cantidad","subtotal","descripción","Eliminar"]}),e.jsx(et,{data:d,setData:x})]})})]})}function Ke({select:t,handleClick:s}){return e.jsxs("div",{className:"relative border border-gray-600 rounded w-full order-1",children:[e.jsx("input",{type:"number",step:"any",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:t.quantity,onChange:s,min:0,required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Cantidad"})]})}function Ze({select:t,handleChange:s,handleClick:c,message:n}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("textarea",{className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:t.description,onChange:s}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Descripción (opcional)"})]}),e.jsxs("button",{type:"button",className:"w-full col-span-full bg-blue-500 text-white font-semibold rounded-lg py-2 hover:bg-blue-700 order-1",onClick:c,children:["Agregar ",n]})]})}function et({data:t,setData:s,transitionName:c,setTransitionName:n,setImage:u,setHide:l}){return e.jsx("tbody",{className:"bg-white text-center",children:t.map((a,x)=>e.jsxs("tr",{className:"hover:bg-sky-200",children:[a.img&&e.jsx("td",{className:"whitespace-no-wrap border-b border-gray-200 h-20",children:e.jsx("div",{className:"text-gray-900 w-20",children:e.jsx("img",{src:a.img,alt:a.name,className:"rounded-sm h-16 mx-auto cursor-pointer",onClick:()=>{l(!0),document.startViewTransition?document.startViewTransition(()=>{xe.flushSync(()=>{n(`${a.name}-${a.id}`),u({url:a.img,label:a.name})})}):xe.flushSync(()=>{n(`${a.name}-${a.id}`),u({url:a.img,label:a.name})})},style:{viewTransitionName:!c&&`${a.name}-${a.id}`}})})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-40 overflow-hidden mx-auto",children:a.name})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/. ",a.price]})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:a.quantity})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/. ",(parseFloat(a.price)*parseFloat(a.quantity)).toFixed(2)]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative max-w-[200px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-48 overflow-hidden mx-auto",children:a.description})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{onClick:()=>{const h=t.filter(d=>d.id!==a.id);s(h)},children:e.jsx(w,{icon:te,css:"text-red-800 hover:scale-125 transition ease-out  cursor-pointer",size:"25px"})})})]},x))})}function ms({setMustSearchExpense:t,inputExpense:s,setInputExpense:c,loadingExpense:n,dataExpense:u,selectExpense:l,setSelectExpense:a,setExpenses:x,initialStateExpense:h,expenses:d,setHelperSearchExpense:g,setHelperExpense:f}){var p,N;const[o,i]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 gap-6",children:[e.jsx(he,{setMustSearch:t,filters:[{tag:"Razón",value:"reason"}],filter:"reason",input:s,setInput:c,label:"Egresos",setHelperSearch:g,setHelper:f,children:n?e.jsx("div",{className:"w-full sm:w-1/2 mx-auto py-4",children:e.jsx(Y,{message:"Buscando las razones de egreso ..."})}):((p=u.data)==null?void 0:p.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay servicios con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(N=u.data)==null?void 0:N.map((m,y)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{t(!1),c(m.reason),a(b=>({...b,expense_id:m.id,reason:m.reason}))},children:`${m.reason}`},y))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>i(!0),children:e.jsx(w,{icon:Pt})})]}),e.jsx("div",{className:"absolute",children:e.jsx(Ot,{expense:{...Lt},option:"Crear",open:o,setOpen:i,actions:!1,mustBeToast:!1,onChangeComponent:m=>{c(m.reason),a(y=>({...y,expense_id:m.id,reason:m.reason}))}})}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full",children:[e.jsx("input",{type:"number",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:l.subtotal,onChange:m=>{a(y=>({...y,subtotal:m.target.value}))},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Dinero"})]}),e.jsx("button",{type:"button",className:"w-full col-span-full bg-blue-500 text-white font-semibold rounded-lg py-2 hover:bg-blue-700",onClick:()=>{l&&(x(m=>{if(!l.expense_id)return[...m];const y=d.findIndex(b=>b.expense_id===l.expense_id);if(y!==-1){const b=[...d];return b[y].subtotal=parseFloat(l.subtotal),b}return[...m,l]}),c(""),a(h))},children:"Agregar razón"})]}),d.length>0&&e.jsx("div",{className:"col-span-full",children:e.jsxs(B,{children:[e.jsx(B.HeaderTable,{names:["subtotal","razón","eliminar"]}),e.jsx("tbody",{className:"bg-white text-center",children:d.map((m,y)=>e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/. ",m.subtotal]})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200 min-w-72",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:m.reason})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{onClick:()=>{const b=d.filter(S=>S.id!==m.id);x(b)},children:e.jsx(w,{icon:te,css:"text-red-800 hover:scale-125 transition ease-out cursor-pointer",size:"25px"})})})]},y))})]})})]})}O.Header=Zt;O.Search=es;O.ExcelButton=ts;O.Pagination=ls;O.SectionCashRegisterModal=M;M.ButtonContainer=ds;M.CustomerModal=cs;M.ProductModal=us;M.ServiceModal=xs;M.ExpenseModal=ms;B.HeaderTable=ss;B.BodyProductTable=as;B.BodyServiceTable=rs;B.BodyExpenseTable=ns;B.BodyVoucherTable=os;function ps(){var V,Q;const t={id:"",initial_amount:0},[s,c]=r.useState(1),[n,u]=r.useState(12),[l,a]=r.useState(""),[x,h]=r.useState(""),[d,g]=r.useState(0),f=`/cash_registers/list?page=${s}&limit=${n}&startDate=${l}&finishDate=${x}`,{data:o,loading:i}=L(f,[s,n,d]),[p,N]=r.useState("Abrir"),[m,y]=r.useState(!1),[b,S]=r.useState(t),[E,C]=r.useState(!0),[v,k]=r.useState(!0),[P,z]=r.useState({id:null,name:"",state:1}),[H,U]=r.useState({url:"",label:""}),[A,I]=r.useState(""),[G,W]=r.useState(!1),[D,q]=r.useState(2);return r.useEffect(()=>{const X=document.getElementById("cash_register").getAttribute("role");q(X)},[]),e.jsxs(e.Fragment,{children:[D==1?e.jsx(At,{icon:ue,message:"Gestión de cajas",name:"nueva caja",setOpen:y,setOption:N,setData:S,initialState:t}):e.jsx(It,{icon:ue,message:"Gestión de cajas"}),e.jsxs(Z,{children:[e.jsx(Z.SearchDate,{setHelper:g,startDate:l,setStartDate:a,finishDate:x,setFinishDate:h,setPage:c,handleReset:()=>{a(""),h(""),c(1),C(!0),g(R=>R+1)}}),e.jsx(hs,{rol:D}),e.jsx(Z.FilterBar,{hide:!l&&!x,data:[{tag:"Fecha de inicio",input:l.length>0?l:null,handleClick:()=>{a(""),c(1),g(R=>R+1)}},{tag:"Fecha de finalización",input:x.length>0?x:null,handleClick:()=>{h(""),c(1),g(R=>R+1)}}]}),e.jsx(Z.CardContainer,{children:i&E?e.jsx(oe,{message:"Cargando cajas"}):((V=o.data)==null?void 0:V.length)===0?e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(w,{icon:pe,css:"mr-3"}),"No hay datos disponibles."]})}):e.jsx(e.Fragment,{children:(Q=o==null?void 0:o.data)==null?void 0:Q.map((R,X)=>e.jsx(Z.CardContainer.Card,{mustAnimate:v,setMustAnimate:k,children:e.jsx(Ut,{cash_registerI:R,setCashRegister:S,setOption:N,setOpenModal:y,setHelper:g,setMustLoad:C,setMustAnimate:k,rol:D,handleClick:()=>{z({id:R.id,name:se(R.created_at),state:R.state})}})},`${R.id}-${X}`))})}),e.jsx(Z.Pagination,{pageQuantity:o.current_page*o.per_page,quantity:o.total,setMustLoad:C,setLimit:u,setPage:c,nextPage:o.next_page_url,prevPage:o.prev_page_url,page:o.current_page,lastPage:o.last_page,setMustAnimate:k})]}),A&&e.jsx(Yt,{image:H,transitionName:A,setTransitionName:I,setHide:W}),e.jsx(Wt,{cashRegister:b,option:p,open:m,setOpen:y,setMustLoad:C,setHelper:g}),e.jsx(zt,{}),e.jsx(O,{cashRegister:P,handleClose:()=>z({id:null,name:"",state:1}),setHelper:g,setMustLoad:C,transitionName:A,setTransitionName:I,setImage:U,hide:G,setHide:W})]})}function hs({rol:t}){const[s,c]=r.useState("");return e.jsx(e.Fragment,{children:t==1?e.jsxs("div",{className:"bg-vetwhite shadow-2xl p-5 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-lg text-gray-600",children:"Ingresos / Egresos del mes"}),e.jsx("input",{type:"month",className:"p-2 rounded-xl bg-gray-300 w-full mt-2",value:s,onChange:n=>{c(n.target.value)}}),e.jsx("a",{href:s.length>0?`/cash_registers/get_excel_by_month?month=${s.split("-")[1]}&year=${s.split("-")[0]}`:"#",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-flex mt-5 w-full",children:e.jsxs("span",{className:"mx-auto",children:[e.jsx(w,{icon:Qe,css:"mr-2",size:"25px"}),"Descargar Excel"]})})]}):null})}const gs=Rt.createRoot(document.getElementById("cash_register"));gs.render(e.jsx(ps,{}));
