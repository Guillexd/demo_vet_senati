import{j as e,I as v,t as vt,u as Nt,v as wt,r as d,w as ge,x as Ct,p as be,y as St,k as _t,z as U,e as re,A as Ae,B as ye,C as ze,a as Et,D as Ve,d as kt,H as Tt,F as Ft}from"./Footer-890d0c98.js";import{c as G,s as ae,Q as y,S as D,f as Y,T as K,M as He,u as X,a as H,i as $t,L as Z,d as je,h as Bt,l as ee,b as L}from"./Spinner-1f1ad60d.js";import{R as ne}from"./ReactSelect-4c55cf99.js";import{C as Pt,i as Mt}from"./initialStateCustomer-fb21044a.js";function It({cash_registerI:t,setCashRegister:s,setOption:i,setOpenModal:o,setHelper:a,setMustLoad:n,setMustAnimate:l,setIsDeleted:x,handleClick:m}){const u=()=>{ae("¿Quieres eliminar esta caja?",()=>{x(!0),l(!1);const p=y(e.jsx(D,{message:`Eliminando la caja ${t.id}`}),{autoClose:3e3,hideProgressBar:!0});Y("DELETE","/cash_registers/destroy",{id:t.id}).then(g=>{if(n(!1),g.errors)return x(!1),y.update(p,{render:e.jsx(e.Fragment,{children:e.jsx(K,{data:g.errors})}),type:y.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(g.message)return x(!1),y.update(p,{render:e.jsx(e.Fragment,{children:g.message}),type:y.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});y.update(p,{render:`Caja ${t.id} ha sido eliminado.`,type:y.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),a(c=>c+1)}).catch(g=>{y.update(p,{render:"Hay problemas de conexión",type:y.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})},"Se eliminarán los datos asociados a esta caja como los ingresos y egresos registrados del mismo.")};return e.jsxs("div",{className:"px-8 pt-5 flex flex-col justify-between flex-1",onClick:m,children:[e.jsx("div",{className:"absolute top-1 left-2 rounded-full bg-indigo-500 w-8 h-8 flex justify-center items-center font-bold font-mono text-xl text-white",children:t.id}),e.jsx("div",{className:"absolute top-8 right-2 animate-bounce rounded-full bg-indigo-500 w-10 h-10 flex justify-center items-center font-bold font-mono text-xl text-white",children:e.jsx(v,{icon:vt,size:"30px"})}),e.jsx("img",{src:"/image/caja.png",alt:"caja"}),e.jsxs("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold",children:["Caja ",G(t.created_at)]}),e.jsxs("div",{className:"uppercase tracking-wide text-sm text-indigo-700 font-bold",children:["Monto inicial: S/ ",t.initial_amount]}),t.total&&e.jsxs("div",{className:"uppercase tracking-wide text-sm font-bold",children:["Total: S/ ",t.total]}),e.jsx("div",{className:`${t.state===0?"bg-red-400 text-amber-200 ":"bg-green-400 text-black "} uppercase tracking-wide text-sm font-semibold rounded-lg w-fullpx-4 py-1 flex justify-center`,children:t.state!==0?e.jsxs(e.Fragment,{children:[e.jsx(v,{css:"me-2",icon:Nt}),"Abierto"]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{css:"me-2",icon:wt}),"Cerrado"]})}),e.jsxs("div",{className:"my-3 flex gap-2 mx-auto",onClick:p=>p.stopPropagation(),children:[t.state===0?e.jsx("button",{type:"button",className:"bg-green-300 rounded-md py-1 px-4 font-semibold hover:bg-green-400",onClick:()=>{i("Actualizar"),o(!1),s(t),setTimeout(()=>{document.getElementById("btn_to_submit").click()},200)},children:"Abrir caja"}):e.jsx("button",{className:"bg-vetsky rounded-md py-1 px-4 font-semibold hover:bg-gray-400",onClick:()=>{i("Actualizar"),o(!0),s(t)},children:"Editar"}),e.jsx("button",{className:"bg-vetbrown rounded-md py-1 px-4 text-white font-semibold hover:bg-gray-500",onClick:u,children:"Eliminar"})]})]})}const J={id:"MODIFY_ID",initial_amount:"MODIFY_INITIAL_AMOUNT"};function Rt(t,s){switch(s.type){case J.id:return{...t,id:s.payload};case J.initial_amount:return{...t,initial_amount:s.payload};default:return t}}function At({cashRegister:t,option:s,open:i,setOpen:o,setMustLoad:a,setHelper:n}){const l={method:s==="Crear"?"POST":"PUT",url:s!=="Actualizar"?"/cash_registers/store":"/cash_registers/update",sucessMessage:s==="Crear"?"Caja agregada":"Caja actualizada",loadingMessage:s!=="Actualizar"?"Agregando caja":"Actualizando caja"},[x,m]=d.useReducer(Rt,t),[u,p]=d.useState(!1),g=c=>{c.preventDefault(),p(!0);const j=y(e.jsx(D,{message:l.loadingMessage}),{autoClose:1e4,hideProgressBar:!0});Y(l.method,l.url,x).then(r=>{if(r.errors)return y.update(j,{render:e.jsx(e.Fragment,{children:e.jsx(K,{data:r.errors})}),type:y.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(r.message)return y.update(j,{render:e.jsx(e.Fragment,{children:r.message}),type:y.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});y.update(j,{render:l.sucessMessage,type:y.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),a(!1),n(h=>h+1),o(!1)}).catch(r=>{console.log(r),y.update(j,{render:"Hay problemas de conexión",type:y.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>p(!1))};return d.useEffect(()=>{for(const c in J){const j=J[c],r=t.hasOwnProperty(c)?t[c]:"";m({type:j,payload:r})}},[t]),e.jsxs(e.Fragment,{children:[e.jsx(He,{option:s,open:i,setOpen:o,isLoading:u,handleSubmit:g,icon:ge,text:"Caja",children:e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full order-1",children:[e.jsx("input",{type:"number",step:"any",min:0,className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:x.initial_amount,onChange:c=>{m({type:J.initial_amount,payload:c.target.value})},required:!0,autoFocus:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Monto inicial"})]})}),e.jsx(He.ToastifyModal,{})]})}let te;const zt=new Uint8Array(16);function Ht(){if(!te&&(te=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!te))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return te(zt)}const $=[];for(let t=0;t<256;++t)$.push((t+256).toString(16).slice(1));function Dt(t,s=0){return $[t[s+0]]+$[t[s+1]]+$[t[s+2]]+$[t[s+3]]+"-"+$[t[s+4]]+$[t[s+5]]+"-"+$[t[s+6]]+$[t[s+7]]+"-"+$[t[s+8]]+$[t[s+9]]+"-"+$[t[s+10]]+$[t[s+11]]+$[t[s+12]]+$[t[s+13]]+$[t[s+14]]+$[t[s+15]]}let De,xe,me=0,pe=0;function he(t,s,i){let o=s&&i||0;const a=s||new Array(16);t=t||{};let n=t.node||De,l=t.clockseq!==void 0?t.clockseq:xe;if(n==null||l==null){const c=t.random||(t.rng||Ht)();n==null&&(n=De=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),l==null&&(l=xe=(c[6]<<8|c[7])&16383)}let x=t.msecs!==void 0?t.msecs:Date.now(),m=t.nsecs!==void 0?t.nsecs:pe+1;const u=x-me+(m-pe)/1e4;if(u<0&&t.clockseq===void 0&&(l=l+1&16383),(u<0||x>me)&&t.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");me=x,pe=m,xe=l,x+=122192928e5;const p=((x&268435455)*1e4+m)%4294967296;a[o++]=p>>>24&255,a[o++]=p>>>16&255,a[o++]=p>>>8&255,a[o++]=p&255;const g=x/4294967296*1e4&268435455;a[o++]=g>>>8&255,a[o++]=g&255,a[o++]=g>>>24&15|16,a[o++]=g>>>16&255,a[o++]=l>>>8|128,a[o++]=l&255;for(let c=0;c<6;++c)a[o+c]=n[c];return s||Dt(a)}function Vt({children:t,option:s,open:i,setOpen:o,handleClick:a,icon:n,text:l,loading:x,width:m}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${i?"scale-100":"scale-0"} fixed inset-0 bg-black opacity-60 z-10 transition-all duration-300 ease-out`}),e.jsx("div",{className:`fixed top-0 left-0 w-full h-full flex items-center justify-center transition-all duration-500 ease-out transform ${i?"":"translate-y-[-200%]"}`,style:{zIndex:"40"},children:e.jsx("div",{className:`w-full ${m||"max-w-2xl"} max-h-full mx-3 overflow-y-auto`,children:e.jsxs("div",{className:"relative rounded-lg shadow bg-white z-40",children:[e.jsxs("div",{className:"flex items-start p-4 border-b rounded-t border-gray-600",children:[e.jsx(Ct,{icon:n,className:"text-gray-700  text-3xl mx-3"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 ",children:l}),e.jsx("button",{type:"button",className:"bg-gray-300 right-0 top-0 absolute p-3 rounded-xl m-2 opacity-80 hover:opacity-45",onClick:()=>o(!1),children:e.jsx(v,{css:"text-green-800",icon:be,size:"22px"})})]}),e.jsx("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 gap-6",children:t}),e.jsxs("div",{className:"flex justify-end p-6 space-x-2 border-t rounded-b border-gray-600",children:[e.jsx("button",{type:"button",className:"text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:bg-red-600 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",onClick:a,disabled:x,children:s}),e.jsx("button",{type:"button",className:"focus:ring-4 focus:outline-none rounded-lg border text-sm font-medium px-5 py-2.5 focus:z-10 bg-gray-500 text-white border-gray-500 hover:bg-gray-600 focus:ring-gray-600",onClick:()=>o(!1),children:"Cerrar"})]})]})})})]})}const w={prod:"product",serv:"service",expen:"expense",vous:"vouchers",vou:"voucher"},se={inc:"income",exp:"expense"};function R({cashRegister:t,handleClose:s,setHelper:i,setMustLoad:o}){const[a,n]=d.useState(w.prod),[l,x]=d.useState([]),[m,u]=d.useState([]),[p,g]=d.useState(1),[c,j]=d.useState(6),[r,h]=d.useState(""),[b,N]=d.useState(!0),[f,k]=d.useState(!1),[E,C]=d.useState(0),[P,F]=d.useState(null);d.useEffect(()=>{a===w.prod?(F(null),x(["Transacción","Imagen","Producto","Precio","cantidad","subtotal","Cliente","descripción","fecha","voucher","eliminar"])):a===w.serv?(F(null),x(["Transacción","Servicio","Precio","cantidad","subtotal","Cliente","descripción","fecha","voucher","eliminar"])):a===w.expen?(F(null),x(["Transacción","subtotal","Razón","fecha","eliminar"])):a===w.vous?x(["Código","Cliente","fecha","eliminar"]):a===w.vou&&x(["Producto / Servicio","Precio","cantidad","subtotal","descripción","fecha","eliminar"])},[a]);const W=()=>{ae("¿Quieres cerrar esta caja?",()=>{const z=y(e.jsx(D,{message:"Cerrando caja"}),{autoClose:3e3,hideProgressBar:!0});Y("PUT","/cash_registers/update_state",{id:t.id}).then(S=>{y.update(z,{render:"La caja ha sido cerrada.",type:y.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),s(),o(!1),i(I=>I+1)}).catch(S=>{console.log(S),y.update(z,{render:"Hay problemas de conexión",type:y.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})},"¡Solo un administrador podrá volver a abrirla!","¡ciérralo!")},V=z=>{ae("¿Quieres eliminar este movimiento?",()=>{const S=y(e.jsx(D,{message:"Eliminando movimiento"}),{autoClose:3e3,hideProgressBar:!0});Y("DELETE","/cash_registers/destroy_movement",{id:z,cash_register_id:t.id}).then(I=>{if(N(!1),I.errors)return y.update(S,{render:e.jsx(e.Fragment,{children:e.jsx(K,{data:I.errors})}),type:y.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(I.message)return y.update(S,{render:e.jsx(e.Fragment,{children:I.message}),type:y.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});y.update(S,{render:"El movimiento ha sido eliminado.",type:y.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),C(ie=>ie+1)}).catch(I=>{y.update(S,{render:"Hay problemas de conexión",type:y.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})})},A={id:t.id,setData:u,page:p,limit:c,helper:E,searchByFilter:r,mustLoad:b,handleDelete:V};return e.jsx("section",{className:`${t.id!==null?"translate-y-0":"translate-y-[200%]"} transition-all duration-500 ease-in fixed bg-slate-50 z-30 bottom-0 left-0 px-3 md:px-5 ${f?"overflow-hidden":"overflow-y-auto"} rounded-t-2xl w-screen h-[99vh] mt-2 pb-10`,children:t.id!==null?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-gray-400 right-0 absolute p-3 rounded-xl m-2 opacity-80 hover:opacity-45 z-40 animate-bounce",onClick:s,children:e.jsx(v,{css:"text-green-900",icon:be,size:"22px"})}),e.jsx("br",{})," ",e.jsx("br",{}),e.jsx(R.Header,{message:`Caja ${t.name}`,messageButton:"Agregar movimiento",disabled:t.state===0,handleClick:()=>k(!0)}),e.jsx("div",{className:"mb-4",children:e.jsx(qe,{names:[{name:"Productos",value:w.prod},{name:"Servicios",value:w.serv},{name:"Egresos",value:w.expen},{name:"Vouchers",value:w.vous},{name:"Voucher",value:w.vou}],optionSearch:a,setOptionSearch:n,anotherAction:!0,action:z=>{h(""),N(!0),g(1)}})}),e.jsx(R.Search,{render:a!==w.vou,setSearchByFilter:h,setMustLoad:N,setPage:g,placeholder:w.prod==a?"Buscar por nombre del producto":w.serv==a?"Buscar por nombre del servicio":w.expen==a?"Buscar por razón de egreso":"Buscar por código de voucher / Nombre o número de documento del cliente",hide:!r,data:[{tag:w.vous==a?"código / nombre o documento del cliente":w.vou==a?"código":w.expen==a?"razón":"nombre",input:r,handleClick:()=>h("")}]}),e.jsxs(B,{children:[e.jsx(B.HeaderTable,{names:l}),a===w.prod?e.jsx(B.BodyProductTable,{...A,setOptionSearch:n,setSearchByFilter:h}):a===w.serv?e.jsx(B.BodyServiceTable,{...A,setOptionSearch:n,setSearchByFilter:h}):a===w.expen?e.jsx(B.BodyExpenseTable,{...A}):a===w.vous?e.jsx(Qt,{cashId:t.id,page:p,limit:c,searchByFilter:r,helper:E,setData:u,mustLoad:b,setOptionSearch:n,setSearchByFilter:h,setCashHelper:F,setHelper:C,setMustLoad:N}):a===w.vou?e.jsx(B.BodyVoucherTable,{id:P||t.id,searchByFilter:r,mustLoad:b,helper:E,handleDelete:V}):null]}),e.jsx(R.ExcelButton,{id:t.id}),a===w.vou?null:e.jsx(R.Pagination,{pageQuantity:m.current_page*m.per_page,quantity:m.total,setLimit:j,setPage:g,nextPage:m.next_page_url,prevPage:m.prev_page_url,page:m.current_page,lastPage:m.last_page}),t.state!==0&&e.jsxs(e.Fragment,{children:[e.jsx(R.SectionCashRegisterModal,{cashRegisterId:t.id,open:f,setOpen:k,setHelper:C}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:"bg-red-600 w-full lg:w-1/2 px-3 py-4 leading-[1.6] mt-5 rounded-xl hover:rotate-[1deg] transition ease-out text-white text-xl",onClick:W,children:"Cerrar caja"})})]})]}):null})}function qt({message:t,messageButton:s,disabled:i,handleClick:o}){return e.jsxs("header",{className:"w-full flex flex-wrap justify-center md:justify-between md:px-7 text-gray-700",children:[e.jsxs("p",{className:"font-bold text-4xl text-center",children:[e.jsx(v,{icon:ge,css:"mr-3",size:"37px"}),t]}),e.jsx("button",{className:`bg-sky-700 hover:bg-sky-900 text-white font-bold py-2 px-4 rounded mr-4 mb-4 mt-4 sm:mt-0 shadow-xl ${i&&"opacity-0"}`,disabled:i,onClick:o,children:s})]})}function qe({names:t,optionSearch:s,setOptionSearch:i,anotherAction:o=!1,action:a}){return e.jsx("div",{className:"w-full flex flex-wrap gap-1",children:t.map((n,l)=>e.jsx("button",{type:"button",className:`${s===n.value?"bg-sky-400":"bg-sky-900 hover:bg-sky-400"} py-2 rounded-lg flex-grow text-white font-semibold min-w-24`,onClick:()=>{i(n.value),o&&a(n)},children:n.name},l))})}function Ot({render:t,setSearchByFilter:s,setMustLoad:i,setPage:o,placeholder:a,hide:n,data:l}){const[x,m]=d.useState(""),{debounceValue:u}=X(x,500);return d.useEffect(()=>{i(!0),s(u),o(1)},[u]),e.jsxs(e.Fragment,{children:[t&&e.jsxs("div",{className:"relative min-w-[calc(80%)] bg-white rounded-full shadow-lg border",children:[e.jsx("input",{type:"text",placeholder:a,className:"w-full bg-transparent focus:outline-none ml-2 py-2 ps-3 pe-12 md:pe-16 font-semibold",value:x,onChange:p=>{m(p.target.value)}}),e.jsx(v,{css:"absolute inset-y-2.5 right-4 text-green-600",icon:Et,size:"20px"})]}),e.jsxs("section",{className:`${n&&"hidden"} px-2 py-1 overflow-hidden flex flex-wrap cursor-pointer`,children:[e.jsx("span",{className:"font-medium me-4 text-black",children:"Filtro: "}),l.map((p,g)=>p.input?e.jsxs("div",{className:"bg-sky-400 rounded-lg py-1 px-2 me-2 hover:bg-vetgreen-100 cursor-pointer text-sm",onClick:()=>{p.handleClick(),m("")},children:[e.jsx(v,{css:"px-1 me-1",icon:be,size:"13px"}),e.jsxs("span",{children:[e.jsxs("strong",{children:[p.tag,": "]}),p.input]})]},g):null)]})]})}function Lt({id:t}){const[s,i]=d.useState(2);return d.useEffect(()=>{const a=document.getElementById("cash_register").getAttribute("role");i(a)},[]),e.jsx(e.Fragment,{children:s==1?e.jsx("a",{href:`/cash_registers/get_excel_by_cash_register?id=${t}`,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-flex items-center mt-5 w-full sm:w-auto",children:e.jsxs("span",{className:"mx-auto",children:[e.jsx(v,{icon:Ve,css:"mr-2",size:"25px"}),"Descargar Excel"]})}):null})}function B({children:t,css:s}){return e.jsx("main",{className:"mx-auto mt-2",children:e.jsx("div",{className:"flex flex-col overflow-hidden",children:e.jsx("div",{className:"py-2 -my-2 sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8",children:e.jsx("div",{className:`overflow-x-auto h-auto ${s||"rounded-lg"} border border-gray-400`,children:e.jsx("table",{className:`min-w-full rounded-lg ${s||"rounded-lg"}`,children:t})})})})})}function Yt({names:t,css:s}){return e.jsx("thead",{className:`sticky top-0 ${s||""}`,children:e.jsx("tr",{children:t.map((i,o)=>e.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium leading-4 tracking-wider text-gray-500 uppercase border-b border-gray-200 bg-gray-50",children:i},o))})})}function Ut({id:t,setData:s,page:i,limit:o,helper:a,searchByFilter:n,mustLoad:l,handleDelete:x,setOptionSearch:m,setSearchByFilter:u}){const p=`/cash_registers/get_products/${t}?page=${i}&limit=${o}&filter=name&inputFilter=${n}`,{data:g,loading:c}=H(p,[i,o,a,n]);return d.useEffect(()=>{c||s(g)},[g,c]),e.jsx(Oe,{loading:c,mustLoad:l,message:"Cargando ingresos de productos",data:g,handleDelete:x,setOptionSearch:m,setSearchByFilter:u})}function Gt({id:t,setData:s,page:i,limit:o,helper:a,searchByFilter:n,mustLoad:l,handleDelete:x,setOptionSearch:m,setSearchByFilter:u}){const p=`/cash_registers/get_services/${t}?page=${i}&limit=${o}&filter=name&inputFilter=${n}`,{data:g,loading:c}=H(p,[i,o,a,n]);return d.useEffect(()=>{c||s(g)},[g,c]),e.jsx(Oe,{loading:c,mustLoad:l,message:"Cargando ingresos de servicios",data:g,handleDelete:x,setOptionSearch:m,setSearchByFilter:u})}function Oe({loading:t,mustLoad:s,message:i,data:o,handleDelete:a,setOptionSearch:n,setSearchByFilter:l}){var x,m;return e.jsx("tbody",{className:"bg-white text-center",children:t&s?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(Z,{message:i})})}):((x=o.data)==null?void 0:x.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(v,{icon:re,css:"mr-3"}),"No hay datos disponibles."]})})})}):(m=o.data)==null?void 0:m.map((u,p)=>{var g,c,j,r,h,b,N,f,k,E,C,P;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"mx-auto text-center",children:[e.jsx(v,{icon:Ae,css:"text-green-600",size:"22px"}),e.jsx(v,{icon:Ae,css:"text-green-600",size:"22px"}),e.jsx("div",{className:"text-sm leading-5 text-gray-500 font-semibold",children:"Ingreso"})]})})}),u.product_image_url&&e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 h-24",children:e.jsx("div",{className:"text-gray-900 w-20 mx-auto",children:e.jsx("img",{src:u.product_image_url,alt:u.name,className:"rounded-sm h-16 mx-auto transition-all ease-out cursor-pointer hover:absolute hover:scale-[300%] hover:z-10"})})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 max-w-40 overflow-hidden mx-auto",children:u.name})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-16",children:["S/ ",u.price]})}),e.jsx("td",{className:"px-2 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:(g=u.pivot)==null?void 0:g.quantity})}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/ ",(c=u.pivot)==null?void 0:c.subtotal]})}),e.jsxs("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:[e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-40 overflow-hidden mx-auto",children:(j=u.customer)==null?void 0:j.name}),e.jsxs("div",{className:"text-sm leading-5 text-gray-700 w-40 overflow-hidden mx-auto",children:[((h=(r=u.customer)==null?void 0:r.identity_document)==null?void 0:h.abbreviation)&&`${(N=(b=u.customer)==null?void 0:b.identity_document)==null?void 0:N.abbreviation}:`," ",(f=u.customer)==null?void 0:f.document_number]})]}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative max-w-[200px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 max-w-48 overflow-hidden mx-auto",children:((k=u.pivot)==null?void 0:k.description)||"--"})}),e.jsx("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700",children:G((E=u.pivot)==null?void 0:E.created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:je((C=u.pivot)==null?void 0:C.created_at)})]})}),e.jsx("td",{className:"py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("button",{className:"bg-red-500 hover:bg-red-700 text-sm leading-5 w-full text-white flex flex-col items-center p-1 rounded",onClick:()=>{var F;n(w.vou),l((F=u.pivot)==null?void 0:F.voucher_id)},children:[e.jsx(v,{icon:ye,css:"mx-auto",size:"24px"}),e.jsx("p",{css:"text-center",children:(P=u.pivot)==null?void 0:P.voucher_id})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var F;return a((F=u.pivot)==null?void 0:F.id)},children:e.jsx(v,{icon:U,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},p)})})}function Wt({id:t,setData:s,page:i,limit:o,helper:a,searchByFilter:n,mustLoad:l,handleDelete:x}){var g,c;const m=`/cash_registers/get_expenses/${t}?page=${i}&limit=${o}&filter=name&inputFilter=${n}`,{data:u,loading:p}=H(m,[i,o,a,n]);return d.useEffect(()=>{p||s(u)},[u,p]),e.jsx("tbody",{className:"bg-white",children:p&l?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(Z,{message:"Cargando egresos"})})}):((g=u.data)==null?void 0:g.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(v,{icon:re,css:"mr-3"}),"No hay datos disponibles."]})})})}):(c=u.data)==null?void 0:c.map((j,r)=>{var h,b,N;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"mx-auto text-center",children:[e.jsx(v,{icon:ze,css:"text-red-600",size:"22px"}),e.jsx(v,{icon:ze,css:"text-red-600",size:"22px"}),e.jsx("div",{className:"text-sm leading-5 text-gray-500 font-semibold",children:"Egreso"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center w-40",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-16",children:["S/ ",(h=j.pivot)==null?void 0:h.subtotal]})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative min-w-[400px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:j.reason})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700",children:G((b=j.pivot)==null?void 0:b.created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:je((N=j.pivot)==null?void 0:N.created_at)})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var f;return x((f=j.pivot)==null?void 0:f.id)},children:e.jsx(v,{icon:U,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},r)})})}function Qt({cashId:t,page:s,limit:i,searchByFilter:o,helper:a,setData:n,mustLoad:l,setOptionSearch:x,setSearchByFilter:m,setCashHelper:u,setHelper:p,setMustLoad:g}){var b,N;const c=`/cash_registers/get_all_vouchers?page=${s}&limit=${i}&inputFilter=${o}`,{data:j,loading:r}=H(c,[s,i,a,o]);d.useEffect(()=>{r||n(j)},[j,r]);const h=(f,k)=>{ae(`¿Seguro(a) que quieres eliminar el voucher ${f}?`,()=>{const E=y(e.jsx(D,{message:"Eliminando voucher"}),{autoClose:3e3,hideProgressBar:!0});Y("DELETE","/cash_registers/destroy_voucher",{voucher_id:f,cash_register_id:k}).then(C=>{if(g(!1),C.errors)return y.update(E,{render:e.jsx(e.Fragment,{children:e.jsx(K,{data:C.errors})}),type:y.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(C.message)return y.update(E,{render:e.jsx(e.Fragment,{children:C.message}),type:y.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});y.update(E,{render:`El voucher ${f} ha sido eliminado.`,type:y.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),p(P=>P+1)}).catch(C=>{y.update(E,{render:"Hay problemas de conexión",type:y.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})})};return e.jsx("tbody",{className:"bg-white",children:r&l?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx(Z,{message:"Cargando vouchers"})})}):((b=j.data)==null?void 0:b.length)===0?e.jsx("tr",{className:"text-white",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(v,{icon:re,css:"mr-3"}),"No hay datos disponibles."]})})})}):(N=j.data)==null?void 0:N.map((f,k)=>e.jsxs("tr",{className:`${t===f.cash_id&&"bg-gray-300"} hover:bg-sky-200`,children:[e.jsx("td",{className:"py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative w-96",children:e.jsxs("button",{className:"bg-red-500 hover:bg-red-700 text-sm leading-5 w-40 md:w-3/4 mx-auto text-white flex flex-col items-center p-1 rounded",onClick:()=>{u(f.cash_id),x(w.vou),m(f.voucher_id)},children:[e.jsx(v,{icon:ye,css:"mx-auto",size:"24px"}),e.jsx("p",{css:"text-center",children:f.voucher_id})]})}),e.jsxs("td",{className:"px-2 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:[e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-40 overflow-hidden mx-auto",children:f.customer}),e.jsxs("div",{className:"text-sm leading-5 text-gray-700 w-40 overflow-hidden mx-auto",children:[f.abbreviation&&`${f.abbreviation}:`," ",f.doc_customer]})]}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"min-w-28 text-center",children:[e.jsx("p",{className:"text-gray-700 md:hidden",children:G(f.max_created_at)}),e.jsx("p",{className:"text-gray-700 text-base hidden md:block",children:Bt(f.max_created_at)}),e.jsx("p",{className:"text-gray-900 font-semibold",children:je(f.max_created_at)})]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative w-36",children:e.jsx("div",{className:"text-center",onClick:()=>h(f.voucher_id,f.cash_id),children:e.jsx(v,{icon:U,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},k))})}function Xt({id:t,searchByFilter:s,mustLoad:i,helper:o,handleDelete:a}){var g,c,j,r,h;const n=`/cash_registers/get_voucher/${t}?inputFilter=${s}`,{data:l,loading:x}=H(n,[s,o]),[m,u]=d.useState("");d.useEffect(()=>{var b,N;u((N=(b=l.voucher)==null?void 0:b.reduce((f,k)=>{var E;return f+parseFloat((E=k.pivot)==null?void 0:E.subtotal)},0))==null?void 0:N.toFixed(2))},[l]);const p=()=>{const b=`/cash_registers/get_voucher_pdf/${t}?uuid=${s}`;window.open(b,"_blank")};return e.jsx("tbody",{className:"bg-white",children:x&i?e.jsx("tr",{className:"text-white bg-gray-500",children:e.jsx("td",{colSpan:100,children:e.jsx("div",{children:e.jsx(Z,{message:"Cargando voucher"})})})}):e.jsxs(e.Fragment,{children:[(g=l.voucher)==null?void 0:g.map((b,N)=>{var f,k,E,C;return e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:b.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-16",children:["S/ ",b.price]})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-center ",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:(f=b.pivot)==null?void 0:f.quantity})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative text-center",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900 min-w-20",children:["S/ ",(k=b.pivot)==null?void 0:k.subtotal]})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 min-w-24",children:(E=b.pivot)==null?void 0:E.description})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"min-w-28 text-center",children:e.jsx("p",{className:"text-gray-700",children:G((C=b.pivot)==null?void 0:C.created_at)})})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{className:"text-center",onClick:()=>{var P;return a((P=b.pivot)==null?void 0:P.id)},children:e.jsx(v,{icon:U,css:"text-red-800 hover:scale-150 transition ease-out cursor-pointer",size:"25px"})})})]},N)}),e.jsx("tr",{className:"hover:bg-sky-200",children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",colSpan:100,children:e.jsxs("div",{className:"text-lg font-bold leading-5 text-gray-900 text-center",children:["Cliente: ",(c=l.customer)==null?void 0:c.name," - ",((r=(j=l.customer)==null?void 0:j.identity_document)==null?void 0:r.abbreviation)||"-",": ",((h=l.customer)==null?void 0:h.document_number)||"--"]})})}),e.jsx("tr",{className:"hover:bg-sky-200",children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200",colSpan:100,children:e.jsxs("div",{className:"text-lg font-bold leading-5 text-gray-600 text-center",children:["Total: S/ ",m]})})}),m>0&&e.jsx("tr",{className:"hover:bg-red-300",onClick:p,children:e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 cursor-pointer",colSpan:100,children:e.jsxs("div",{className:"text-center text-red-800 font-bold text-xl animate-bounce",children:["Presiona aquí para verlo en ",e.jsx(v,{icon:ye,css:"text-red-800 hover:scale-125 transition ease-out cursor-pointer",size:"35px"})]})})})]})})}function Jt({pageQuantity:t,quantity:s,setLimit:i,setPage:o,nextPage:a,prevPage:n,page:l,lastPage:x}){return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"flex justify-between items-center mt-4 px-1 sm:px-5",children:[e.jsxs("div",{className:"hidden xl:block text-black rounded-lg",children:["Mostrando ",t>s?s:t," de ",s," resultados"]}),e.jsx("button",{className:"xl:hidden bg-white border px-4 py-2 text-gray-600 hover:text-indigo-500 hover:bg-gray-200 cursor-pointer rounded-lg",disabled:!n,onClick:()=>{n&&o(parseInt(ee(n)))},children:"Anterior"}),e.jsxs("div",{className:"hidden xl:block text-vetbrown rounded-full bg-white border border-vetbrown p-2 mb-1",children:[e.jsx("span",{className:"",children:" Por página: "}),e.jsxs("select",{className:"px-2 py-1 bg-transparent rounded-lg cursor-pointer",defaultValue:"6",onChange:m=>{i(m.target.value),o(1)},children:[e.jsx("option",{value:"6",className:"bg-white",children:"6"}),e.jsx("option",{value:"12",className:"bg-white",children:"12"}),e.jsx("option",{value:"20",className:"bg-white",children:"20"})]})]}),e.jsx("div",{className:"xl:hidden text-gray-600 rounded-xl bg-white border border-gray-200 p-2",children:e.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded-lg cursor-pointer",defaultValue:"6",onChange:m=>{i(m.target.value),o(1)},children:[e.jsx("option",{value:"6",className:" bg-white",children:"6"}),e.jsx("option",{value:"12",className:" bg-white",children:"12"}),e.jsx("option",{value:"20",className:" bg-white",children:"20"})]})}),e.jsxs("nav",{className:"hidden xl:flex rounded-lg divide-vetbrown ease-out duration-300",children:[e.jsx("button",{className:`px-4 py-2 text-vetbrown bg-white border border-vetbrown rounded-l-full ${n&&"hover:text-indigo-500 hover:scale-[105%]"}`,disabled:!n,onClick:()=>{n&&o(parseInt(ee(n)))},children:"Anterior"}),l!==1&&e.jsx("button",{className:"px-4 py-2 text-indigo-800 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{o(1)},children:1}),1-l<-2&&l!=1&&e.jsx("span",{className:"px-4 py-2 bg-white text-gray-500",children:"..."}),1-l<-1&&l!=1&&e.jsx("button",{className:"px-4 py-2 text-gray-600 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{o(m=>m-1)},children:parseInt(l)-1}),e.jsx("button",{className:"px-4 py-2 text-indigo-500 bg-vetwhite border border-vetbrown font-medium",children:l}),x-l>0&&e.jsx("button",{className:"px-4 py-2 text-gray-600 bg-white hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{o(m=>m+1)},children:parseInt(l)+1}),x-l>2&&e.jsx("span",{className:"px-4 py-2 bg-white  text-gray-600",children:"..."}),x-l>2&&e.jsx("button",{className:"px-4 py-2 bg-white text-gray-600 hover:text-indigo-500 hover:scale-[105%]",onClick:()=>{o(parseInt(x))},children:x}),e.jsx("button",{className:`px-4 py-2 text-vetbrown rounded-r-full bg-white border border-vetbrown ${a&&"hover:text-indigo-500 hover:scale-[105%]"}`,disabled:!a,onClick:()=>{a&&o(parseInt(ee(a)))},children:"Siguiente"})]}),e.jsx("button",{className:"xl:hidden bg-white border px-4 py-2 text-gray-600 hover:text-indigo-500 hover:bg-gray-200 cursor-pointer rounded-lg",disabled:!a,onClick:()=>{a&&o(parseInt(ee(a)))},children:"Siguiente"})]}),e.jsxs("div",{className:"block xl:hidden text-black rounded-lg text-center mt-5",children:["Mostrando ",t>s?s:t," de ",s," resultados"]})]})}function M({cashRegisterId:t,open:s,setOpen:i,setHelper:o}){const a={id:he(),img:"",product_id:"",name:"",price:0,quantity:1,description:""},n={id:he(),service_id:"",name:"",price:0,quantity:1,description:""},l={id:he(),expense_id:"",reason:"",subtotal:0},[x,m]=d.useState(!1),[u,p]=d.useState(se.inc),[g,c]=d.useState(1),[j,r]=d.useState(0),[h,b]=d.useState(""),[N,f]=d.useState(""),[k,E]=d.useState(1),[C,P]=d.useState(""),[F,W]=d.useState("name"),[V,A]=d.useState(""),[z,S]=d.useState(1),[I,ie]=d.useState(!1),[Ge,We]=d.useState(!1),{debounceValue:fe}=X(V,400),{data:Qe,loading:ve}=H(`/customers/list?filter=${F}&inputFilter=${fe}`,[z],Ge),[Xe,Je]=d.useState(a),[q,oe]=d.useState([]),[Ne,we]=d.useState(""),[Ke,Ce]=d.useState(1),[Ze,et]=d.useState(!1),[tt,st]=d.useState(!1),{debounceValue:Se}=X(Ne,400),{data:at,loading:_e}=H(`/products/list?filter=name&inputFilter=${Se}`,[Ke],tt),[rt,nt]=d.useState(n),[O,le]=d.useState([]),[Ee,ke]=d.useState(""),[it,Te]=d.useState(1),[ot,lt]=d.useState(!1),[dt,ct]=d.useState(!1),{debounceValue:Fe}=X(Ee,400),{data:ut,loading:$e}=H(`/services/list?filter=name&inputFilter=${Fe}`,[it],dt),[xt,mt]=d.useState(l),[de,ce]=d.useState([]),[Be,Pe]=d.useState(""),[pt,Me]=d.useState(1),[ht,gt]=d.useState(!1),[bt,yt]=d.useState(!1),{debounceValue:Ie}=X(Be,400),{data:jt,loading:Re}=H(`/expenses/list?filter=reason&inputFilter=${Ie}`,[pt],bt);d.useEffect(()=>{!_e&&Ze&&Ce(_=>_+1)},[Se]),d.useEffect(()=>{!$e&&ot&&Te(_=>_+1)},[Fe]),d.useEffect(()=>{!Re&&ht&&Me(_=>_+1)},[Ie]),d.useEffect(()=>{!ve&&I&&S(_=>_+1)},[fe]),d.useEffect(()=>{var _;r(Array.isArray(q)&&Array.isArray(O)?(_=[...q,...O].reduce((Q,T)=>Q+parseFloat(T.price)*parseFloat(T.quantity),0))==null?void 0:_.toFixed(2):0)},[q,O]),d.useEffect(()=>{$t("/cash_registers/get_voucher_id").then(_=>f(_))},[k]);const ft=()=>{m(!0);const _={cash_register_id:t,type_of_movement:g};C&&(_.customer_id=C),q.length>0&&(_.products=q.map(T=>({product_id:T.product_id,quantity:T.quantity,description:T.description}))),O.length>0&&(_.services=O.map(T=>({service_id:T.service_id,quantity:T.quantity,description:T.description}))),de.length>0&&(_.expenses=de.map(T=>({expense_id:T.expense_id,subtotal:T.subtotal})));const Q=y(e.jsx(D,{message:"Agregando movimiento"}),{autoClose:3e3,hideProgressBar:!0});Y("POST","/cash_registers/store_movements",_).then(T=>{if(T.errors)return y.update(Q,{render:e.jsx(e.Fragment,{children:e.jsx(K,{data:T.errors})}),type:y.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});y.update(Q,{render:"Movimiento guardado.",type:y.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),P(""),A(""),oe([]),le([]),ce([]),o(ue=>ue+1),i(!1),E(ue=>ue+1)}).catch(T=>{console.log(T),y.update(Q,{render:"Hay problemas de conexión",type:y.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})}).finally(()=>m(!1))};return e.jsxs(Vt,{option:"Vender",open:s,setOpen:i,handleClick:ft,icon:St,text:"Nuevo movimiento",loading:x,width:"max-w-5xl",children:[e.jsx("div",{className:"col-span-full",children:e.jsx(qe,{names:[{name:"Ingresos",value:se.inc,movement:1},{name:"Egresos",value:se.exp,movement:2}],optionSearch:u,setOptionSearch:p,anotherAction:!0,action:_=>c(_.movement)})}),u===se.inc?e.jsxs(e.Fragment,{children:[e.jsxs(M.ButtonContainer,{css:"border-2 border-gray-200 bg-gray-300",children:[e.jsx("span",{className:"text-base absolute -translate-y-2 -translate-x-12",children:"Comprobante"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500 mt-2",children:N||"V-00000001"})]}),e.jsx(M.ButtonContainer,{css:"bg-blue-500 hover:bg-blue-700 order-5 mt-10",children:e.jsx("button",{className:"w-full text-white",onClick:()=>{P(""),A(""),oe([]),le([]),we(""),ke("")},children:e.jsx("code",{children:"LIMPIAR FORMULARIO"})})}),e.jsxs(M.ButtonContainer,{css:"border-2 order-4 bg-sky-800 text-white",children:["Total: S/. ",j]}),j>0&&e.jsxs(M.ButtonContainer,{css:"order-4",children:[e.jsx("h1",{className:"underline  underline-offset-2",children:"Calculadora de vuelto"}),e.jsxs("section",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"number",step:"any",min:0,max:99999,value:h,placeholder:"Cantidad de dinero ...",className:"border-2 w-full sm:w-1/2  p-1 rounded-lg bg-transparent text-center",onChange:_=>b(_.target.value)}),e.jsx("div",{className:"border-2 w-full sm:w-1/2 rounded-lg min-h-10 flex items-center justify-center",children:e.jsx("p",{children:h-j>0?`Su vuelto es de S/. ${(h-j).toFixed(2)}`:`Faltan S/. ${-(h-j).toFixed(2)}`})})]})]}),e.jsx(M.CustomerModal,{setMustSearchCustomer:ie,filterCustomer:F,setFilterCustomer:W,inputCustomer:V,setInputCustomer:A,loadingCustomer:ve,dataCustomer:Qe,setCustomerId:P,setHelperSearchCustomer:We,setHelperCustomer:S}),e.jsx("hr",{className:"col-span-full"}),e.jsx(M.ProductModal,{setMustSearchProduct:et,inputProduct:Ne,setInputProduct:we,loadingProduct:_e,dataProduct:at,selectProduct:Xe,setSelectProduct:Je,setProducts:oe,initialStateProduct:a,products:q,setHelperSearchProduct:st,setHelperProduct:Ce}),e.jsx("hr",{className:"col-span-full sm:hidden"}),e.jsx(M.ServiceModal,{setMustSearchService:lt,inputService:Ee,setInputService:ke,loadingService:$e,dataService:ut,selectService:rt,setSelectService:nt,setServices:le,initialStateService:n,services:O,setHelperSearchService:ct,setHelperService:Te}),e.jsx("hr",{className:"col-span-full"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M.ButtonContainer,{css:"bg-blue-500 hover:bg-blue-700 order-2 mt-10",children:e.jsx("button",{className:"w-full text-white",onClick:()=>{ce([]),Pe("")},children:e.jsx("code",{children:"LIMPIAR FORMULARIO"})})}),e.jsx(M.ExpenseModal,{setMustSearchExpense:gt,inputExpense:Be,setInputExpense:Pe,loadingExpense:Re,dataExpense:jt,selectExpense:xt,setSelectExpense:mt,setExpenses:ce,initialStateExpense:l,expenses:de,setHelperSearchExpense:yt,setHelperExpense:Me})]})]})}function Kt({children:t,css:s=""}){return e.jsx("div",{className:`relative w-full col-span-full rounded px-3 py-[0.32rem] leading-[1.6] text-gray-600  text-center font-semibold text-lg ${s}`,children:t})}function Zt({setMustSearchCustomer:t,filterCustomer:s,setFilterCustomer:i,inputCustomer:o,setInputCustomer:a,loadingCustomer:n,dataCustomer:l,setCustomerId:x,setHelperSearchCustomer:m,setHelperCustomer:u}){var c,j;const[p,g]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative w-full col-span-full grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(ne,{setMustSearch:t,filters:[{tag:"Nombre",value:"name"},{tag:"Número de documento",value:"document_number"}],filter:s,setFilter:i,input:o,setInput:a,label:"Cliente",setHelperSearch:m,setHelper:u,css:"w-full col-span-full order-1 pe-10",listStyle:"w-full max-h-72",anotherAction:!0,actions:()=>{x("")},children:n?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(D,{message:"Buscando los clientes ..."})}):((c=l.data)==null?void 0:c.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay clientes con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(j=l.data)==null?void 0:j.map((r,h)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{var b;t(!1),a(`${r.name} - ${((b=r.identity_document)==null?void 0:b.abbreviation)||"--"}: ${r.document_number||"--"}`),x(r.id)},children:`${r.name} - ${r.identity_document?`${r.identity_document.abbreviation}: ${r.document_number}`:"--"}`},h))})}),e.jsx("button",{type:"button",className:"order-1 absolute bottom-1 right-12 bg-gray-100 rounded-full px-2 py-1 z-10 hover:bg-gray-300",onClick:()=>g(!0),children:e.jsx(v,{icon:_t})})]}),e.jsx("div",{className:"absolute",children:e.jsx(Pt,{customer:{...Mt},option:"Crear",open:p,setOpen:g,actions:!1,mustBeToast:!1,focus:!1})})]})}function es({setMustSearchProduct:t,inputProduct:s,setInputProduct:i,loadingProduct:o,dataProduct:a,selectProduct:n,setSelectProduct:l,setProducts:x,initialStateProduct:m,products:u,setHelperSearchProduct:p,setHelperProduct:g}){var c,j;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full col-span-1 grid grid-cols-1 gap-6 sm:gap-x-6",children:[e.jsx(ne,{setMustSearch:t,input:s,setInput:i,label:"Producto",setHelperSearch:p,setHelper:g,css:"w-full max-h-10",listStyle:"w-full sm:w-[200%] max-h-72",children:o?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(D,{message:"Buscando los productos ..."})}):((c=a.data)==null?void 0:c.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay productos con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(j=a.data)==null?void 0:j.map((r,h)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 p-2 border-b rounded-lg",onClick:()=>{t(!1),i(r.name),l(b=>({...b,img:r.product_image_url,product_id:r.id,name:r.name,price:r.price}))},children:e.jsxs("article",{className:"flex flex-col sm:flex-row justify-center sm:justify-start items-center",children:[e.jsx("img",{src:r.product_image_url||"/image/juguete.webp",alt:r.name,width:"150px",className:"rounded-lg object-contain mb-6 sm:mb-0 sm:me-10"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Nombre:"})," ",`${r.name}`]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Precio:"})," ",`S/. ${r.price}`]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Stock:"})," ",`${r.stock}`," u."]})]})]})},h))})}),n.name&&s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{select:n,handleClick:r=>{l(h=>({...h,quantity:parseFloat(r.target.value)||""}))}}),e.jsx(Ye,{select:n,handleChange:r=>{l(h=>({...h,description:r.target.value}))},handleClick:()=>{x(r=>{if(!n.product_id)return[...r];const h=u.findIndex(b=>b.product_id===n.product_id);if(h!==-1){const b=[...u];return b[h].quantity+=parseFloat(n.quantity),b}return[...r,n]}),i(""),l(m)},message:"producto"})]})]}),u.length>0&&e.jsx("div",{className:"col-span-full order-2",children:e.jsxs(B,{children:[e.jsx(B.HeaderTable,{names:["Imagen","Producto","precio","cantidad","subtotal","descripción","Eliminar"]}),e.jsx(Ue,{data:u,setData:x})]})})]})}function ts({setMustSearchService:t,inputService:s,setInputService:i,loadingService:o,dataService:a,selectService:n,setSelectService:l,setServices:x,initialStateService:m,services:u,setHelperSearchService:p,setHelperService:g}){var c,j;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full col-span-1 grid grid-cols-1 gap-6 sm:gap-x-6",children:[e.jsx(ne,{setMustSearch:t,input:s,setInput:i,label:"Servicio",setHelperSearch:p,setHelper:g,css:"w-full max-h-10",listStyle:"w-full max-h-72",children:o?e.jsx("div",{className:"w-full mx-auto p-4",children:e.jsx(D,{message:"Buscando los servicios ..."})}):((c=a.data)==null?void 0:c.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay servicios con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(j=a.data)==null?void 0:j.map((r,h)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{t(!1),i(r.name),l(b=>({...b,service_id:r.id,name:r.name,price:r.price}))},children:`${r.name} ->  S/. ${r.price}`},h))})}),n.name&&s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{select:n,handleClick:r=>{l(h=>({...h,quantity:parseFloat(r.target.value)||""}))}}),e.jsx(Ye,{select:n,handleChange:r=>{l(h=>({...h,description:r.target.value}))},handleClick:()=>{x(r=>{if(!n.service_id)return[...r];const h=u.findIndex(b=>b.service_id===n.service_id);if(h!==-1){const b=[...u];return b[h].quantity+=parseFloat(n.quantity),b}return[...r,n]}),i(""),l(m)},message:"servicio"})]})]}),u.length>0&&e.jsx("div",{className:"col-span-full order-3",children:e.jsxs(B,{children:[e.jsx(B.HeaderTable,{names:["Servicio","precio","cantidad","subtotal","descripción","Eliminar"]}),e.jsx(Ue,{data:u,setData:x})]})})]})}function Le({select:t,handleClick:s}){return e.jsxs("div",{className:"relative border border-gray-600 rounded w-full",children:[e.jsx("input",{type:"number",step:"any",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:t.quantity,onChange:s,min:0,required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Cantidad"})]})}function Ye({select:t,handleChange:s,handleClick:i,message:o}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full",children:[e.jsx("textarea",{className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:t.description,onChange:s}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Descripción (opcional)"})]}),e.jsxs("button",{type:"button",className:"w-full col-span-full bg-blue-500 text-white font-semibold rounded-lg py-2 hover:bg-blue-700",onClick:i,children:["Agregar ",o]})]})}function Ue({data:t,setData:s}){return e.jsx("tbody",{className:"bg-white text-center",children:t.map((i,o)=>e.jsxs("tr",{className:"hover:bg-sky-200",children:[i.img&&e.jsx("td",{className:"whitespace-no-wrap border-b border-gray-200 h-20",children:e.jsx("div",{className:"text-gray-900 w-20",children:e.jsx("img",{src:i.img,alt:i.name,className:"rounded-sm h-16 mx-auto transition-all cursor-pointer hover:absolute hover:scale-[300%] hover:translate-x-20 hover:z-10"})})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-40 overflow-hidden mx-auto",children:i.name})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/ ",i.price]})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:i.quantity})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/ ",(parseFloat(i.price)*parseFloat(i.quantity)).toFixed(2)]})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative max-w-[200px]",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900 w-48 overflow-hidden mx-auto",children:i.description})}),e.jsx("td",{className:"py-2 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{onClick:()=>{const a=t.filter(n=>n.id!==i.id);s(a)},children:e.jsx(v,{icon:U,css:"text-red-800 hover:scale-125 transition ease-out  cursor-pointer",size:"25px"})})})]},o))})}function ss({setMustSearchExpense:t,inputExpense:s,setInputExpense:i,loadingExpense:o,dataExpense:a,selectExpense:n,setSelectExpense:l,setExpenses:x,initialStateExpense:m,expenses:u,setHelperSearchExpense:p,setHelperExpense:g}){var c,j;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full col-span-full",children:e.jsx(ne,{setMustSearch:t,input:s,setInput:i,label:"Egresos",setHelperSearch:p,setHelper:g,children:o?e.jsx("div",{className:"w-full sm:w-1/2 mx-auto py-4",children:e.jsx(D,{message:"Buscando las razones de egreso ..."})}):((c=a.data)==null?void 0:c.length)===0?e.jsx("h3",{className:"cursor-pointer py-4 text-center",children:"No hay servicios con este dato ..."}):e.jsx("ul",{className:"px-5 py-2",children:(j=a.data)==null?void 0:j.map((r,h)=>e.jsx("li",{className:"cursor-pointer hover:bg-slate-600 rounded p-2",onClick:()=>{t(!1),i(r.reason),l(b=>({...b,expense_id:r.id,reason:r.reason}))},children:`${r.reason}`},h))})})}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative border border-gray-600 rounded w-full col-span-full",children:[e.jsx("input",{type:"number",className:"peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none text-gray-600  placeholder:text-gray-600  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0",value:n.subtotal,onChange:r=>{l(h=>({...h,subtotal:r.target.value}))},required:!0}),e.jsx("label",{className:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] transition-all duration-200 ease-out peer-focus:-translate-y-[1.8rem] peer-focus:scale-[0.9] peer-data-[te-input-state-active]:-translate-y-[2rem] peer-data-[te-input-state-active]:scale-[0.9] motion-reduce:transition-none text-gray-600  peer-focus:text-primary peer-valid:-translate-y-[1.8rem] peer-valid:scale-[0.9] peer-valid:text-primary",children:"Dinero"})]}),e.jsx("button",{type:"button",className:"w-full col-span-full bg-blue-500 text-white font-semibold rounded-lg py-2 hover:bg-blue-700",onClick:()=>{n&&(x(r=>n.expense_id?[...r,n]:[...r]),i(""),l(m))},children:"Agregar razón"})]}),u.length>0&&e.jsx("div",{className:"col-span-full",children:e.jsxs(B,{children:[e.jsx(B.HeaderTable,{names:["subtotal","razón","eliminar"]}),e.jsx("tbody",{className:"bg-white text-center",children:u.map((r,h)=>e.jsxs("tr",{className:"hover:bg-sky-200",children:[e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200",children:e.jsxs("div",{className:"text-sm leading-5 text-gray-900",children:["S/ ",r.subtotal]})}),e.jsx("td",{className:"py-2 whitespace-no-wrap border-b border-gray-200 min-w-72",children:e.jsx("div",{className:"text-sm leading-5 text-gray-900",children:r.reason})}),e.jsx("td",{className:"px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 relative",children:e.jsx("div",{onClick:()=>{const b=u.filter(N=>N.id!==r.id);x(b)},children:e.jsx(v,{icon:U,css:"text-red-800 hover:scale-125 transition ease-out cursor-pointer",size:"25px"})})})]},h))})]})})]})}R.Header=qt;R.Search=Ot;R.ExcelButton=Lt;R.Pagination=Jt;R.SectionCashRegisterModal=M;M.ButtonContainer=Kt;M.CustomerModal=Zt;M.ProductModal=es;M.ServiceModal=ts;M.ExpenseModal=ss;B.HeaderTable=Yt;B.BodyProductTable=Ut;B.BodyServiceTable=Gt;B.BodyExpenseTable=Wt;B.BodyVoucherTable=Xt;function as(){var A,z;const t={id:"",initial_amount:0},[s,i]=d.useState(1),[o,a]=d.useState(12),[n,l]=d.useState(""),[x,m]=d.useState(""),[u,p]=d.useState(0),g=`/cash_registers/list?page=${s}&limit=${o}&startDate=${n}&finishDate=${x}`,{data:c,loading:j}=H(g,[s,o,u]),[r,h]=d.useState("Abrir"),[b,N]=d.useState(!1),[f,k]=d.useState(t),[E,C]=d.useState(!0),[P,F]=d.useState(!0),[W,V]=d.useState({id:null,name:"",state:1});return e.jsxs(e.Fragment,{children:[e.jsx(Tt,{icon:ge,message:"Gestión de cajas",name:"nueva caja",setOpen:N,setOption:h,setData:k,initialState:t}),e.jsxs(L,{children:[e.jsx(L.SearchDate,{setHelper:p,startDate:n,setStartDate:l,finishDate:x,setFinishDate:m,setPage:i,handleReset:()=>{l(""),m(""),i(1),C(!0),p(S=>S+1)}}),e.jsx(rs,{}),e.jsx(L.FilterBar,{hide:!n&&!x,data:[{tag:"Fecha de inicio",input:n.length>0?n:null,handleClick:()=>{l(""),i(1),p(S=>S+1)}},{tag:"Fecha de finalización",input:x.length>0?x:null,handleClick:()=>{m(""),i(1),p(S=>S+1)}}]}),e.jsx(L.CardContainer,{children:j&E?e.jsx(Z,{message:"Cargando cajas"}):((A=c.data)==null?void 0:A.length)===0?e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(v,{icon:re,css:"mr-3"}),"No hay datos disponibles."]})}):e.jsx(e.Fragment,{children:(z=c==null?void 0:c.data)==null?void 0:z.map((S,I)=>e.jsx(L.CardContainer.Card,{mustAnimate:P,setMustAnimate:F,children:e.jsx(It,{cash_registerI:S,setCashRegister:k,setOption:h,setOpenModal:N,setHelper:p,setMustLoad:C,setMustAnimate:F,handleClick:()=>{V({id:S.id,name:G(S.created_at),state:S.state})}})},`${S.id}-${I}`))})}),e.jsx(L.Pagination,{pageQuantity:c.current_page*c.per_page,quantity:c.total,setMustLoad:C,setLimit:a,setPage:i,nextPage:c.next_page_url,prevPage:c.prev_page_url,page:c.current_page,lastPage:c.last_page,setMustAnimate:F})]}),e.jsx(At,{cashRegister:f,option:r,open:b,setOpen:N,setMustLoad:C,setHelper:p}),e.jsx(Ft,{}),e.jsx(R,{cashRegister:W,handleClose:()=>V({id:null,name:"",state:1}),setHelper:p,setMustLoad:C})]})}function rs(){const[t,s]=d.useState(""),[i,o]=d.useState(2);return d.useEffect(()=>{const n=document.getElementById("cash_register").getAttribute("role");o(n)},[]),e.jsx(e.Fragment,{children:i==1?e.jsxs("div",{className:"bg-vetwhite shadow-2xl p-5 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-lg text-gray-600",children:"Ingresos / Egresos del mes"}),e.jsx("input",{type:"month",className:"p-2 rounded-xl bg-gray-300 w-full mt-2",value:t,onChange:a=>{s(a.target.value)}}),e.jsx("a",{href:t.length>0?`/cash_registers/get_excel_by_month?month=${t.split("-")[1]}&year=${t.split("-")[0]}`:"#",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-flex mt-5 w-full",children:e.jsxs("span",{className:"mx-auto",children:[e.jsx(v,{icon:Ve,css:"mr-2",size:"25px"}),"Descargar Excel"]})})]}):null})}const ns=kt.createRoot(document.getElementById("cash_register"));ns.render(e.jsx(as,{}));
