import{j as e,d as z,r as s,H as A,v as D,I as H,e as M,F as O}from"./Footer-1433491c.js";import{F as Y}from"./Filters-7240b55f.js";import{s as Q,Q as n,S as G,f as U,T as W,u as q,a as V,b as c,L as J}from"./Spinner-b109c97d.js";import{E as K,i as X}from"./initialStateExpense-60aafb84.js";function Z({expenseI:o,setExpense:u,setOption:p,setOpenModal:g,setHelper:m,setMustLoad:j,setMustAnimate:l,setIsDeleted:d}){const x=()=>{Q("¿Quieres eliminar esta razón?",()=>{d(!0),l(!1);const i=n(e.jsx(G,{message:`Eliminando a ${o.reason}`}),{autoClose:3e3,hideProgressBar:!0});U("DELETE","/expenses/destroy",{id:o.id}).then(a=>{if(j(!1),a.errors)return d(!1),n.update(i,{render:e.jsx(e.Fragment,{children:e.jsx(W,{data:a.errors})}),type:n.TYPE.ERROR,autoClose:3e3,hideProgressBar:!1});if(a.message)return d(!1),n.update(i,{render:e.jsx(e.Fragment,{children:a.message}),type:n.TYPE.INFO,autoClose:3e3,hideProgressBar:!1});n.update(i,{render:`Razón ${o.reason} ha sido eliminada.`,type:n.TYPE.SUCCESS,autoClose:1500,hideProgressBar:!1}),m(E=>E+1)}).catch(a=>{d(!1),n.update(i,{render:"Hay problemas de conexión",type:n.TYPE.WARNING,autoClose:2500,hideProgressBar:!1})})})};return e.jsxs("div",{className:"flex flex-wrap flex-col justify-between lg:flex-row p-2 md:p-3 md:mx-5",children:[e.jsxs("p",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold text-center md:text-start lg:w-9/12",children:[e.jsx("strong",{children:"Razón de egreso:"})," ",o.reason]}),e.jsxs("div",{className:"my-3 flex justify-center items-center gap-2",children:[e.jsx("button",{className:"bg-vetsky rounded-md py-1 px-4 font-semibold hover:bg-gray-400",onClick:()=>{p("Actualizar"),g(!0),u(o)},children:"Editar"}),e.jsx("button",{className:"bg-vetbrown rounded-md py-1 px-4 text-white font-semibold hover:bg-gray-500",onClick:x,children:"Eliminar"})]})]})}function I(){var w,P,N;const o={...X},u=[{name:"Razón",value:"reason"}],[p,g]=s.useState(1),[m,j]=s.useState(12),[l,d]=s.useState("reason"),[x,i]=s.useState(""),{debounceValue:a}=q(x),[E,b]=s.useState(0),$=`/expenses/list?page=${p}&limit=${m}&filter=${l}&inputFilter=${a}`,{data:t,loading:v}=V($,[p,m,E]),[R,C]=s.useState("Crear"),[_,y]=s.useState(!1),[B,F]=s.useState(o),[L,h]=s.useState(!0),[k,f]=s.useState(!0);return s.useEffect(()=>{v||(h(!0),f(!0),g(1),b(r=>r+1))},[a]),e.jsxs(e.Fragment,{children:[e.jsx(A,{icon:D,message:"Gestión de egresos",name:"egreso",setOpen:y,setOption:C,setData:F,initialState:o}),e.jsx(Y,{children:u.map((r,S)=>e.jsx("button",{className:`${l===r.value?"bg-vetgreen-200 text-white":"bg-vetgreen-100 hover:bg-vetgreen-200 hover:text-white"} cursor-pointer p-2 rounded-md flex-grow`,onClick:()=>{var T;d(r.value),i(""),(T=document.getElementById("input_search"))==null||T.focus()},children:r.name},S))}),e.jsxs(c,{children:[e.jsx(c.Search,{inputFilter:x,setInputFilter:i,filter:l,filters:u,renderMoreFilters:!1}),e.jsx(c.FilterBar,{hide:!a,data:[{tag:(w=u.find(r=>r.value===l))==null?void 0:w.name,input:a,handleClick:()=>i("")}]}),e.jsx(c.CardContainer,{children:v&L?e.jsx(J,{message:"Cargando razones de egreso"}):((P=t.data)==null?void 0:P.length)===0?e.jsx("div",{className:"bg-white p-4 border rounded shadow-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-lg",children:[e.jsx(H,{icon:M,css:"mr-3"}),"No hay datos disponibles."]})}):e.jsx(e.Fragment,{children:(N=t==null?void 0:t.data)==null?void 0:N.map((r,S)=>e.jsx(c.CardContainer.Card,{mustAnimate:k,setMustAnimate:f,width:"w-full",children:e.jsx(Z,{expenseI:r,setExpense:F,setOption:C,setOpenModal:y,setHelper:b,setMustLoad:h,setMustAnimate:f})},`${r.id}-${S}`))})}),e.jsx(c.Pagination,{pageQuantity:t.current_page*t.per_page,quantity:t.total,setMustLoad:h,setLimit:j,setPage:g,nextPage:t.next_page_url,prevPage:t.prev_page_url,page:t.current_page,lastPage:t.last_page,setMustAnimate:f})]}),e.jsx(K,{expense:B,option:R,open:_,setOpen:y,setMustLoad:h,setHelper:b}),e.jsx(O,{})]})}const ee=z.createRoot(document.getElementById("expense"));ee.render(e.jsx(I,{}));
